var qT=Object.defineProperty,zT=Object.defineProperties;var GT=Object.getOwnPropertyDescriptors;var Vm=Object.getOwnPropertySymbols,WT=Object.getPrototypeOf,KT=Object.prototype.hasOwnProperty,QT=Object.prototype.propertyIsEnumerable,YT=Reflect.get;var jm=(t,e,n)=>e in t?qT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pt=(t,e)=>{for(var n in e||={})KT.call(e,n)&&jm(t,n,e[n]);if(Vm)for(var n of Vm(e))QT.call(e,n)&&jm(t,n,e[n]);return t},gt=(t,e)=>zT(t,GT(e));var un=(t,e,n)=>YT(WT(t),n,e);var E=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(d){i(d)}},o=u=>{try{c(n.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});function Um(t,e){return Object.is(t,e)}var Ae=null,bo=!1,Co=1,Bt=Symbol("SIGNAL");function se(t){let e=Ae;return Ae=t,e}function Bm(){return Ae}var ns={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function tl(t){if(bo)throw new Error("");if(Ae===null)return;Ae.consumerOnSignalRead(t);let e=Ae.nextProducerIndex++;if(Ro(Ae),e<Ae.producerNode.length&&Ae.producerNode[e]!==t&&ts(Ae)){let n=Ae.producerNode[e];No(n,Ae.producerIndexOfThis[e])}Ae.producerNode[e]!==t&&(Ae.producerNode[e]=t,Ae.producerIndexOfThis[e]=ts(Ae)?zm(t,Ae,e):0),Ae.producerLastReadVersion[e]=t.version}function JT(){Co++}function $m(t){if(!(ts(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Co)){if(!t.producerMustRecompute(t)&&!rl(t)){t.dirty=!1,t.lastCleanEpoch=Co;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Co}}function Hm(t){if(t.liveConsumerNode===void 0)return;let e=bo;bo=!0;try{for(let n of t.liveConsumerNode)n.dirty||ZT(n)}finally{bo=e}}function qm(){return Ae?.consumerAllowSignalWrites!==!1}function ZT(t){t.dirty=!0,Hm(t),t.consumerMarkedDirty?.(t)}function So(t){return t&&(t.nextProducerIndex=0),se(t)}function nl(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ts(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)No(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rl(t){Ro(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||($m(n),r!==n.version))return!0}return!1}function il(t){if(Ro(t),ts(t))for(let e=0;e<t.producerNode.length;e++)No(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function zm(t,e,n){if(Gm(t),t.liveConsumerNode.length===0&&Wm(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=zm(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function No(t,e){if(Gm(t),t.liveConsumerNode.length===1&&Wm(t))for(let r=0;r<t.producerNode.length;r++)No(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ro(i),i.producerIndexOfThis[r]=e}}function ts(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ro(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Gm(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Wm(t){return t.producerNode!==void 0}function Km(t){let e=Object.create(XT);e.computation=t;let n=()=>{if($m(e),tl(e),e.value===Ao)throw e.error;return e.value};return n[Bt]=e,n}var Xu=Symbol("UNSET"),el=Symbol("COMPUTING"),Ao=Symbol("ERRORED"),XT=gt(pt({},ns),{value:Xu,dirty:!0,error:null,equal:Um,producerMustRecompute(t){return t.value===Xu||t.value===el},producerRecomputeValue(t){if(t.value===el)throw new Error("Detected cycle in computations.");let e=t.value;t.value=el;let n=So(t),r;try{r=t.computation()}catch(i){r=Ao,t.error=i}finally{nl(t,n)}if(e!==Xu&&e!==Ao&&r!==Ao&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function eb(){throw new Error}var Qm=eb;function Ym(){Qm()}function Jm(t){Qm=t}var tb=null;function Zm(t){let e=Object.create(ey);e.value=t;let n=()=>(tl(e),e.value);return n[Bt]=e,n}function sl(t,e){qm()||Ym(),t.equal(t.value,e)||(t.value=e,nb(t))}function Xm(t,e){qm()||Ym(),sl(t,e(t.value))}var ey=gt(pt({},ns),{equal:Um,value:void 0});function nb(t){t.version++,JT(),Hm(t),tb?.()}function z(t){return typeof t=="function"}function Mr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var xo=Mr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ee=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(s){e=s instanceof xo?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{ty(s)}catch(o){e=e??[],o instanceof xo?e=[...e,...o.errors]:e.push(o)}}if(e)throw new xo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ty(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&qn(n,e)}remove(e){let{_finalizers:n}=this;n&&qn(n,e),e instanceof t&&e._removeParent(this)}};Ee.EMPTY=(()=>{let t=new Ee;return t.closed=!0,t})();var ol=Ee.EMPTY;function Mo(t){return t instanceof Ee||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function ty(t){z(t)?t():t.unsubscribe()}var mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Pr={setTimeout(t,e,...n){let{delegate:r}=Pr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Pr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Po(t){Pr.setTimeout(()=>{let{onUnhandledError:e}=mt;if(e)e(t);else throw t})}function rs(){}var ny=al("C",void 0,void 0);function ry(t){return al("E",void 0,t)}function iy(t){return al("N",t,void 0)}function al(t,e,n){return{kind:t,value:e,error:n}}var zn=null;function kr(t){if(mt.useDeprecatedSynchronousErrorHandling){let e=!zn;if(e&&(zn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zn;if(zn=null,n)throw r}}else t()}function sy(t){mt.useDeprecatedSynchronousErrorHandling&&zn&&(zn.errorThrown=!0,zn.error=t)}var Gn=class extends Ee{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Mo(e)&&e.add(this)):this.destination=sb}static create(e,n,r){return new Or(e,n,r)}next(e){this.isStopped?ul(iy(e),this):this._next(e)}error(e){this.isStopped?ul(ry(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ul(ny,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rb=Function.prototype.bind;function cl(t,e){return rb.call(t,e)}var ll=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ko(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ko(r)}else ko(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ko(n)}}},Or=class extends Gn{constructor(e,n,r){super();let i;if(z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&mt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cl(e.next,s),error:e.error&&cl(e.error,s),complete:e.complete&&cl(e.complete,s)}):i=e}this.destination=new ll(i)}};function ko(t){mt.useDeprecatedSynchronousErrorHandling?sy(t):Po(t)}function ib(t){throw t}function ul(t,e){let{onStoppedNotification:n}=mt;n&&Pr.setTimeout(()=>n(t,e))}var sb={closed:!0,next:rs,error:ib,complete:rs};var Fr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xe(t){return t}function oy(...t){return dl(t)}function dl(t){return t.length===0?Xe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=ab(n)?n:new Or(n,r,i);return kr(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ay(r),new r((i,s)=>{let o=new Or({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fr](){return this}pipe(...n){return dl(n)(this)}toPromise(n){return n=ay(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function ay(t){var e;return(e=t??mt.Promise)!==null&&e!==void 0?e:Promise}function ob(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}function ab(t){return t&&t instanceof Gn||ob(t)&&Mo(t)}function hl(t){return z(t?.lift)}function J(t){return e=>{if(hl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(t,e,n,r,i){return new fl(t,e,n,r,i)}var fl=class extends Gn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function pl(){return J((t,e)=>{let n=null;t._refCount++;let r=W(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var gl=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ee;let n=this.getSubject();e.add(this.source.subscribe(W(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ee.EMPTY)}return e}refCount(){return pl()(this)}};var cy=Mr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ln=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Oo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new cy}next(n){kr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){kr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){kr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ol:(this.currentObservers=null,s.push(n),new Ee(()=>{this.currentObservers=null,qn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new Oo(e,n),t})(),Oo=class extends ln{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ol}};var is=class extends ln{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ml={now(){return(ml.delegate||Date).now()},delegate:void 0};var Fo=class extends Ee{constructor(e,n){super()}schedule(e,n=0){return this}};var ss={setInterval(t,e,...n){let{delegate:r}=ss;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ss;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Lr=class extends Fo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ss.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ss.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,qn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Vr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Vr.now=ml.now;var jr=class extends Vr{constructor(e,n=Vr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var os=new jr(Lr);var Lo=class extends Lr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Vo=class extends jr{};var yl=new Vo(Lo);var as=new Y(t=>t.complete());function uy(t){return t&&z(t.schedule)}function ly(t){return t[t.length-1]}function jo(t){return z(ly(t))?t.pop():void 0}function dn(t){return uy(ly(t))?t.pop():void 0}function vl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function hy(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(f){try{d(r.next(f))}catch(g){o(g)}}function u(f){try{d(r.throw(f))}catch(g){o(g)}}function d(f){f.done?s(f.value):i(f.value).then(c,u)}d((r=r.apply(t,e||[])).next())})}function dy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wn(t){return this instanceof Wn?(this.v=t,this):new Wn(t)}function fy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(I){return function(S){return Promise.resolve(S).then(I,g)}}function c(I,S){r[I]&&(i[I]=function(x){return new Promise(function(R,O){s.push([I,x,R,O])>1||u(I,x)})},S&&(i[I]=S(i[I])))}function u(I,S){try{d(r[I](S))}catch(x){v(s[0][3],x)}}function d(I){I.value instanceof Wn?Promise.resolve(I.value.v).then(f,g):v(s[0][2],I)}function f(I){u("next",I)}function g(I){u("throw",I)}function v(I,S){I(S),s.shift(),s.length&&u(s[0][0],s[0][1])}}function py(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dy=="function"?dy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(d){s({value:d,done:c})},o)}}var Uo=t=>t&&typeof t.length=="number"&&typeof t!="function";function Bo(t){return z(t?.then)}function $o(t){return z(t[Fr])}function Ho(t){return Symbol.asyncIterator&&z(t?.[Symbol.asyncIterator])}function qo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zo=cb();function Go(t){return z(t?.[zo])}function Wo(t){return fy(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Wn(n.read());if(i)return yield Wn(void 0);yield yield Wn(r)}}finally{n.releaseLock()}})}function Ko(t){return z(t?.getReader)}function we(t){if(t instanceof Y)return t;if(t!=null){if($o(t))return ub(t);if(Uo(t))return lb(t);if(Bo(t))return db(t);if(Ho(t))return gy(t);if(Go(t))return hb(t);if(Ko(t))return fb(t)}throw qo(t)}function ub(t){return new Y(e=>{let n=t[Fr]();if(z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lb(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function db(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Po)})}function hb(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gy(t){return new Y(e=>{pb(t,e).catch(n=>e.error(n))})}function fb(t){return gy(Wo(t))}function pb(t,e){var n,r,i,s;return hy(this,void 0,void 0,function*(){try{for(n=py(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Qe(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function hn(t,e=0){return J((n,r)=>{n.subscribe(W(r,i=>Qe(r,t,()=>r.next(i),e),()=>Qe(r,t,()=>r.complete(),e),i=>Qe(r,t,()=>r.error(i),e)))})}function fn(t,e=0){return J((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function my(t,e){return we(t).pipe(fn(e),hn(e))}function yy(t,e){return we(t).pipe(fn(e),hn(e))}function vy(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function _y(t,e){return new Y(n=>{let r;return Qe(n,e,()=>{r=t[zo](),Qe(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function Qo(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{Qe(n,e,()=>{let r=t[Symbol.asyncIterator]();Qe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Iy(t,e){return Qo(Wo(t),e)}function Ey(t,e){if(t!=null){if($o(t))return my(t,e);if(Uo(t))return vy(t,e);if(Bo(t))return yy(t,e);if(Ho(t))return Qo(t,e);if(Go(t))return _y(t,e);if(Ko(t))return Iy(t,e)}throw qo(t)}function $t(t,e){return e?Ey(t,e):we(t)}function gb(...t){let e=dn(t);return $t(t,e)}function mb(t,e){let n=z(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function yb(t){return!!t&&(t instanceof Y||z(t.lift)&&z(t.subscribe))}var Kn=Mr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function et(t,e){return J((n,r)=>{let i=0;n.subscribe(W(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:vb}=Array;function _b(t,e){return vb(e)?t(...e):t(e)}function Yo(t){return et(e=>_b(t,e))}var{isArray:Ib}=Array,{getPrototypeOf:Eb,prototype:wb,keys:Db}=Object;function Jo(t){if(t.length===1){let e=t[0];if(Ib(e))return{args:e,keys:null};if(Tb(e)){let n=Db(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Tb(t){return t&&typeof t=="object"&&Eb(t)===wb}function Zo(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function bb(...t){let e=dn(t),n=jo(t),{args:r,keys:i}=Jo(t);if(r.length===0)return $t([],e);let s=new Y(Cb(r,e,i?o=>Zo(i,o):Xe));return n?s.pipe(Yo(n)):s}function Cb(t,e,n=Xe){return r=>{wy(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)wy(e,()=>{let d=$t(t[u],e),f=!1;d.subscribe(W(r,g=>{s[u]=g,f||(f=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function wy(t,e,n){t?Qe(n,t,e):e()}function Dy(t,e,n,r,i,s,o,c){let u=[],d=0,f=0,g=!1,v=()=>{g&&!u.length&&!d&&e.complete()},I=x=>d<r?S(x):u.push(x),S=x=>{s&&e.next(x),d++;let R=!1;we(n(x,f++)).subscribe(W(e,O=>{i?.(O),s?I(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(d--;u.length&&d<r;){let O=u.shift();o?Qe(e,o,()=>S(O)):S(O)}v()}catch(O){e.error(O)}}))};return t.subscribe(W(e,I,()=>{g=!0,v()})),()=>{c?.()}}function Qn(t,e,n=1/0){return z(e)?Qn((r,i)=>et((s,o)=>e(r,s,i,o))(we(t(r,i))),n):(typeof e=="number"&&(n=e),J((r,i)=>Dy(r,i,t,n)))}function _l(t=1/0){return Qn(Xe,t)}function Ty(){return _l(1)}function Xo(...t){return Ty()($t(t,dn(t)))}function Ab(t){return new Y(e=>{we(t()).subscribe(e)})}function Sb(...t){let e=jo(t),{args:n,keys:r}=Jo(t),i=new Y(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,d=o;for(let f=0;f<o;f++){let g=!1;we(n[f]).subscribe(W(s,v=>{g||(g=!0,d--),c[f]=v},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?Zo(r,c):c),s.complete())}))}});return e?i.pipe(Yo(e)):i}function Ur(t,e){return J((n,r)=>{let i=0;n.subscribe(W(r,s=>t.call(e,s,i++)&&r.next(s)))})}function by(t){return J((e,n)=>{let r=null,i=!1,s;r=e.subscribe(W(n,void 0,void 0,o=>{s=we(t(o,by(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Cy(t,e,n,r,i){return(s,o)=>{let c=n,u=e,d=0;s.subscribe(W(o,f=>{let g=d++;u=c?t(u,f,g):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function Nb(t,e){return z(e)?Qn(t,e,1):Qn(t,1)}function Rb(t,e=os){return J((n,r)=>{let i=null,s=null,o=null,c=()=>{if(i){i.unsubscribe(),i=null;let d=s;s=null,r.next(d)}};function u(){let d=o+t,f=e.now();if(f<d){i=this.schedule(void 0,d-f),r.add(i);return}c()}n.subscribe(W(r,d=>{s=d,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}function cs(t){return J((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ea(t){return t<=0?()=>as:J((e,n)=>{let r=0;e.subscribe(W(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function xb(t){return et(()=>t)}function ta(t=Mb){return J((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Mb(){return new Kn}function Pb(t){return J((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ay(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ur((i,s)=>t(i,s,r)):Xe,ea(1),n?cs(e):ta(()=>new Kn))}function Il(t){return t<=0?()=>as:J((e,n)=>{let r=[];e.subscribe(W(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function kb(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ur((i,s)=>t(i,s,r)):Xe,Il(1),n?cs(e):ta(()=>new Kn))}function Sy(t,e){return J(Cy(t,e,arguments.length>=2,!0))}function Ny(...t){let e=dn(t);return J((n,r)=>{(e?Xo(t,n,e):Xo(t,n)).subscribe(r)})}function Ob(t,e){return J((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(W(r,u=>{i?.unsubscribe();let d=0,f=s++;we(t(u,f)).subscribe(i=W(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function Fb(t){return J((e,n)=>{we(t).subscribe(W(n,()=>n.complete(),rs)),!n.closed&&e.subscribe(n)})}function El(t,e,n){let r=z(t)||e||n?{next:t,error:e,complete:n}:t;return r?J((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(W(s,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),s.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Xe}var gv="https://g.co/ng/security#xss",oe=class extends Error{constructor(e,n){super(mv(e,n)),this.code=e}};function mv(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ys(t){return{toString:t}.toString()}var na="__parameters__";function Lb(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function yv(t,e,n){return ys(()=>{let r=Lb(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,d,f){let g=u.hasOwnProperty(na)?u[na]:Object.defineProperty(u,na,{value:[]})[na];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var fa=globalThis;function de(t){for(let e in t)if(t[e]===de)return e;throw Error("Could not find renamed property on target object.")}function Vb(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ze(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ze).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ry(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var jb=de({__forward_ref__:de});function vv(t){return t.__forward_ref__=vv,t.toString=function(){return ze(this())},t}function qe(t){return _v(t)?t():t}function _v(t){return typeof t=="function"&&t.hasOwnProperty(jb)&&t.__forward_ref__===vv}function fe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Iv(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ba(t){return xy(t,Ev)||xy(t,wv)}function $U(t){return Ba(t)!==null}function xy(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ub(t){let e=t&&(t[Ev]||t[wv]);return e||null}function My(t){return t&&(t.hasOwnProperty(Py)||t.hasOwnProperty(Bb))?t[Py]:null}var Ev=de({\u0275prov:de}),Py=de({\u0275inj:de}),wv=de({ngInjectableDef:de}),Bb=de({ngInjectorDef:de}),re=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=fe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Dv(t){return t&&!!t.\u0275providers}var $b=de({\u0275cmp:de}),Hb=de({\u0275dir:de}),qb=de({\u0275pipe:de}),zb=de({\u0275mod:de}),pa=de({\u0275fac:de}),ls=de({__NG_ELEMENT_ID__:de}),ky=de({__NG_ENV_ID__:de});function $a(t){return typeof t=="string"?t:t==null?"":String(t)}function Gb(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():$a(t)}function Wb(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new oe(-200,t)}function bd(t,e){throw new oe(-201,!1)}var Z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Z||{}),Ol;function Tv(){return Ol}function ot(t){let e=Ol;return Ol=t,e}function bv(t,e,n){let r=Ba(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Z.Optional)return null;if(e!==void 0)return e;bd(t,"Injector")}var Kb={},ds=Kb,Fl="__NG_DI_FLAG__",ga="ngTempTokenPath",Qb="ngTokenPath",Yb=/\n/gm,Jb="\u0275",Oy="__source",zr;function Zb(){return zr}function pn(t){let e=zr;return zr=t,e}function Xb(t,e=Z.Default){if(zr===void 0)throw new oe(-203,!1);return zr===null?bv(t,void 0,e):zr.get(t,e&Z.Optional?null:void 0,e)}function Ne(t,e=Z.Default){return(Tv()||Xb)(qe(t),e)}function X(t,e=Z.Default){return Ne(t,Ha(e))}function Ha(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ll(t){let e=[];for(let n=0;n<t.length;n++){let r=qe(t[n]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let i,s=Z.Default;for(let o=0;o<r.length;o++){let c=r[o],u=eC(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(Ne(i,s))}else e.push(Ne(r))}return e}function Cv(t,e){return t[Fl]=e,t.prototype[Fl]=e,t}function eC(t){return t[Fl]}function tC(t,e,n,r){let i=t[ga];throw e[Oy]&&i.unshift(e[Oy]),t.message=nC(`
`+t.message,i,n,r),t[Qb]=i,t[ga]=null,t}function nC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Jb?t.slice(2):t;let i=ze(e);if(Array.isArray(e))i=e.map(ze).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):ze(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Yb,`
  `)}`}var nt=Cv(yv("Optional"),8);var rC=Cv(yv("SkipSelf"),4);function Wr(t,e){let n=t.hasOwnProperty(pa);return n?t[pa]:null}function Cd(t,e){t.forEach(n=>Array.isArray(n)?Cd(n,e):e(n))}function Av(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ma(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function iC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function sC(t,e,n){let r=vs(t,e);return r>=0?t[r|1]=n:(r=~r,iC(t,r,e,n)),r}function wl(t,e){let n=vs(t,e);if(n>=0)return t[n|1]}function vs(t,e){return oC(t,e,1)}function oC(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Kr={},at=[],ya=new re(""),Sv=new re("",-1),Nv=new re(""),va=class{get(e,n=ds){if(n===ds){let r=new Error(`NullInjectorError: No provider for ${ze(e)}!`);throw r.name="NullInjectorError",r}return n}},Rv=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Rv||{}),hs=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(hs||{}),yn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(yn||{});function aC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Vl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];cC(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function xv(t){return t===3||t===4||t===6}function cC(t){return t.charCodeAt(0)===64}function fs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Fy(t,n,i,null,e[++r]):Fy(t,n,i,null,null))}}return t}function Fy(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Mv="ng-template";function uC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ad(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Ad(t){return t.type===4&&t.value!==Mv}function lC(t,e,n){let r=t.type===4&&!n?Mv:t.value;return e===r}function dC(t,e,n){let r=4,i=t.attrs,s=i!==null?pC(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!yt(r)&&!yt(u))return!1;if(o&&yt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!lC(t,u,n)||u===""&&e.length===1){if(yt(r))return!1;o=!0}}else if(r&8){if(i===null||!uC(t,i,u,n)){if(yt(r))return!1;o=!0}}else{let d=e[++c],f=hC(u,i,Ad(t),n);if(f===-1){if(yt(r))return!1;o=!0;continue}if(d!==""){let g;if(f>s?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(yt(r))return!1;o=!0}}}}return yt(r)||o}function yt(t){return(t&1)===0}function hC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return gC(e,t)}function fC(t,e,n=!1){for(let r=0;r<e.length;r++)if(dC(t,e[r],n))return!0;return!1}function pC(t){for(let e=0;e<t.length;e++){let n=t[e];if(xv(n))return e}return t.length}function gC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Ly(t,e){return t?":not("+e.trim()+")":e}function mC(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!yt(o)&&(e+=Ly(s,i),i=""),r=o,s=s||!yt(r);n++}return i!==""&&(e+=Ly(s,i)),e}function yC(t){return t.map(mC).join(",")}function vC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!yt(i))break;i=s}r++}return{attrs:e,classes:n}}function HU(t){return ys(()=>{let e=Lv(t),n=gt(pt({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Rv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||hs.Emulated,styles:t.styles||at,_:null,schemas:t.schemas||null,tView:null,id:""});Vv(n);let r=t.dependencies;return n.directiveDefs=jy(r,!1),n.pipeDefs=jy(r,!0),n.id=wC(n),n})}function _C(t){return vn(t)||kv(t)}function IC(t){return t!==null}function Pv(t){return ys(()=>({type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Vy(t,e){if(t==null)return Kr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=yn.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==yn.None?[r,c]:r,e[s]=o):n[s]=r}return n}function qa(t){return ys(()=>{let e=Lv(t);return Vv(e),e})}function vn(t){return t[$b]||null}function kv(t){return t[Hb]||null}function Ov(t){return t[qb]||null}function EC(t){let e=vn(t)||kv(t)||Ov(t);return e!==null?e.standalone:!1}function Fv(t,e){let n=t[zb]||null;if(!n&&e===!0)throw new Error(`Type ${ze(t)} does not have '\u0275mod' property.`);return n}function Lv(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Kr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vy(t.inputs,e),outputs:Vy(t.outputs),debugInfo:null}}function Vv(t){t.features?.forEach(e=>e(t))}function jy(t,e){if(!t)return null;let n=e?Ov:_C;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(IC)}function wC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ir(t){return{\u0275providers:t}}function DC(...t){return{\u0275providers:jv(!0,t),\u0275fromNgModule:!0}}function jv(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Cd(e,o=>{let c=o;jl(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Uv(i,s),n}function Uv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Sd(i,s=>{e(s,r)})}}function jl(t,e,n,r){if(t=qe(t),!t)return!1;let i=null,s=My(t),o=!s&&vn(t);if(!s&&!o){let u=t.ngModule;if(s=My(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of u)jl(d,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let d;try{Cd(s.imports,f=>{jl(f,e,n,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&Uv(d,e)}if(!c){let d=Wr(i)||(()=>new i);e({provide:i,useFactory:d,deps:at},i),e({provide:Nv,useValue:i,multi:!0},i),e({provide:ya,useValue:()=>Ne(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let d=t;Sd(u,f=>{e(f,d)})}}else return!1;return i!==t&&t.providers!==void 0}function Sd(t,e){for(let n of t)Dv(n)&&(n=n.\u0275providers),Array.isArray(n)?Sd(n,e):e(n)}var TC=de({provide:String,useValue:de});function Bv(t){return t!==null&&typeof t=="object"&&TC in t}function bC(t){return!!(t&&t.useExisting)}function CC(t){return!!(t&&t.useFactory)}function Qr(t){return typeof t=="function"}function AC(t){return!!t.useClass}var $v=new re(""),ca={},SC={},Dl;function Nd(){return Dl===void 0&&(Dl=new va),Dl}var _n=class{},ps=class extends _n{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bl(e,o=>this.processProvider(o)),this.records.set(Sv,Br(void 0,this)),i.has("environment")&&this.records.set(_n,Br(void 0,this));let s=this.records.get($v);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Nv,at,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=pn(this),r=ot(void 0),i;try{return e()}finally{pn(n),ot(r)}}get(e,n=ds,r=Z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ky))return e[ky](this);r=Ha(r);let i,s=pn(this),o=ot(void 0);try{if(!(r&Z.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=PC(e)&&Ba(e);d&&this.injectableDefInScope(d)?u=Br(Ul(e),ca):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&Z.Self?Nd():this.parent;return n=r&Z.Optional&&n===ds?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[ga]=c[ga]||[]).unshift(ze(e)),s)throw c;return tC(c,e,"R3InjectorError",this.source)}else throw c}finally{ot(o),pn(s)}}resolveInjectorInitializers(){let e=se(null),n=pn(this),r=ot(void 0),i;try{let s=this.get(ya,at,Z.Self);for(let o of s)o()}finally{pn(n),ot(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ze(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(e){e=qe(e);let n=Qr(e)?e:qe(e&&e.provide),r=RC(e);if(!Qr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Br(void 0,ca,!0),i.factory=()=>Ll(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=se(null);try{return n.value===ca&&(n.value=SC,n.value=n.factory()),typeof n.value=="object"&&n.value&&MC(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=qe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ul(t){let e=Ba(t),n=e!==null?e.factory:Wr(t);if(n!==null)return n;if(t instanceof re)throw new oe(204,!1);if(t instanceof Function)return NC(t);throw new oe(204,!1)}function NC(t){if(t.length>0)throw new oe(204,!1);let n=Ub(t);return n!==null?()=>n.factory(t):()=>new t}function RC(t){if(Bv(t))return Br(void 0,t.useValue);{let e=Hv(t);return Br(e,ca)}}function Hv(t,e,n){let r;if(Qr(t)){let i=qe(t);return Wr(i)||Ul(i)}else if(Bv(t))r=()=>qe(t.useValue);else if(CC(t))r=()=>t.useFactory(...Ll(t.deps||[]));else if(bC(t))r=()=>Ne(qe(t.useExisting));else{let i=qe(t&&(t.useClass||t.provide));if(xC(t))r=()=>new i(...Ll(t.deps));else return Wr(i)||Ul(i)}return r}function Br(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xC(t){return!!t.deps}function MC(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PC(t){return typeof t=="function"||typeof t=="object"&&t instanceof re}function Bl(t,e){for(let n of t)Array.isArray(n)?Bl(n,e):n&&Dv(n)?Bl(n.\u0275providers,e):e(n)}function qU(t,e){t instanceof ps&&t.assertNotDestroyed();let n,r=pn(t),i=ot(void 0);try{return e()}finally{pn(r),ot(i)}}function qv(){return Tv()!==void 0||Zb()!=null}function kC(t){if(!qv())throw new oe(-203,!1)}function OC(t){return typeof t=="function"}var Ht=0,ee=1,U=2,Ge=3,vt=4,It=5,_a=6,Ia=7,_t=8,Yr=9,At=10,De=11,gs=12,Uy=13,oi=14,St=15,Jr=16,$r=17,Zr=18,za=19,zv=20,gn=21,Tl=22,ct=23,In=25,Gv=1;var Jn=7,Ea=8,wa=9,ut=10,Da=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Da||{});function mn(t){return Array.isArray(t)&&typeof t[Gv]=="object"}function qt(t){return Array.isArray(t)&&t[Gv]===!0}function Wv(t){return(t.flags&4)!==0}function Ga(t){return t.componentOffset>-1}function Rd(t){return(t.flags&1)===1}function En(t){return!!t.template}function $l(t){return(t[U]&512)!==0}var Hl=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Kv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Qv(){return Yv}function Yv(t){return t.type.prototype.ngOnChanges&&(t.setInput=LC),FC}Qv.ngInherit=!0;function FC(){let t=Zv(this),e=t?.current;if(e){let n=t.previous;if(n===Kr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function LC(t,e,n,r,i){let s=this.declaredInputs[r],o=Zv(t)||VC(t,{previous:Kr,current:null}),c=o.current||(o.current={}),u=o.previous,d=u[s];c[s]=new Hl(d&&d.currentValue,n,u===Kr),Kv(t,e,i,n)}var Jv="__ngSimpleChanges__";function Zv(t){return t[Jv]||null}function VC(t,e){return t[Jv]=e}var By=null;var Tt=function(t,e,n){By?.(t,e,n)},Xv="svg",jC="math";function Nt(t){for(;Array.isArray(t);)t=t[Ht];return t}function e_(t,e){return Nt(e[t])}function lt(t,e){return Nt(e[t.index])}function t_(t,e){return t.data[e]}function Tn(t,e){let n=e[t];return mn(n)?n:n[Ht]}function xd(t){return(t[U]&128)===128}function UC(t){return qt(t[Ge])}function Ta(t,e){return e==null?null:t[e]}function n_(t){t[$r]=0}function r_(t){t[U]&1024||(t[U]|=1024,xd(t)&&Ka(t))}function BC(t,e){for(;t>0;)e=e[oi],t--;return e}function Wa(t){return!!(t[U]&9216||t[ct]?.dirty)}function ql(t){t[At].changeDetectionScheduler?.notify(8),t[U]&64&&(t[U]|=1024),Wa(t)&&Ka(t)}function Ka(t){t[At].changeDetectionScheduler?.notify(0);let e=Zn(t);for(;e!==null&&!(e[U]&8192||(e[U]|=8192,!xd(e)));)e=Zn(e)}function i_(t,e){if((t[U]&256)===256)throw new oe(911,!1);t[gn]===null&&(t[gn]=[]),t[gn].push(e)}function $C(t,e){if(t[gn]===null)return;let n=t[gn].indexOf(e);n!==-1&&t[gn].splice(n,1)}function Zn(t){let e=t[Ge];return qt(e)?e[Ge]:e}var K={lFrame:f_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var s_=!1;function HC(){return K.lFrame.elementDepthCount}function qC(){K.lFrame.elementDepthCount++}function zC(){K.lFrame.elementDepthCount--}function o_(){return K.bindingsEnabled}function GC(){return K.skipHydrationRootTNode!==null}function WC(t){return K.skipHydrationRootTNode===t}function KC(){K.skipHydrationRootTNode=null}function ue(){return K.lFrame.lView}function Ye(){return K.lFrame.tView}function zU(t){return K.lFrame.contextLView=t,t[_t]}function GU(t){return K.lFrame.contextLView=null,t}function We(){let t=a_();for(;t!==null&&t.type===64;)t=t.parent;return t}function a_(){return K.lFrame.currentTNode}function QC(){let t=K.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function _s(t,e){let n=K.lFrame;n.currentTNode=t,n.isParent=e}function c_(){return K.lFrame.isParent}function YC(){K.lFrame.isParent=!1}function u_(){return s_}function $y(t){s_=t}function Md(){let t=K.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JC(t){return K.lFrame.bindingIndex=t}function Qa(){return K.lFrame.bindingIndex++}function ZC(t){let e=K.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function XC(){return K.lFrame.inI18n}function e0(t,e){let n=K.lFrame;n.bindingIndex=n.bindingRootIndex=t,zl(e)}function t0(){return K.lFrame.currentDirectiveIndex}function zl(t){K.lFrame.currentDirectiveIndex=t}function n0(t){let e=K.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function l_(t){K.lFrame.currentQueryIndex=t}function r0(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[It]:null}function d_(t,e,n){if(n&Z.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&Z.Host);)if(i=r0(s),i===null||(s=s[oi],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=K.lFrame=h_();return r.currentTNode=e,r.lView=t,!0}function Pd(t){let e=h_(),n=t[ee];K.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function h_(){let t=K.lFrame,e=t===null?null:t.child;return e===null?f_(t):e}function f_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function p_(){let t=K.lFrame;return K.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var g_=p_;function kd(){let t=p_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function i0(t){return(K.lFrame.contextLView=BC(t,K.lFrame.contextLView))[_t]}function ai(){return K.lFrame.selectedIndex}function Xn(t){K.lFrame.selectedIndex=t}function Ya(){let t=K.lFrame;return t_(t.tView,t.selectedIndex)}function WU(){K.lFrame.currentNamespace=Xv}function s0(){return K.lFrame.currentNamespace}var m_=!0;function Od(){return m_}function Fd(t){m_=t}function o0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Yv(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Ld(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function ua(t,e,n){y_(t,e,3,n)}function la(t,e,n,r){(t[U]&3)===n&&y_(t,e,n,r)}function bl(t,e){let n=t[U];(n&3)===e&&(n&=16383,n+=1,t[U]=n)}function y_(t,e,n,r){let i=r!==void 0?t[$r]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[$r]+=65536),(c<s||s==-1)&&(a0(t,n,e,u),t[$r]=(t[$r]&4294901760)+u+2),u++}function Hy(t,e){Tt(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),Tt(5,t,e)}}function a0(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[U]>>14<t[$r]>>16&&(t[U]&3)===e&&(t[U]+=16384,Hy(c,s)):Hy(c,s)}var Gr=-1,er=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function c0(t){return t instanceof er}function u0(t){return(t.flags&8)!==0}function l0(t){return(t.flags&16)!==0}var Cl={},Gl=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ha(r);let i=this.injector.get(e,Cl,r);return i!==Cl||n===Cl?i:this.parentInjector.get(e,n,r)}};function v_(t){return t!==Gr}function ba(t){return t&32767}function d0(t){return t>>16}function Ca(t,e){let n=d0(t),r=e;for(;n>0;)r=r[oi],n--;return r}var Wl=!0;function qy(t){let e=Wl;return Wl=t,e}var h0=256,__=h0-1,I_=5,f0=0,bt={};function p0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ls)&&(r=n[ls]),r==null&&(r=n[ls]=f0++);let i=r&__,s=1<<i;e.data[t+(i>>I_)]|=s}function Aa(t,e){let n=E_(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,Al(r.data,t),Al(e,null),Al(r.blueprint,null));let i=Vd(t,e),s=t.injectorIndex;if(v_(i)){let o=ba(i),c=Ca(i,e),u=c[ee].data;for(let d=0;d<8;d++)e[s+d]=c[o+d]|u[o+d]}return e[s+8]=i,s}function Al(t,e){t.push(0,0,0,0,0,0,0,0,e)}function E_(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Vd(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=C_(i),r===null)return Gr;if(n++,i=i[oi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Gr}function Kl(t,e,n){p0(t,e,n)}function g0(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(xv(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function w_(t,e,n){if(n&Z.Optional||t!==void 0)return t;bd(e,"NodeInjector")}function D_(t,e,n,r){if(n&Z.Optional&&r===void 0&&(r=null),!(n&(Z.Self|Z.Host))){let i=t[Yr],s=ot(void 0);try{return i?i.get(e,r,n&Z.Optional):bv(e,r,n&Z.Optional)}finally{ot(s)}}return w_(r,e,n)}function T_(t,e,n,r=Z.Default,i){if(t!==null){if(e[U]&2048&&!(r&Z.Self)){let o=I0(t,e,n,r,bt);if(o!==bt)return o}let s=b_(t,e,n,r,bt);if(s!==bt)return s}return D_(e,n,r,i)}function b_(t,e,n,r,i){let s=v0(n);if(typeof s=="function"){if(!d_(e,t,r))return r&Z.Host?w_(i,n,r):D_(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&Z.Optional))bd(n);else return o}finally{g_()}}else if(typeof s=="number"){let o=null,c=E_(t,e),u=Gr,d=r&Z.Host?e[St][It]:null;for((c===-1||r&Z.SkipSelf)&&(u=c===-1?Vd(t,e):e[c+8],u===Gr||!Gy(r,!1)?c=-1:(o=e[ee],c=ba(u),e=Ca(u,e)));c!==-1;){let f=e[ee];if(zy(s,c,f.data)){let g=m0(c,e,n,o,r,d);if(g!==bt)return g}u=e[c+8],u!==Gr&&Gy(r,e[ee].data[c+8]===d)&&zy(s,c,e)?(o=f,c=ba(u),e=Ca(u,e)):c=-1}}return i}function m0(t,e,n,r,i,s){let o=e[ee],c=o.data[t+8],u=r==null?Ga(c)&&Wl:r!=o&&(c.type&3)!==0,d=i&Z.Host&&s===c,f=y0(c,o,n,u,d);return f!==null?Xr(e,o,f,c):bt}function y0(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,d=t.directiveEnd,f=s>>20,g=r?c:c+f,v=i?c+f:d;for(let I=g;I<v;I++){let S=o[I];if(I<u&&n===S||I>=u&&S.type===n)return I}if(i){let I=o[u];if(I&&En(I)&&I.type===n)return u}return null}function Xr(t,e,n,r){let i=t[n],s=e.data;if(c0(i)){let o=i;o.resolving&&Wb(Gb(s[n]));let c=qy(o.canSeeViewProviders);o.resolving=!0;let u,d=o.injectImpl?ot(o.injectImpl):null,f=d_(t,r,Z.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&o0(n,s[n],e)}finally{d!==null&&ot(d),qy(c),o.resolving=!1,g_()}}return i}function v0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ls)?t[ls]:void 0;return typeof e=="number"?e>=0?e&__:_0:e}function zy(t,e,n){let r=1<<t;return!!(n[e+(t>>I_)]&r)}function Gy(t,e){return!(t&Z.Self)&&!(t&Z.Host&&e)}var Yn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return T_(this._tNode,this._lView,e,Ha(r),n)}};function _0(){return new Yn(We(),ue())}function KU(t){return ys(()=>{let e=t.prototype.constructor,n=e[pa]||Ql(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[pa]||Ql(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ql(t){return _v(t)?()=>{let e=Ql(qe(t));return e&&e()}:Wr(t)}function I0(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[U]&2048&&!(o[U]&512);){let c=b_(s,o,n,r|Z.Self,bt);if(c!==bt)return c;let u=s.parent;if(!u){let d=o[zv];if(d){let f=d.get(n,bt,r);if(f!==bt)return f}u=C_(o),o=o[oi]}s=u}return i}function C_(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[It]:null}function E0(t){return g0(We(),t)}function Wy(t,e=null,n=null,r){let i=A_(t,e,n,r);return i.resolveInjectorInitializers(),i}function A_(t,e=null,n=null,r,i=new Set){let s=[n||at,DC(t)];return r=r||(typeof t=="object"?void 0:ze(t)),new ps(s,e||Nd(),r||null,i)}var tt=class t{static{this.THROW_IF_NOT_FOUND=ds}static{this.NULL=new va}static create(e,n){if(Array.isArray(e))return Wy({name:""},n,e,"");{let r=e.name??"";return Wy({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=fe({token:t,providedIn:"any",factory:()=>Ne(Sv)})}static{this.__NG_ELEMENT_ID__=-1}};var w0=new re("");w0.__NG_ELEMENT_ID__=t=>{let e=We();if(e===null)throw new oe(204,!1);if(e.type&2)return e.value;if(t&Z.Optional)return null;throw new oe(204,!1)};var D0="ngOriginalError";function Sl(t){return t[D0]}var S_=!0,jd=(()=>{class t{static{this.__NG_ELEMENT_ID__=T0}static{this.__NG_ENV_ID__=n=>n}}return t})(),Yl=class extends jd{constructor(e){super(),this._lView=e}onDestroy(e){return i_(this._lView,e),()=>$C(this._lView,e)}};function T0(){return new Yl(ue())}var Ja=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new is(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Jl=class extends ln{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,qv()&&(this.destroyRef=X(jd,{optional:!0})??void 0,this.pendingTasks=X(Ja,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Ee&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ct=Jl;function Sa(...t){}function N_(t){let e,n;function r(){t=Sa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Ky(t){return queueMicrotask(()=>t()),()=>{t=Sa}}var Ud="isAngularZone",Na=Ud+"_ID",b0=0,_e=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ct(!1),this.onMicrotaskEmpty=new Ct(!1),this.onStable=new Ct(!1),this.onError=new Ct(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=S_}=e;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,S0(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ud)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new oe(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,C0,Sa,Sa);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},C0={};function Bd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function A0(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){N_(()=>{t.callbackScheduled=!1,Zl(t),t.isCheckStableRunning=!0,Bd(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Zl(t)}function S0(t){let e=()=>{A0(t)},n=b0++;t._inner=t._inner.fork({name:"angular",properties:{[Ud]:!0,[Na]:n,[Na+n]:!0},onInvokeTask:(r,i,s,o,c,u)=>{if(N0(u))return r.invokeTask(s,o,c,u);try{return Qy(t),r.invokeTask(s,o,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Yy(t)}},onInvoke:(r,i,s,o,c,u,d)=>{try{return Qy(t),r.invoke(s,o,c,u,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!R0(u)&&e(),Yy(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Zl(t),Bd(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Zl(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Qy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Yy(t){t._nesting--,Bd(t)}var Xl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ct,this.onMicrotaskEmpty=new Ct,this.onStable=new Ct,this.onError=new Ct}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function N0(t){return R_(t,"__ignore_ng_zone__")}function R0(t){return R_(t,"__scheduler_tick__")}function R_(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ei=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Sl(e);for(;n&&Sl(n);)n=Sl(n);return n||null}},x0=new re("",{providedIn:"root",factory:()=>{let t=X(_e),e=X(ei);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function M0(){return Za(We(),ue())}function Za(t,e){return new Xa(lt(t,e))}var Xa=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=M0}}return t})();function x_(t){return(t.flags&128)===128}var M_=new Map,P0=0;function k0(){return P0++}function O0(t){M_.set(t[za],t)}function ed(t){M_.delete(t[za])}var Jy="__ngContext__";function tr(t,e){mn(e)?(t[Jy]=e[za],O0(e)):t[Jy]=e}function P_(t){return O_(t[gs])}function k_(t){return O_(t[vt])}function O_(t){for(;t!==null&&!qt(t);)t=t[vt];return t}var td;function QU(t){td=t}function F0(){if(td!==void 0)return td;if(typeof document<"u")return document;throw new oe(210,!1)}var YU=new re("",{providedIn:"root",factory:()=>L0}),L0="ng",V0=new re(""),Is=new re("",{providedIn:"platform",factory:()=>"unknown"});var JU=new re("",{providedIn:"root",factory:()=>F0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var j0="h",U0="b";var B0=()=>null;function $d(t,e,n=!1){return B0(t,e,n)}var F_=!1,$0=new re("",{providedIn:"root",factory:()=>F_});var ra;function H0(){if(ra===void 0&&(ra=null,fa.trustedTypes))try{ra=fa.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ra}function q0(t){return H0()?.createScriptURL(t)||t}var ia;function z0(){if(ia===void 0&&(ia=null,fa.trustedTypes))try{ia=fa.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ia}function Zy(t){return z0()?.createScriptURL(t)||t}var Ra=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gv})`}};function ec(t){return t instanceof Ra?t.changingThisBreaksApplicationSecurity:t}function L_(t,e){let n=G0(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${gv})`)}return n===e}function G0(t){return t instanceof Ra&&t.getTypeName()||null}var W0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function K0(t){return t=String(t),t.match(W0)?t:"unsafe:"+t}var Hd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Hd||{});function Q0(t){let e=V_();return e?e.sanitize(Hd.URL,t)||"":L_(t,"URL")?ec(t):K0($a(t))}function Y0(t){let e=V_();if(e)return Zy(e.sanitize(Hd.RESOURCE_URL,t)||"");if(L_(t,"ResourceURL"))return Zy(ec(t));throw new oe(904,!1)}function ZU(t){return q0(t[0])}function J0(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?Y0:Q0}function XU(t,e,n){return J0(e,n)(t)}function V_(){let t=ue();return t&&t[At].sanitizer}function j_(t){return t instanceof Function?t():t}function Z0(t){return(t??X(tt)).get(Is)==="browser"}var xa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(xa||{}),X0;function qd(t,e){return X0(t,e)}function Hr(t,e,n,r,i){if(r!=null){let s,o=!1;qt(r)?s=r:mn(r)&&(o=!0,r=r[Ht]);let c=Nt(r);t===0&&n!==null?i==null?q_(e,n,c):Ma(e,n,c,i||null,!0):t===1&&n!==null?Ma(e,n,c,i||null,!0):t===2?pA(e,c,o):t===3&&e.destroyNode(c),s!=null&&mA(e,t,s,n,i)}}function eA(t,e){return t.createText(e)}function tA(t,e,n){t.setValue(e,n)}function U_(t,e,n){return t.createElement(e,n)}function nA(t,e){B_(t,e),e[Ht]=null,e[It]=null}function rA(t,e,n,r,i,s){r[Ht]=i,r[It]=e,tc(t,r,n,1,i,s)}function B_(t,e){e[At].changeDetectionScheduler?.notify(9),tc(t,e,e[De],2,null,null)}function iA(t){let e=t[gs];if(!e)return Nl(t[ee],t);for(;e;){let n=null;if(mn(e))n=e[gs];else{let r=e[ut];r&&(n=r)}if(!n){for(;e&&!e[vt]&&e!==t;)mn(e)&&Nl(e[ee],e),e=e[Ge];e===null&&(e=t),mn(e)&&Nl(e[ee],e),n=e&&e[vt]}e=n}}function sA(t,e,n,r){let i=ut+r,s=n.length;r>0&&(n[i-1][vt]=e),r<s-ut?(e[vt]=n[i],Av(n,ut+r,e)):(n.push(e),e[vt]=null),e[Ge]=n;let o=e[Jr];o!==null&&n!==o&&$_(o,e);let c=e[Zr];c!==null&&c.insertView(t),ql(e),e[U]|=128}function $_(t,e){let n=t[wa],r=e[Ge];if(mn(r))t[U]|=Da.HasTransplantedViews;else{let i=r[Ge][St];e[St]!==i&&(t[U]|=Da.HasTransplantedViews)}n===null?t[wa]=[e]:n.push(e)}function zd(t,e){let n=t[wa],r=n.indexOf(e);n.splice(r,1)}function nd(t,e){if(t.length<=ut)return;let n=ut+e,r=t[n];if(r){let i=r[Jr];i!==null&&i!==t&&zd(i,r),e>0&&(t[n-1][vt]=r[vt]);let s=ma(t,ut+e);nA(r[ee],r);let o=s[Zr];o!==null&&o.detachView(s[ee]),r[Ge]=null,r[vt]=null,r[U]&=-129}return r}function H_(t,e){if(!(e[U]&256)){let n=e[De];n.destroyNode&&tc(t,e,n,3,null,null),iA(e)}}function Nl(t,e){if(e[U]&256)return;let n=se(null);try{e[U]&=-129,e[U]|=256,e[ct]&&il(e[ct]),aA(t,e),oA(t,e),e[ee].type===1&&e[De].destroy();let r=e[Jr];if(r!==null&&qt(e[Ge])){r!==e[Ge]&&zd(r,e);let i=e[Zr];i!==null&&i.detachView(t)}ed(e)}finally{se(n)}}function oA(t,e){let n=t.cleanup,r=e[Ia];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ia]=null);let i=e[gn];if(i!==null){e[gn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function aA(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof er)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];Tt(4,c,u);try{u.call(c)}finally{Tt(5,c,u)}}else{Tt(4,i,s);try{s.call(i)}finally{Tt(5,i,s)}}}}}function cA(t,e,n){return uA(t,e.parent,n)}function uA(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ht];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===hs.None||s===hs.Emulated)return null}return lt(r,n)}}function Ma(t,e,n,r,i){t.insertBefore(e,n,r,i)}function q_(t,e,n){t.appendChild(e,n)}function Xy(t,e,n,r,i){r!==null?Ma(t,e,n,r,i):q_(t,e,n)}function z_(t,e){return t.parentNode(e)}function lA(t,e){return t.nextSibling(e)}function dA(t,e,n){return fA(t,e,n)}function hA(t,e,n){return t.type&40?lt(t,n):null}var fA=hA,ev;function Gd(t,e,n,r){let i=cA(t,r,e),s=e[De],o=r.parent||e[It],c=dA(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Xy(s,i,n[u],c,!1);else Xy(s,i,n,c,!1);ev!==void 0&&ev(s,r,e,n,i)}function us(t,e){if(e!==null){let n=e.type;if(n&3)return lt(e,t);if(n&4)return rd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return us(t,r);{let i=t[e.index];return qt(i)?rd(-1,i):Nt(i)}}else{if(n&128)return us(t,e.next);if(n&32)return qd(e,t)()||Nt(t[e.index]);{let r=G_(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zn(t[St]);return us(i,r)}else return us(t,e.next)}}}return null}function G_(t,e){if(e!==null){let r=t[St][It],i=e.projection;return r.projection[i]}return null}function rd(t,e){let n=ut+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return us(r,i)}return e[Jn]}function pA(t,e,n){t.removeChild(null,e,n)}function Wd(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(o&&e===0&&(c&&tr(Nt(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Wd(t,e,n.child,r,i,s,!1),Hr(e,t,i,c,s);else if(u&32){let d=qd(n,r),f;for(;f=d();)Hr(e,t,i,f,s);Hr(e,t,i,c,s)}else u&16?gA(t,e,r,n,i,s):Hr(e,t,i,c,s);n=o?n.projectionNext:n.next}}function tc(t,e,n,r,i,s){Wd(n,r,t.firstChild,e,i,s,!1)}function gA(t,e,n,r,i,s){let o=n[St],u=o[It].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];Hr(e,t,i,f,s)}else{let d=u,f=o[Ge];x_(r)&&(d.flags|=128),Wd(t,e,d,f,i,s,!0)}}function mA(t,e,n,r,i){let s=n[Jn],o=Nt(n);s!==o&&Hr(e,t,r,s,i);for(let c=ut;c<n.length;c++){let u=n[c];tc(u[ee],u,t,e,r,s)}}function yA(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:xa.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=xa.Important),t.setStyle(n,r,i,s))}}function vA(t,e,n){t.setAttribute(e,"style",n)}function W_(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function K_(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Vl(t,e,r),i!==null&&W_(t,e,i),s!==null&&vA(t,e,s)}var zt={};function eB(t=1){Q_(Ye(),ue(),ai()+t,!1)}function Q_(t,e,n,r){if(!r)if((e[U]&3)===3){let s=t.preOrderCheckHooks;s!==null&&ua(e,s,n)}else{let s=t.preOrderHooks;s!==null&&la(e,s,0,n)}Xn(n)}function Et(t,e=Z.Default){let n=ue();if(n===null)return Ne(t,e);let r=We();return T_(r,n,qe(t),e)}function tB(){let t="invalid";throw new Error(t)}function Y_(t,e,n,r,i,s){let o=se(null);try{let c=null;i&yn.SignalBased&&(c=e[r][Bt]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&yn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):Kv(e,c,r,s)}finally{se(o)}}function _A(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Xn(~i);else{let s=i,o=n[++r],c=n[++r];e0(o,s);let u=e[s];c(2,u)}}}finally{Xn(-1)}}function nc(t,e,n,r,i,s,o,c,u,d,f){let g=e.blueprint.slice();return g[Ht]=i,g[U]=r|4|128|8|64,(d!==null||t&&t[U]&2048)&&(g[U]|=2048),n_(g),g[Ge]=g[oi]=t,g[_t]=n,g[At]=o||t&&t[At],g[De]=c||t&&t[De],g[Yr]=u||t&&t[Yr]||null,g[It]=s,g[za]=k0(),g[_a]=f,g[zv]=d,g[St]=e.type==2?t[St]:g,g}function rc(t,e,n,r,i){let s=t.data[e];if(s===null)s=IA(t,e,n,r,i),XC()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=QC();s.injectorIndex=o===null?-1:o.injectorIndex}return _s(s,!0),s}function IA(t,e,n,r,i){let s=a_(),o=c_(),c=o?s:s&&s.parent,u=t.data[e]=bA(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function J_(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Z_(t,e,n,r,i){let s=ai(),o=r&2;try{Xn(-1),o&&e.length>In&&Q_(t,e,In,!1),Tt(o?2:0,i),n(r,i)}finally{Xn(s),Tt(o?3:1,i)}}function X_(t,e,n){if(Wv(e)){let r=se(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{se(r)}}}function eI(t,e,n){o_()&&(xA(t,e,n,lt(n,e)),(n.flags&64)===64&&sI(t,e,n))}function tI(t,e,n=lt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function nI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Kd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Kd(t,e,n,r,i,s,o,c,u,d,f){let g=In+r,v=g+i,I=EA(g,v),S=typeof d=="function"?d():d;return I[ee]={type:t,blueprint:I,template:n,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function EA(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:zt);return n}function wA(t,e,n,r){let s=r.get($0,F_)||n===hs.ShadowDom,o=t.selectRootElement(e,s);return DA(o),o}function DA(t){TA(t)}var TA=()=>null;function bA(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return GC()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function tv(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=yn.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}t===0?nv(r,n,d,c,u):nv(r,n,d,c)}return r}function nv(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function CA(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,d=null;for(let f=r;f<i;f++){let g=s[f],v=n?n.get(g):null,I=v?v.inputs:null,S=v?v.outputs:null;u=tv(0,g.inputs,f,u,I),d=tv(1,g.outputs,f,d,S);let x=u!==null&&o!==null&&!Ad(e)?$A(u,f,o):null;c.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=d}function AA(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Qd(t,e,n,r,i,s,o,c){let u=lt(e,n),d=e.inputs,f;!c&&d!=null&&(f=d[r])?(Yd(t,n,f,r,i),Ga(e)&&SA(n,e.index)):e.type&3?(r=AA(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function SA(t,e){let n=Tn(e,t);n[U]&16||(n[U]|=64)}function rI(t,e,n,r){if(o_()){let i=r===null?null:{"":-1},s=PA(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&iI(t,e,n,o,i,c),i&&kA(n,r,i)}n.mergedAttrs=fs(n.mergedAttrs,n.attrs)}function iI(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Kl(Aa(n,e),t,r[d].type);FA(n,t.data.length,r.length);for(let d=0;d<r.length;d++){let f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=J_(t,e,r.length,null);for(let d=0;d<r.length;d++){let f=r[d];n.mergedAttrs=fs(n.mergedAttrs,f.hostAttrs),LA(t,n,e,u,f),OA(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}CA(t,n,s)}function NA(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;RA(o)!=c&&o.push(c),o.push(n,r,s)}}function RA(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function xA(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Ga(n)&&VA(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Aa(n,e),tr(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],d=Xr(e,t,c,n);if(tr(d,e),o!==null&&BA(e,c-i,d,u,n,o),En(u)){let f=Tn(n.index,e);f[_t]=Xr(e,t,c,n)}}}function sI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=t0();try{Xn(s);for(let c=r;c<i;c++){let u=t.data[c],d=e[c];zl(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&MA(u,d)}}finally{Xn(-1),zl(o)}}function MA(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function PA(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(fC(e,o.selectors,!1))if(r||(r=[]),En(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;id(t,e,u)}else r.unshift(o),id(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function id(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function kA(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new oe(-301,!1);r.push(e[i],s)}}}function OA(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;En(e)&&(n[""]=t)}}function FA(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function LA(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Wr(i.type,!0)),o=new er(s,En(i),Et);t.blueprint[r]=o,n[r]=o,NA(t,e,r,J_(t,n,i.hostVars,zt),i)}function VA(t,e,n){let r=lt(e,t),i=nI(n),s=t[At].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=ic(t,nc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function jA(t,e,n,r,i,s){let o=lt(t,e);UA(e[De],o,s,t.value,n,r,i)}function UA(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?$a(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function BA(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],d=o[c++],f=o[c++],g=o[c++];Y_(r,n,u,d,f,g)}}function $A(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function oI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function aI(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];l_(s),c.contentQueries(2,e[o],o)}}}finally{se(r)}}}function ic(t,e){return t[gs]?t[Uy][vt]=e:t[gs]=e,t[Uy]=e,e}function sd(t,e,n){l_(0);let r=se(null);try{e(t,n)}finally{se(r)}}function HA(t){return t[Ia]??=[]}function qA(t){return t.cleanup??=[]}function cI(t,e){let n=t[Yr],r=n?n.get(ei,null):null;r&&r.handleError(e)}function Yd(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],d=e[o],f=t.data[o];Y_(f,d,r,c,u,i)}}function zA(t,e,n){let r=e_(e,t);tA(t[De],r,n)}function GA(t,e){let n=Tn(e,t),r=n[ee];WA(r,n);let i=n[Ht];i!==null&&n[_a]===null&&(n[_a]=$d(i,n[Yr])),Jd(r,n,n[_t])}function WA(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Jd(t,e,n){Pd(e);try{let r=t.viewQuery;r!==null&&sd(1,r,n);let i=t.template;i!==null&&Z_(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Zr]?.finishViewCreation(t),t.staticContentQueries&&aI(t,e),t.staticViewQueries&&sd(2,t.viewQuery,n);let s=t.components;s!==null&&KA(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[U]&=-5,kd()}}function KA(t,e){for(let n=0;n<e.length;n++)GA(t,e[n])}function QA(t,e,n,r){let i=se(null);try{let s=e.tView,c=t[U]&4096?4096:16,u=nc(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=t[e.index];u[Jr]=d;let f=t[Zr];return f!==null&&(u[Zr]=f.createEmbeddedView(s)),Jd(s,u,n),u}finally{se(i)}}function rv(t,e){return!e||e.firstChild===null||x_(t)}function YA(t,e,n,r=!0){let i=e[ee];if(sA(i,e,t,n),r){let o=rd(n,t),c=e[De],u=z_(c,t[Jn]);u!==null&&rA(i,t[It],c,e,u,o)}let s=e[_a];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Pa(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Nt(s)),qt(s)&&JA(s,r);let o=n.type;if(o&8)Pa(t,e,n.child,r);else if(o&32){let c=qd(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=G_(e,n);if(Array.isArray(c))r.push(...c);else{let u=Zn(e[St]);Pa(u[ee],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function JA(t,e){for(let n=ut;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Pa(r[ee],r,i,e)}t[Jn]!==t[Ht]&&e.push(t[Jn])}var uI=[];function ZA(t){return t[ct]??XA(t)}function XA(t){let e=uI.pop()??Object.create(tS);return e.lView=t,e}function eS(t){t.lView[ct]!==t&&(t.lView=null,uI.push(t))}var tS=gt(pt({},ns),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ka(t.lView)},consumerOnSignalRead(){this.lView[ct]=this}});function nS(t){let e=t[ct]??Object.create(rS);return e.lView=t,e}var rS=gt(pt({},ns),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Zn(t.lView);for(;e&&!lI(e[ee]);)e=Zn(e);e&&r_(e)},consumerOnSignalRead(){this.lView[ct]=this}});function lI(t){return t.type!==2}var iS=100;function dI(t,e=!0,n=0){let r=t[At],i=r.rendererFactory,s=!1;s||i.begin?.();try{sS(t,n)}catch(o){throw e&&cI(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function sS(t,e){let n=u_();try{$y(!0),od(t,e);let r=0;for(;Wa(t);){if(r===iS)throw new oe(103,!1);r++,od(t,1)}}finally{$y(n)}}function oS(t,e,n,r){let i=e[U];if((i&256)===256)return;let s=!1,o=!1;!s&&e[At].inlineEffectRunner?.flush(),Pd(e);let c=!0,u=null,d=null;s||(lI(t)?(d=ZA(e),u=So(d)):Bm()===null?(c=!1,d=nS(e),u=So(d)):e[ct]&&(il(e[ct]),e[ct]=null));try{n_(e),JC(t.bindingStartIndex),n!==null&&Z_(t,e,n,2,r);let f=(i&3)===3;if(!s)if(f){let I=t.preOrderCheckHooks;I!==null&&ua(e,I,null)}else{let I=t.preOrderHooks;I!==null&&la(e,I,0,null),bl(e,0)}if(o||aS(e),hI(e,0),t.contentQueries!==null&&aI(t,e),!s)if(f){let I=t.contentCheckHooks;I!==null&&ua(e,I)}else{let I=t.contentHooks;I!==null&&la(e,I,1),bl(e,1)}_A(t,e);let g=t.components;g!==null&&pI(e,g,0);let v=t.viewQuery;if(v!==null&&sd(2,v,r),!s)if(f){let I=t.viewCheckHooks;I!==null&&ua(e,I)}else{let I=t.viewHooks;I!==null&&la(e,I,2),bl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Tl]){for(let I of e[Tl])I();e[Tl]=null}s||(e[U]&=-73)}catch(f){throw s||Ka(e),f}finally{d!==null&&(nl(d,u),c&&eS(d)),kd()}}function hI(t,e){for(let n=P_(t);n!==null;n=k_(n))for(let r=ut;r<n.length;r++){let i=n[r];fI(i,e)}}function aS(t){for(let e=P_(t);e!==null;e=k_(e)){if(!(e[U]&Da.HasTransplantedViews))continue;let n=e[wa];for(let r=0;r<n.length;r++){let i=n[r];r_(i)}}}function cS(t,e,n){let r=Tn(e,t);fI(r,n)}function fI(t,e){xd(t)&&od(t,e)}function od(t,e){let r=t[ee],i=t[U],s=t[ct],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&rl(s)),o||=!1,s&&(s.dirty=!1),t[U]&=-9217,o)oS(r,t,r.template,t[_t]);else if(i&8192){hI(t,1);let c=r.components;c!==null&&pI(t,c,1)}}function pI(t,e,n){for(let r=0;r<e.length;r++)cS(t,e[r],n)}function Zd(t,e){let n=u_()?64:1088;for(t[At].changeDetectionScheduler?.notify(e);t;){t[U]|=n;let r=Zn(t);if($l(t)&&!r)return t;t=r}return null}var nr=class{get rootNodes(){let e=this._lView,n=e[ee];return Pa(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_t]}set context(e){this._lView[_t]=e}get destroyed(){return(this._lView[U]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ge];if(qt(e)){let n=e[Ea],r=n?n.indexOf(this):-1;r>-1&&(nd(e,r),ma(n,r))}this._attachedToViewContainer=!1}H_(this._lView[ee],this._lView)}onDestroy(e){i_(this._lView,e)}markForCheck(){Zd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[U]&=-129}reattach(){ql(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,dI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=$l(this._lView),n=this._lView[Jr];n!==null&&!e&&zd(n,this._lView),B_(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let n=$l(this._lView),r=this._lView[Jr];r!==null&&!n&&$_(r,this._lView),ql(this._lView)}},sc=(()=>{class t{static{this.__NG_ELEMENT_ID__=dS}}return t})(),uS=sc,lS=class extends uS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=QA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new nr(i)}};function dS(){return hS(We(),ue())}function hS(t,e){return t.type&4?new lS(e,t,Za(t,e)):null}var rB=new RegExp(`^(\\d+)*(${U0}|${j0})*(.*)`);var fS=()=>null;function iv(t,e){return fS(t,e)}var ti=class{},Xd=new re("",{providedIn:"root",factory:()=>!1});var gI=new re(""),mI=new re(""),ad=class{},ka=class{};function pS(t){let e=Error(`No component factory found for ${ze(t)}.`);return e[gS]=t,e}var gS="ngComponent";var cd=class{resolveComponentFactory(e){throw pS(e)}},ni=class{static{this.NULL=new cd}},Oa=class{},eh=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>mS()}}return t})();function mS(){let t=ue(),e=We(),n=Tn(e.index,t);return(mn(n)?n:t)[De]}var yS=(()=>{class t{static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>null})}}return t})();function ud(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=Ry(i,c);else if(s==2){let u=c,d=e[++o];r=Ry(r,u+": "+d+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Fa=class extends ni{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vn(e);return new ri(n,this.ngModule)}};function sv(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,c=s?i[1]:yn.None;e?n.push({propName:o,templateName:r,isSignal:(c&yn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function vS(t){let e=t.toLowerCase();return e==="svg"?Xv:e==="math"?jC:null}var ri=class extends ka{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=sv(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return sv(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=yC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=se(null);try{i=i||this.ngModule;let o=i instanceof _n?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new Gl(e,o):e,u=c.get(Oa,null);if(u===null)throw new oe(407,!1);let d=c.get(yS,null),f=c.get(ti,null),g={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,changeDetectionScheduler:f},v=u.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",S=r?wA(v,r,this.componentDef.encapsulation,c):U_(v,I,vS(I)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let R=null;S!==null&&(R=$d(S,c,!0));let O=Kd(0,null,null,1,0,null,null,null,null,null,null),V=nc(null,O,null,x,null,null,g,v,c,null,R);Pd(V);let $,Q,ye=null;try{let q=this.componentDef,D,m=null;q.findHostDirectiveDefs?(D=[],m=new Map,q.findHostDirectiveDefs(q,D,m),D.push(q)):D=[q];let y=_S(V,S);ye=IS(y,S,q,D,V,g,v),Q=t_(O,In),S&&DS(v,q,S,r),n!==void 0&&TS(Q,this.ngContentSelectors,n),$=wS(ye,q,D,m,V,[bS]),Jd(O,V,null)}catch(q){throw ye!==null&&ed(ye),ed(V),q}finally{kd()}return new ld(this.componentType,$,Za(Q,V),V,Q)}finally{se(s)}}},ld=class extends ad{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new nr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Yd(s[ee],s,i,e,n),this.previousInputValues.set(e,n);let o=Tn(this._tNode.index,s);Zd(o,1)}}get injector(){return new Yn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _S(t,e){let n=t[ee],r=In;return t[r]=e,rc(n,r,2,"#host",null)}function IS(t,e,n,r,i,s,o){let c=i[ee];ES(r,t,e,o);let u=null;e!==null&&(u=$d(e,i[Yr]));let d=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let g=nc(i,nI(n),null,f,i[t.index],t,s,d,null,null,u);return c.firstCreatePass&&id(c,t,r.length-1),ic(i,g),i[t.index]=g}function ES(t,e,n,r){for(let i of t)e.mergedAttrs=fs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ud(e,e.mergedAttrs,!0),n!==null&&K_(r,n,e))}function wS(t,e,n,r,i,s){let o=We(),c=i[ee],u=lt(o,i);iI(c,i,o,n,null,r);for(let f=0;f<n.length;f++){let g=o.directiveStart+f,v=Xr(i,c,g,o);tr(v,i)}sI(c,i,o),u&&tr(u,i);let d=Xr(i,c,o.directiveStart+o.componentOffset,o);if(t[_t]=i[_t]=d,s!==null)for(let f of s)f(d,e);return X_(c,o,i),d}function DS(t,e,n,r){if(r)Vl(t,n,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=vC(e.selectors[0]);i&&Vl(t,n,i),s&&s.length>0&&W_(t,n,s.join(" "))}}function TS(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function bS(){let t=We();Ld(ue()[ee],t)}var oc=(()=>{class t{static{this.__NG_ELEMENT_ID__=CS}}return t})();function CS(){let t=We();return SS(t,ue())}var AS=oc,yI=class extends AS{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Za(this._hostTNode,this._hostLView)}get injector(){return new Yn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vd(this._hostTNode,this._hostLView);if(v_(e)){let n=Ca(e,this._hostLView),r=ba(e),i=n[ee].data[r+8];return new Yn(i,n)}else return new Yn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ov(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ut}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=iv(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,rv(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!OC(e),c;if(o)c=n;else{let S=n||{};c=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new ri(vn(e)),d=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?d:this.parentInjector).get(_n,null);x&&(s=x)}let f=vn(u.componentType??{}),g=iv(this._lContainer,f?.id??null),v=g?.firstChild??null,I=u.create(d,i,v,s);return this.insertImpl(I.hostView,c,rv(this._hostTNode,g)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(UC(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Ge],d=new yI(u,u[It],u[Ge]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return YA(o,i,s,r),e.attachToViewContainerRef(),Av(Rl(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ov(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=nd(this._lContainer,n);r&&(ma(Rl(this._lContainer),n),H_(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=nd(this._lContainer,n);return r&&ma(Rl(this._lContainer),n)!=null?new nr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function ov(t){return t[Ea]}function Rl(t){return t[Ea]||(t[Ea]=[])}function SS(t,e){let n,r=e[t.index];return qt(r)?n=r:(n=oI(r,e,null,t),e[t.index]=n,ic(e,n)),RS(n,e,t,r),new yI(n,t,e)}function NS(t,e){let n=t[De],r=n.createComment(""),i=lt(e,t),s=z_(n,i);return Ma(n,s,r,lA(n,i),!1),r}var RS=PS,xS=()=>!1;function MS(t,e,n){return xS(t,e,n)}function PS(t,e,n,r){if(t[Jn])return;let i;n.type&8?i=Nt(r):i=NS(e,n),t[Jn]=i}var av=new Set;function ci(t){av.has(t)||(av.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function kS(t){return typeof t=="function"&&t[Bt]!==void 0}function sB(t,e){ci("NgSignals");let n=Zm(t),r=n[Bt];return e?.equal&&(r.equal=e.equal),n.set=i=>sl(r,i),n.update=i=>Xm(r,i),n.asReadonly=OS.bind(n),n}function OS(){let t=this[Bt];if(t.readonlyFn===void 0){let e=()=>this();e[Bt]=t,t.readonlyFn=e}return t.readonlyFn}function vI(t){return kS(t)&&typeof t.set=="function"}function FS(t){return Object.getPrototypeOf(t.prototype).constructor}function LS(t){let e=FS(t.type),n=!0,r=[t];for(;e;){let i;if(En(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=sa(t.inputs),o.inputTransforms=sa(t.inputTransforms),o.declaredInputs=sa(t.declaredInputs),o.outputs=sa(t.outputs);let c=i.hostBindings;c&&$S(t,c);let u=i.viewQuery,d=i.contentQueries;if(u&&US(t,u),d&&BS(t,d),VS(t,i),Vb(t.outputs,i.outputs),En(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===LS&&(n=!1)}}e=Object.getPrototypeOf(e)}jS(r)}function VS(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function jS(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fs(i.hostAttrs,n=fs(n,i.hostAttrs))}}function sa(t){return t===Kr?{}:t===at?[]:t}function US(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function BS(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function $S(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function HS(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var wn=class{},dd=class{};var hd=class extends wn{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fa(this);let s=Fv(e);this._bootstrapComponents=j_(s.bootstrap),this._r3Injector=A_(e,n,[{provide:wn,useValue:this},{provide:ni,useValue:this.componentFactoryResolver},...r],ze(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fd=class extends dd{constructor(e){super(),this.moduleType=e}create(e){return new hd(this.moduleType,e,[])}};var La=class extends wn{constructor(e){super(),this.componentFactoryResolver=new Fa(this),this.instance=null;let n=new ps([...e.providers,{provide:wn,useValue:this},{provide:ni,useValue:this.componentFactoryResolver}],e.parent||Nd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function qS(t,e,n=null){return new La({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function _I(t){return GS(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function zS(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function GS(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function th(t,e,n){return t[e]=n}function WS(t,e){return t[e]}function Dn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function KS(t,e,n,r){let i=Dn(t,e,n);return Dn(t,e+1,r)||i}function QS(t){return(t.flags&32)===32}function YS(t,e,n,r,i,s,o,c,u){let d=e.consts,f=rc(e,t,4,o||null,c||null);rI(e,n,f,Ta(d,u)),Ld(e,f);let g=f.tView=Kd(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function JS(t,e,n,r,i,s,o,c,u,d){let f=n+In,g=e.firstCreatePass?YS(f,e,t,r,i,s,o,c,u):e.data[f];_s(g,!1);let v=XS(e,t,g,n);Od()&&Gd(e,t,v,g),tr(v,t);let I=oI(v,t,v,g);return t[f]=I,ic(t,I),MS(I,g,t),Rd(g)&&eI(e,t,g),u!=null&&tI(t,g,d),g}function ZS(t,e,n,r,i,s,o,c){let u=ue(),d=Ye(),f=Ta(d.consts,s);return JS(u,d,t,e,n,r,i,f,o,c),ZS}var XS=eN;function eN(t,e,n,r){return Fd(!0),e[De].createComment("")}var qr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(qr||{}),II=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}}return t})(),pd=class t{constructor(){this.ngZone=X(_e),this.scheduler=X(ti),this.errorHandler=X(ei,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[qr.EarlyRead,qr.Write,qr.MixedReadWrite,qr.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}},gd=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function tN(t,e){!e?.injector&&kC(tN);let n=e?.injector??X(tt);return Z0(n)?(ci("NgAfterNextRender"),rN(t,n,e,!0)):iN}function nN(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function rN(t,e,n,r){let i=e.get(II);i.impl??=e.get(pd);let s=n?.phase??qr.MixedReadWrite,o=new gd(i.impl,nN(t,s),r,e.get(jd));return i.impl.register(o),o}var iN={destroy(){}};function sN(t,e,n,r){let i=ue(),s=Qa();if(Dn(i,s,e)){let o=Ye(),c=Ya();jA(c,i,t,e,n,r)}return sN}function EI(t,e,n,r){return Dn(t,Qa(),n)?e+$a(n)+r:zt}function oa(t,e){return t<<17|e<<2}function rr(t){return t>>17&32767}function oN(t){return(t&2)==2}function aN(t,e){return t&131071|e<<17}function md(t){return t|2}function ii(t){return(t&131068)>>2}function xl(t,e){return t&-131069|e<<2}function cN(t){return(t&1)===1}function yd(t){return t|1}function uN(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=rr(o),u=ii(o);t[r]=n;let d=!1,f;if(Array.isArray(n)){let g=n;f=g[1],(f===null||vs(g,f)>0)&&(d=!0)}else f=n;if(i)if(u!==0){let v=rr(t[c+1]);t[r+1]=oa(v,c),v!==0&&(t[v+1]=xl(t[v+1],r)),t[c+1]=aN(t[c+1],r)}else t[r+1]=oa(c,0),c!==0&&(t[c+1]=xl(t[c+1],r)),c=r;else t[r+1]=oa(u,0),c===0?c=r:t[u+1]=xl(t[u+1],r),u=r;d&&(t[r+1]=md(t[r+1])),cv(t,f,r,!0),cv(t,f,r,!1),lN(e,f,t,r,s),o=oa(c,u),s?e.classBindings=o:e.styleBindings=o}function lN(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&vs(s,e)>=0&&(n[r+1]=yd(n[r+1]))}function cv(t,e,n,r){let i=t[n+1],s=e===null,o=r?rr(i):ii(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],d=t[o+1];dN(u,e)&&(c=!0,t[o+1]=r?yd(d):md(d)),o=r?rr(d):ii(d)}c&&(t[n+1]=r?md(i):yd(i))}function dN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?vs(t,e)>=0:!1}function hN(t,e,n){let r=ue(),i=Qa();if(Dn(r,i,e)){let s=Ye(),o=Ya();Qd(s,o,r,t,e,r[De],n,!1)}return hN}function uv(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Yd(t,n,s[o],o,r)}function wI(t,e,n){return DI(t,e,n,!1),wI}function fN(t,e){return DI(t,e,null,!0),fN}function DI(t,e,n,r){let i=ue(),s=Ye(),o=ZC(2);if(s.firstUpdatePass&&gN(s,t,o,r),e!==zt&&Dn(i,o,e)){let c=s.data[ai()];IN(s,c,i,i[De],t,i[o+1]=EN(e,n),r,o)}}function pN(t,e){return e>=t.expandoStartIndex}function gN(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ai()],o=pN(t,n);wN(s,r)&&e===null&&!o&&(e=!1),e=mN(i,s,e,r),uN(i,s,e,n,o,r)}}function mN(t,e,n,r){let i=n0(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Ml(null,t,e,n,r),n=ms(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Ml(i,t,e,n,r),s===null){let u=yN(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Ml(null,t,e,u[1],r),u=ms(u,e.attrs,r),vN(t,e,r,u))}else s=_N(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function yN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ii(r)!==0)return t[rr(r)]}function vN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[rr(i)]=r}function _N(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ms(r,o,n)}return ms(r,e.attrs,n)}function Ml(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=ms(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ms(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),sC(t,o,n?!0:e[++s]))}return t===void 0?null:t}function IN(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,d=u[c+1],f=cN(d)?lv(u,e,n,i,ii(d),o):void 0;if(!Va(f)){Va(s)||oN(d)&&(s=lv(u,null,n,i,c,o));let g=e_(ai(),n);yA(r,o,g,i,s)}}function lv(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=f===null,v=n[i+1];v===zt&&(v=g?at:void 0);let I=g?wl(v,r):f===r?v:void 0;if(d&&!Va(I)&&(I=wl(u,r)),Va(I)&&(c=I,o))return c;let S=t[i+1];i=o?rr(S):ii(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=wl(u,r))}return c}function Va(t){return t!==void 0}function EN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ze(ec(t)))),t}function wN(t,e){return(t.flags&(e?8:16))!==0}function DN(t,e,n,r,i,s){let o=e.consts,c=Ta(o,i),u=rc(e,t,2,r,c);return rI(e,n,u,Ta(o,s)),u.attrs!==null&&ud(u,u.attrs,!1),u.mergedAttrs!==null&&ud(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function TI(t,e,n,r){let i=ue(),s=Ye(),o=In+t,c=i[De],u=s.firstCreatePass?DN(o,s,i,e,n,r):s.data[o],d=bN(s,i,u,c,e,t);i[o]=d;let f=Rd(u);return _s(u,!0),K_(c,d,u),!QS(u)&&Od()&&Gd(s,i,d,u),HC()===0&&tr(d,i),qC(),f&&(eI(s,i,u),X_(s,u,i)),r!==null&&tI(i,u),TI}function bI(){let t=We();c_()?YC():(t=t.parent,_s(t,!1));let e=t;WC(e)&&KC(),zC();let n=Ye();return n.firstCreatePass&&(Ld(n,t),Wv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&u0(e)&&uv(n,e,ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&l0(e)&&uv(n,e,ue(),e.stylesWithoutHost,!1),bI}function TN(t,e,n,r){return TI(t,e,n,r),bI(),TN}var bN=(t,e,n,r,i,s)=>(Fd(!0),U_(r,i,s0()));function oB(){return ue()}var ja="en-US";var CN=ja;function AN(t){typeof t=="string"&&(CN=t.toLowerCase().replace(/_/g,"-"))}var SN=(t,e,n)=>{};function NN(t,e,n,r){let i=ue(),s=Ye(),o=We();return CI(s,i,i[De],o,t,e,r),NN}function RN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[Ia],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function CI(t,e,n,r,i,s,o){let c=Rd(r),d=t.firstCreatePass&&qA(t),f=e[_t],g=HA(e),v=!0;if(r.type&3||o){let x=lt(r,e),R=o?o(x):x,O=g.length,V=o?Q=>o(Nt(Q[r.index])):r.index,$=null;if(!o&&c&&($=RN(t,e,i,r.index)),$!==null){let Q=$.__ngLastListenerFn__||$;Q.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,v=!1}else{s=hv(r,e,f,s),SN(x,i,s);let Q=n.listen(R,i,s);g.push(s,Q),d&&d.push(i,V,O,O+1)}}else s=hv(r,e,f,s);let I=r.outputs,S;if(v&&I!==null&&(S=I[i])){let x=S.length;if(x)for(let R=0;R<x;R+=2){let O=S[R],V=S[R+1],ye=e[O][V].subscribe(s),q=g.length;g.push(s,ye),d&&d.push(i,r.index,q,-(q+1))}}}function dv(t,e,n,r){let i=se(null);try{return Tt(6,e,n),n(r)!==!1}catch(s){return cI(t,s),!1}finally{Tt(7,e,n),se(i)}}function hv(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Tn(t.index,e):e;Zd(o,5);let c=dv(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=dv(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return c}}function aB(t=1){return i0(t)}function xN(t,e,n){return AI(t,"",e,"",n),xN}function AI(t,e,n,r,i){let s=ue(),o=EI(s,e,n,r);if(o!==zt){let c=Ye(),u=Ya();Qd(c,u,s,t,o,s[De],i,!1)}return AI}function cB(t,e=""){let n=ue(),r=Ye(),i=t+In,s=r.firstCreatePass?rc(r,i,1,e,null):r.data[i],o=MN(r,n,s,e,t);n[i]=o,Od()&&Gd(r,n,o,s),_s(s,!1)}var MN=(t,e,n,r,i)=>(Fd(!0),eA(e[De],r));function PN(t){return SI("",t,""),PN}function SI(t,e,n){let r=ue(),i=EI(r,t,e,n);return i!==zt&&zA(r,ai(),i),SI}function kN(t,e,n){vI(e)&&(e=e());let r=ue(),i=Qa();if(Dn(r,i,e)){let s=Ye(),o=Ya();Qd(s,o,r,t,e,r[De],n,!1)}return kN}function uB(t,e){let n=vI(t);return n&&t.set(e),n}function ON(t,e){let n=ue(),r=Ye(),i=We();return CI(r,n,n[De],i,t,e),ON}function FN(t,e,n){let r=Ye();if(r.firstCreatePass){let i=En(t);vd(n,r.data,r.blueprint,i,!0),vd(e,r.data,r.blueprint,i,!1)}}function vd(t,e,n,r,i){if(t=qe(t),Array.isArray(t))for(let s=0;s<t.length;s++)vd(t[s],e,n,r,i);else{let s=Ye(),o=ue(),c=We(),u=Qr(t)?t:qe(t.provide),d=Hv(t),f=c.providerIndexes&1048575,g=c.directiveStart,v=c.providerIndexes>>20;if(Qr(t)||!t.multi){let I=new er(d,i,Et),S=kl(u,e,i?f:f+v,g);S===-1?(Kl(Aa(c,o),s,u),Pl(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(I),o.push(I)):(n[S]=I,o[S]=I)}else{let I=kl(u,e,f+v,g),S=kl(u,e,f,f+v),x=I>=0&&n[I],R=S>=0&&n[S];if(i&&!R||!i&&!x){Kl(Aa(c,o),s,u);let O=jN(i?VN:LN,n.length,i,r,d);!i&&R&&(n[S].providerFactory=O),Pl(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=NI(n[i?S:I],d,!i&&r);Pl(s,t,I>-1?I:S,O)}!i&&r&&R&&n[S].componentProviders++}}}function Pl(t,e,n,r){let i=Qr(e),s=AC(e);if(i||s){let u=(s?qe(e.useClass):e).prototype.ngOnDestroy;if(u){let d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=d.indexOf(n);f===-1?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function NI(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function kl(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function LN(t,e,n,r){return _d(this.multi,[])}function VN(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,c=Xr(n,n[ee],this.providerFactory.index,r);s=c.slice(0,o),_d(i,s);for(let u=o;u<c.length;u++)s.push(c[u])}else s=[],_d(i,s);return s}function _d(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function jN(t,e,n,r,i){let s=new er(t,n,Et);return s.multi=[],s.index=e,s.componentProviders=0,NI(s,i,r&&!n),s}function lB(t,e=[]){return n=>{n.providersResolver=(r,i)=>FN(r,i?i(t):t,e)}}var UN=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=jv(!1,n.type),i=r.length>0?qS([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=fe({token:t,providedIn:"environment",factory:()=>new t(Ne(_n))})}}return t})();function dB(t){ci("NgStandalone"),t.getStandaloneInjector=e=>e.get(UN).getOrCreateStandaloneInjector(t)}function hB(t,e,n){let r=Md()+t,i=ue();return i[r]===zt?th(i,r,n?e.call(n):e()):WS(i,r)}function fB(t,e,n,r){return BN(ue(),Md(),t,e,n,r)}function pB(t,e,n,r,i){return $N(ue(),Md(),t,e,n,r,i)}function RI(t,e){let n=t[e];return n===zt?void 0:n}function BN(t,e,n,r,i,s){let o=e+n;return Dn(t,o,i)?th(t,o+1,s?r.call(s,i):r(i)):RI(t,o+1)}function $N(t,e,n,r,i,s,o){let c=e+n;return KS(t,c,i,s)?th(t,c+2,o?r.call(o,i,s):r(i,s)):RI(t,c+2)}var si=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},xI=new si("18.2.5");var gB=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var HN=new re("");function nh(t){return!!t&&typeof t.then=="function"}function MI(t){return!!t&&typeof t.subscribe=="function"}var qN=new re(""),PI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=X(qN,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(nh(s))n.push(s);else if(MI(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),zN=new re("");function GN(){Jm(()=>{throw new oe(600,!1)})}function WN(t){return t.isBoundToModule}var KN=10;function QN(t,e,n){try{let r=n();return nh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ac=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=X(x0),this.afterRenderManager=X(II),this.zonelessEnabled=X(Xd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ln,this.afterTick=new ln,this.componentTypes=[],this.components=[],this.isStable=X(Ja).hasPendingTasks.pipe(et(n=>!n)),this._injector=X(_n)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof ka;if(!this._injector.get(PI).done){let v=!i&&EC(n),I=!1;throw new oe(405,I)}let o;i?o=n:o=this._injector.get(ni).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let c=WN(o)?void 0:this._injector.get(wn),u=r||o.selector,d=o.create(tt.NULL,[],u,c),f=d.location.nativeElement,g=d.injector.get(HN,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),da(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new oe(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,se(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Oa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<KN;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)YN(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Wa(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;da(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(zN,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>da(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new oe(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function da(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function YN(t,e,n,r){if(!n&&!Wa(t))return;dI(t,e,n&&!r?0:1)}var Id=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},mB=(()=>{class t{compileModuleSync(n){return new fd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Fv(n),s=j_(i.declarations).reduce((o,c)=>{let u=vn(c);return u&&o.push(new ri(u)),o},[]);return new Id(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var JN=(()=>{class t{constructor(){this.zone=X(_e),this.changeDetectionScheduler=X(ti),this.applicationRef=X(ac)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ZN=new re("",{factory:()=>!1});function kI({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new _e(gt(pt({},OI()),{scheduleInRootZone:n})),[{provide:_e,useFactory:t},{provide:ya,multi:!0,useFactory:()=>{let r=X(JN,{optional:!0});return()=>r.initialize()}},{provide:ya,multi:!0,useFactory:()=>{let r=X(XN);return()=>{r.initialize()}}},e===!0?{provide:gI,useValue:!0}:[],{provide:mI,useValue:n??S_}]}function yB(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=kI({ngZoneFactory:()=>{let i=OI(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ci("NgZone_CoalesceEvent"),new _e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return ir([{provide:ZN,useValue:!0},{provide:Xd,useValue:!1},r])}function OI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var XN=(()=>{class t{constructor(){this.subscription=new Ee,this.initialized=!1,this.zone=X(_e),this.pendingTasks=X(Ja)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var eR=(()=>{class t{constructor(){this.appRef=X(ac),this.taskService=X(Ja),this.ngZone=X(_e),this.zonelessEnabled=X(Xd),this.disableScheduling=X(gI,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ee,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Na):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(X(mI,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Xl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ky:N_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Na+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ky(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function tR(){return typeof $localize<"u"&&$localize.locale||ja}var rh=new re("",{providedIn:"root",factory:()=>X(rh,Z.Optional|Z.SkipSelf)||tR()});var FI=new re("");function aa(t){return!!t.platformInjector}function nR(t){let e=aa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(_e);return n.run(()=>{aa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(ei,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),aa(t)){let s=()=>e.destroy(),o=t.platformInjector.get(FI);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{da(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return QN(r,n,()=>{let s=e.get(PI);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(rh,ja);if(AN(o||ja),aa(t)){let c=e.get(ac);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return rR(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function rR(t,e){let n=t.injector.get(ac);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new oe(-403,!1);e.push(t)}var ha=null;function iR(t=[],e){return tt.create({name:e,providers:[{provide:$v,useValue:"platform"},{provide:FI,useValue:new Set([()=>ha=null])},...t]})}function sR(t=[]){if(ha)return ha;let e=iR(t);return ha=e,GN(),oR(e),e}function oR(t){t.get(V0,null)?.forEach(n=>n())}var LI=(()=>{class t{static{this.__NG_ELEMENT_ID__=aR}}return t})();function aR(t){return cR(We(),ue(),(t&16)===16)}function cR(t,e,n){if(Ga(t)&&!n){let r=Tn(t.index,e);return new nr(r,r)}else if(t.type&175){let r=e[St];return new nr(r,e)}return null}var Ed=class{constructor(){}supports(e){return _I(e)}create(e){return new wd(e)}},uR=(t,e)=>e,wd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uR}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<fv(r,i,s)?n:r,c=fv(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let d=c-i,f=u-i;if(d!=f){for(let v=0;v<d;v++){let I=v<s.length?s[v]:s[v]=0,S=I+v;f<=S&&S<d&&(s[v]=I+1)}let g=o.previousIndex;s[g]=f-d}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!_I(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,zS(e,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Dd(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ua),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ua),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dd=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Td=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ua=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Td,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fv(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function pv(){return new ih([new Ed])}var ih=(()=>{class t{static{this.\u0275prov=fe({token:t,providedIn:"root",factory:pv})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||pv()),deps:[[t,new rC,new nt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new oe(901,!1)}}return t})();function vB(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=sR(r),s=[kI({}),{provide:ti,useExisting:eR},...n||[]],o=new La({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return nR({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var _B=new re("");function lR(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function IB(t,e){ci("NgSignals");let n=Km(t);return e?.equal&&(n[Bt].equal=e.equal),n}function dR(t){let e=se(null);try{return t()}finally{se(e)}}function EB(t){let e=vn(t);if(!e)return null;let n=new ri(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var GI=null;function sh(){return GI}function WB(t){GI??=t}var jI=class{};var dh=new re(""),hh=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:()=>X(hR),providedIn:"platform"})}}return t})(),KB=new re(""),hR=(()=>{class t extends hh{constructor(){super(),this._doc=X(dh),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sh().getBaseHref(this._doc)}onPopState(n){let r=sh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=sh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function fh(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function UI(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Gt(t){return t&&t[0]!=="?"?"?"+t:t}var cc=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:()=>X(fR),providedIn:"root"})}}return t})(),WI=new re(""),fR=(()=>{class t extends cc{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??X(dh).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return fh(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Gt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Gt(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Gt(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(hh),Ne(WI,8))}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),QB=(()=>{class t extends cc{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=fh(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Gt(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Gt(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(hh),Ne(WI,8))}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac})}}return t})(),pR=(()=>{class t{constructor(n){this._subject=new Ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=yR(UI(BI(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Gt(r))}normalize(n){return t.stripTrailingSlash(mR(this._basePath,BI(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Gt}static{this.joinWithSlash=fh}static{this.stripTrailingSlash=UI}static{this.\u0275fac=function(r){return new(r||t)(Ne(cc))}}static{this.\u0275prov=fe({token:t,factory:()=>gR(),providedIn:"root"})}}return t})();function gR(){return new pR(Ne(cc))}function mR(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function BI(t){return t.replace(/\/index.html$/,"")}function yR(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function YB(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var oh=/\s+/,$I=[],JB=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=$I,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(oh):$I}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(oh):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(oh).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Et(Xa),Et(eh))}}static{this.\u0275dir=qa({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var ah=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ZB=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ah(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),HI(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);HI(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Et(oc),Et(sc),Et(ih))}}static{this.\u0275dir=qa({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function HI(t,e){t.context.$implicit=e.item}var XB=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new ch,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){qI("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){qI("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Et(oc),Et(sc))}}static{this.\u0275dir=qa({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),ch=class{constructor(){this.$implicit=null,this.ngIf=null}};function qI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ze(e)}'.`)}var e$=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Pv({type:t})}static{this.\u0275inj=Iv({})}}return t})(),vR="browser",_R="server";function IR(t){return t===vR}function t$(t){return t===_R}var n$=(()=>{class t{static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>IR(X(Is))?new uh(X(dh),window):new lh})}}return t})(),uh=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=ER(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function ER(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var lh=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},zI=class{};var QI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wR=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},YI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4,v=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(v=64)),r.push(n[f],n[g],n[v],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let d=i<t.length?n[t.charAt(i)]:64;++i;let g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new gh;let v=s<<2|c>>4;if(r.push(v),d!==64){let I=c<<4&240|d>>2;if(r.push(I),g!==64){let S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},gh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},DR=function(t){let e=QI(t);return YI.encodeByteArray(e,!0)},Es=function(t){return DR(t).replace(/\./g,"")},yh=function(t){try{return YI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bR=()=>TR().__FIREBASE_DEFAULTS__,CR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&yh(t[1]);return e&&JSON.parse(e)},lc=()=>{try{return bR()||CR()||AR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vh=t=>{var e,n;return(n=(e=lc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},JI=t=>{let e=vh(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_h=()=>{var t;return(t=lc())===null||t===void 0?void 0:t.config},Ih=t=>{var e;return(e=lc())===null||e===void 0?void 0:e[`_${t}`]};var uc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ZI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Es(JSON.stringify(n)),Es(JSON.stringify(o)),""].join(".")}function Re(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function SR(){var t;let e=(t=lc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tE(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rE(){let t=Re();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iE(){return!SR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eh(){try{return typeof indexedDB=="object"}catch{return!1}}function sE(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var NR="FirebaseError",rt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NR,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}},Wt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?RR(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new rt(i,c,r)}};function RR(t,e){return t.replace(xR,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var xR=/\{\$([^}]+)}/g;function oE(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(KI(s)&&KI(o)){if(!sr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function KI(t){return t!==null&&typeof t=="object"}function ws(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aE(t,e){let n=new mh(t,e);return n.subscribe.bind(n)}var mh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ph),i.error===void 0&&(i.error=ph),i.complete===void 0&&(i.complete=ph);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function MR(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ph(){}var s$=4*60*60*1e3;function xe(t){return t&&t._delegate?t._delegate:t}var dt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var or="[DEFAULT]";var wh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new uc;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kR(e))try{this.getOrInitializeService({instanceIdentifier:or})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=or){return this.instances.has(e)}getOptions(e=or){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=or){return this.component?this.component.multipleInstances?e:or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function PR(t){return t===or?void 0:t}function kR(t){return t.instantiationMode==="EAGER"}var dc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new wh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var OR=[],te=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(te||{}),FR={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},LR=te.INFO,VR={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},jR=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=VR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},bn=class{constructor(e){this.name=e,this._logLevel=LR,this._logHandler=jR,this._userLogHandler=null,OR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var UR=(t,e)=>e.some(n=>t instanceof n),cE,uE;function BR(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $R(){return uE||(uE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var lE=new WeakMap,Th=new WeakMap,dE=new WeakMap,Dh=new WeakMap,Ch=new WeakMap;function HR(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Rt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lE.set(n,t)}).catch(()=>{}),Ch.set(e,t),e}function qR(t){if(Th.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}var bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hE(t){bh=t(bh)}function zR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(hc(this),e,...n);return dE.set(r,e.sort?e.sort():[e]),Rt(r)}:$R().includes(t)?function(...e){return t.apply(hc(this),e),Rt(lE.get(this))}:function(...e){return Rt(t.apply(hc(this),e))}}function GR(t){return typeof t=="function"?zR(t):(t instanceof IDBTransaction&&qR(t),UR(t,BR())?new Proxy(t,bh):t)}function Rt(t){if(t instanceof IDBRequest)return HR(t);if(Dh.has(t))return Dh.get(t);let e=GR(t);return e!==t&&(Dh.set(t,e),Ch.set(e,t)),e}var hc=t=>Ch.get(t);function pE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=Rt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Rt(o.result),u.oldVersion,u.newVersion,Rt(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var WR=["get","getKey","getAll","getAllKeys","count"],KR=["put","add","delete","clear"],Ah=new Map;function fE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=KR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WR.includes(n)))return;let s=function(o,...c){return E(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]})};return Ah.set(e,s),s}hE(t=>gt(pt({},t),{get:(e,n,r)=>fE(e,n)||t.get(e,n,r),has:(e,n)=>!!fE(e,n)||t.has(e,n)}));var Nh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QR(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function QR(t){let e=t.getComponent();return e?.type==="VERSION"}var Rh="@firebase/app",gE="0.10.11";var Kt=new bn("@firebase/app"),YR="@firebase/app-compat",JR="@firebase/analytics-compat",ZR="@firebase/analytics",XR="@firebase/app-check-compat",ex="@firebase/app-check",tx="@firebase/auth",nx="@firebase/auth-compat",rx="@firebase/database",ix="@firebase/database-compat",sx="@firebase/functions",ox="@firebase/functions-compat",ax="@firebase/installations",cx="@firebase/installations-compat",ux="@firebase/messaging",lx="@firebase/messaging-compat",dx="@firebase/performance",hx="@firebase/performance-compat",fx="@firebase/remote-config",px="@firebase/remote-config-compat",gx="@firebase/storage",mx="@firebase/storage-compat",yx="@firebase/firestore",vx="@firebase/vertexai-preview",_x="@firebase/firestore-compat",Ix="firebase",Ex="10.13.2";var xh="[DEFAULT]",wx={[Rh]:"fire-core",[YR]:"fire-core-compat",[ZR]:"fire-analytics",[JR]:"fire-analytics-compat",[ex]:"fire-app-check",[XR]:"fire-app-check-compat",[tx]:"fire-auth",[nx]:"fire-auth-compat",[rx]:"fire-rtdb",[ix]:"fire-rtdb-compat",[sx]:"fire-fn",[ox]:"fire-fn-compat",[ax]:"fire-iid",[cx]:"fire-iid-compat",[ux]:"fire-fcm",[lx]:"fire-fcm-compat",[dx]:"fire-perf",[hx]:"fire-perf-compat",[fx]:"fire-rc",[px]:"fire-rc-compat",[gx]:"fire-gcs",[mx]:"fire-gcs-compat",[yx]:"fire-fst",[_x]:"fire-fst-compat",[vx]:"fire-vertex","fire-js":"fire-js",[Ix]:"fire-js-all"};var Ds=new Map,Dx=new Map,Mh=new Map;function mE(t,e){try{t.container.addComponent(e)}catch(n){Kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function An(t){let e=t.name;if(Mh.has(e))return Kt.debug(`There were multiple attempts to register component ${e}.`),!1;Mh.set(e,t);for(let n of Ds.values())mE(n,t);for(let n of Dx.values())mE(n,t);return!0}function bs(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qt(t){return t.settings!==void 0}var Tx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new Wt("app","Firebase",Tx);var Ph=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}};var Sn=Ex;function Fh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(n||(n=_h()),!n)throw Cn.create("no-options");let s=Ds.get(i);if(s){if(sr(n,s.options)&&sr(r,s.config))return s;throw Cn.create("duplicate-app",{appName:i})}let o=new dc(i);for(let u of Mh.values())o.addComponent(u);let c=new Ph(n,r,o);return Ds.set(i,c),c}function ui(t=xh){let e=Ds.get(t);if(!e&&t===xh&&_h())return Fh();if(!e)throw Cn.create("no-app",{appName:t});return e}function fc(){return Array.from(Ds.values())}function Se(t,e,n){var r;let i=(r=wx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kt.warn(c.join(" "));return}An(new dt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bx="firebase-heartbeat-database",Cx=1,Ts="firebase-heartbeat-store",Sh=null;function IE(){return Sh||(Sh=pE(bx,Cx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ts)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cn.create("idb-open",{originalErrorMessage:t.message})})),Sh}function Ax(t){return E(this,null,function*(){try{let n=(yield IE()).transaction(Ts),r=yield n.objectStore(Ts).get(EE(t));return yield n.done,r}catch(e){if(e instanceof rt)Kt.warn(e.message);else{let n=Cn.create("idb-get",{originalErrorMessage:e?.message});Kt.warn(n.message)}}})}function yE(t,e){return E(this,null,function*(){try{let r=(yield IE()).transaction(Ts,"readwrite");yield r.objectStore(Ts).put(e,EE(t)),yield r.done}catch(n){if(n instanceof rt)Kt.warn(n.message);else{let r=Cn.create("idb-set",{originalErrorMessage:n?.message});Kt.warn(r.message)}}})}function EE(t){return`${t.name}!${t.options.appId}`}var Sx=1024,Nx=30*24*60*60*1e3,kh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Oh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=Nx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kt.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=vE(),{heartbeatsToSend:r,unsentEntries:i}=Rx(this._heartbeatsCache.heartbeats),s=Es(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Kt.warn(n),""}})}};function vE(){return new Date().toISOString().substring(0,10)}function Rx(t,e=Sx){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_E(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_E(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Oh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return Eh()?sE().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Ax(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function _E(t){return Es(JSON.stringify({version:2,heartbeats:t})).length}function xx(t){An(new dt("platform-logger",e=>new Nh(e),"PRIVATE")),An(new dt("heartbeat",e=>new kh(e),"PRIVATE")),Se(Rh,gE,t),Se(Rh,gE,"esm2017"),Se("fire-js","")}xx("");var Mx="firebase",Px="10.13.2";Se(Mx,Px,"app");var cr=new si("ANGULARFIRE2_VERSION");function gc(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Cs=(t,e)=>{let n=e?[e]:fc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},di=class{constructor(){return Cs(kx)}},kx="app-check";function li(){}var pc=class{zone;delegate;constructor(e,n=yl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Lh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",li,{},li,li)),n.pipe(El({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hi=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new pc(Zone.current)),this.insideAngular=n.run(()=>new pc(Zone.current,os)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Ne(_e))};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Ox(t){return mc().ngZone.runOutsideAngular(()=>t())}function ar(t){return mc().ngZone.run(()=>t())}function Fx(t){return Lx(mc())(t)}function Lx(t){return function(n){return n=n.lift(new Lh(t.ngZone)),n.pipe(fn(t.outsideAngular),hn(t.insideAngular))}}var Vx=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ar(()=>t.apply(void 0,r))},Ke=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ar(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",li,{},li,li))),r[s]=Vx(r[s],n));let i=Ox(()=>t.apply(this,r));if(!e)if(i instanceof Y){let s=mc();return i.pipe(fn(s.outsideAngular),hn(s.insideAngular))}else return ar(()=>i);return i instanceof Y?i.pipe(Fx):i instanceof Promise?ar(()=>new Promise((s,o)=>i.then(c=>ar(()=>s(c)),c=>ar(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ar(()=>i)};var Yt=class{constructor(e){return e}},ur=class{constructor(){return fc()}};function jx(t){return t&&t.length===1?t[0]:new Yt(ui())}var Vh=new re("angularfire2._apps"),Ux={provide:Yt,useFactory:jx,deps:[[new nt,Vh]]},Bx={provide:ur,deps:[[new nt,Vh]]};function $x(t){return(e,n)=>{let r=n.get(Is);Se("angularfire",cr.full,"core"),Se("angularfire",cr.full,"app"),Se("angular",xI.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Yt(i)}}function z$(t,...e){return ir([Ux,Bx,{provide:Vh,useFactory:$x(t),multi:!0,deps:[_e,tt,hi,...e]}])}var G$=Ke(Fh,!0);function FE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var LE=FE,VE=new Wt("auth","Firebase",FE());var wc=new bn("@firebase/auth");function Hx(t,...e){wc.logLevel<=te.WARN&&wc.warn(`Auth (${Sn}): ${t}`,...e)}function vc(t,...e){wc.logLevel<=te.ERROR&&wc.error(`Auth (${Sn}): ${t}`,...e)}function Rn(t,...e){throw sf(t,...e)}function dr(t,...e){return sf(t,...e)}function jE(t,e,n){let r=Object.assign(Object.assign({},LE()),{[e]:n});return new Wt("auth","Firebase",r).create(e,{appName:t.name})}function lr(t){return jE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sf(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VE.create(t,...e)}function B(t,e,...n){if(!t)throw sf(e,...n)}function Jt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw vc(e),new Error(e)}function xn(t,e){t||Jt(e)}function $h(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qx(){return wE()==="http:"||wE()==="https:"}function wE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function zx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qx()||tE()||"connection"in navigator)?navigator.onLine:!0}function Gx(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var hr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,xn(n>e,"Short delay should be less than long delay!"),this.isMobile=XI()||nE()}get(){return zx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function of(t,e){xn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Dc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Wx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Kx=new hr(3e4,6e4);function af(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function pi(s,o,c,u){return E(this,arguments,function*(t,e,n,r,i={}){return UE(t,i,()=>E(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=ws(Object.assign({key:t.config.apiKey},f)).slice(1),v=yield t._getAdditionalHeaders();v["Content-Type"]="application/json",t.languageCode&&(v["X-Firebase-Locale"]=t.languageCode);let I=Object.assign({method:e,headers:v},d);return eE()||(I.referrerPolicy="no-referrer"),Dc.fetch()(BE(t,t.config.apiHost,n,g),I)}))})}function UE(t,e,n){return E(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Wx),e);try{let i=new Hh(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw yc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw yc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw yc(t,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw jE(t,f,d);Rn(t,f)}}catch(i){if(i instanceof rt)throw i;Rn(t,"network-request-failed",{message:String(i)})}})}function Qx(s,o,c,u){return E(this,arguments,function*(t,e,n,r,i={}){let d=yield pi(t,e,n,r,i);return"mfaPendingCredential"in d&&Rn(t,"multi-factor-auth-required",{_serverResponse:d}),d})}function BE(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?of(t.config,i):`${t.config.apiScheme}://${i}`}var Hh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dr(this.auth,"network-request-failed")),Kx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function yc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=dr(t,e,r);return i.customData._tokenResponse=n,i}function Yx(t,e){return E(this,null,function*(){return pi(t,"POST","/v1/accounts:delete",e)})}function $E(t,e){return E(this,null,function*(){return pi(t,"POST","/v1/accounts:lookup",e)})}function As(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cf(t,e=!1){return E(this,null,function*(){let n=xe(t),r=yield n.getIdToken(e),i=uf(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:As(jh(i.auth_time)),issuedAtTime:As(jh(i.iat)),expirationTime:As(jh(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function jh(t){return Number(t)*1e3}function uf(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vc("JWT malformed, contained fewer than 3 sections"),null;try{let i=yh(n);return i?JSON.parse(i):(vc("Failed to decode base64 JWT payload"),null)}catch(i){return vc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function DE(t){let e=uf(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ns(t,e,n=!1){return E(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof rt&&Jx(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Jx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var qh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),n)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Rs=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=As(this.lastLoginAt),this.creationTime=As(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Tc(t){return E(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ns(t,$E(n,{idToken:r}));B(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?HE(s.providerUserInfo):[],c=Zx(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Rs(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)})}function lf(t){return E(this,null,function*(){let e=xe(t);yield Tc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Zx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function HE(t){return t.map(e=>{var{providerId:n}=e,r=vl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Xx(t,e){return E(this,null,function*(){let n=yield UE(t,{},()=>E(this,null,function*(){let r=ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=BE(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Dc.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function eM(t,e){return E(this,null,function*(){return pi(t,"POST","/v2/accounts:revokeToken",af(t,e))})}var Ss=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");let n=DE(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return E(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Xx(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(B(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Jt("not implemented")}};function Nn(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var fi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=vl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Rs(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let n=yield Ns(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return cf(this,e)}reload(){return lf(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Tc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Qt(this.auth.app))return Promise.reject(lr(this.auth));let e=yield this.getIdToken();return yield Ns(this,Yx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;let g=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(d=n.createdAt)!==null&&d!==void 0?d:void 0,V=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:$,emailVerified:Q,isAnonymous:ye,providerData:q,stsTokenManager:D}=n;B($&&D,e,"internal-error");let m=Ss.fromJSON(this.name,D);B(typeof $=="string",e,"internal-error"),Nn(g,e.name),Nn(v,e.name),B(typeof Q=="boolean",e,"internal-error"),B(typeof ye=="boolean",e,"internal-error"),Nn(I,e.name),Nn(S,e.name),Nn(x,e.name),Nn(R,e.name),Nn(O,e.name),Nn(V,e.name);let y=new t({uid:$,auth:e,email:v,emailVerified:Q,displayName:g,isAnonymous:ye,photoURL:S,phoneNumber:I,tenantId:x,stsTokenManager:m,createdAt:O,lastLoginAt:V});return q&&Array.isArray(q)&&(y.providerData=q.map(w=>Object.assign({},w))),R&&(y._redirectEventId=R),y}static _fromIdTokenResponse(e,n,r=!1){return E(this,null,function*(){let i=new Ss;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Tc(s),s})}static _fromGetAccountInfoResponse(e,n,r){return E(this,null,function*(){let i=n.users[0];B(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?HE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ss;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Rs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var TE=new Map;function Zt(t){xn(t instanceof Function,"Expected a class definition");let e=TE.get(t);return e?(xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TE.set(t,e),e)}var tM=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(n,r){return E(this,null,function*(){this.storage[n]=r})}_get(n){return E(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return E(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),zh=tM;function _c(t,e,n){return`firebase:${t}:${e}:${n}`}var bc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=_c(this.userKey,i.apiKey,s),this.fullPersistenceKey=_c("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?fi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return E(this,null,function*(){if(!n.length)return new t(Zt(zh),e,r);let i=(yield Promise.all(n.map(d=>E(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Zt(zh),o=_c(r,e.config.apiKey,e.name),c=null;for(let d of n)try{let f=yield d._get(o);if(f){let g=fi._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(d=>E(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new t(s,e,r))})}};function bE(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QE(e))return"Blackberry";if(YE(e))return"Webos";if(zE(e))return"Safari";if((e.includes("chrome/")||GE(e))&&!e.includes("edge/"))return"Chrome";if(KE(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function qE(t=Re()){return/firefox\//i.test(t)}function zE(t=Re()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GE(t=Re()){return/crios\//i.test(t)}function WE(t=Re()){return/iemobile/i.test(t)}function KE(t=Re()){return/android/i.test(t)}function QE(t=Re()){return/blackberry/i.test(t)}function YE(t=Re()){return/webos/i.test(t)}function df(t=Re()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nM(t=Re()){var e;return df(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rM(){return rE()&&document.documentMode===10}function JE(t=Re()){return df(t)||KE(t)||YE(t)||QE(t)||/windows phone/i.test(t)||WE(t)}function ZE(t,e=[]){let n;switch(t){case"Browser":n=bE(Re());break;case"Worker":n=`${bE(Re())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sn}/${r}`}var Gh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function iM(n){return E(this,arguments,function*(t,e={}){return pi(t,"GET","/v2/passwordPolicy",af(t,e))})}var sM=6,Wh=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Kh=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cc(this),this.idTokenSubscription=new Cc(this),this.beforeStateQueue=new Gh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zt(n)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield bc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let n=yield $E(this,{idToken:e}),r=yield fi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var n;if(Qt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Tc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Gx()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Qt(this.app))return Promise.reject(lr(this));let n=e?xe(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return E(this,null,function*(){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Qt(this.app)?Promise.reject(lr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qt(this.app)?Promise.reject(lr(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Zt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield iM(this),n=new Wh(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield eM(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Zt(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=yield bc.create(this,[Zt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return E(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Hx(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function hf(t){return xe(t)}var Cc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=aE(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ff={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oM(t){ff=t}function aM(t){return ff.loadJS(t)}function cM(){return ff.gapiScript}function XE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function pf(t,e){let n=bs(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(sr(s,e??{}))return i;Rn(i,"already-initialized")}return n.initialize({options:e})}function uM(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function gf(t,e,n){let r=hf(t);B(r._canInitEmulator,r,"emulator-config-failed"),B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=ew(e),{host:o,port:c}=lM(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||dM()}function ew(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lM(t){let e=ew(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:CE(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:CE(o)}}}function CE(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function dM(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ac=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jt("not implemented")}_getIdTokenResponse(e){return Jt("not implemented")}_linkToIdToken(e,n){return Jt("not implemented")}_getReauthenticationResolver(e){return Jt("not implemented")}};function Uh(t,e){return E(this,null,function*(){return Qx(t,"POST","/v1/accounts:signInWithIdp",af(t,e))})}var Sc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Qh=class extends Sc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var xs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return E(this,null,function*(){let s=yield fi._fromIdTokenResponse(e,r,i),o=AE(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=AE(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function AE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Yh=class t extends rt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function tw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(t,s,e,r):s})}function hM(t,e,n=!1){return E(this,null,function*(){let r=yield Ns(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return xs._forOperation(t,"link",r)})}function fM(t,e,n=!1){return E(this,null,function*(){let{auth:r}=t;if(Qt(r.app))return Promise.reject(lr(r));let i="reauthenticate";try{let s=yield Ns(t,tw(r,i,e,t),n);B(s.idToken,r,"internal-error");let o=uf(s.idToken);B(o,r,"internal-error");let{sub:c}=o;return B(t.uid===c,r,"user-mismatch"),xs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Rn(r,"user-mismatch"),s}})}function pM(t,e,n=!1){return E(this,null,function*(){if(Qt(t.app))return Promise.reject(lr(t));let r="signIn",i=yield tw(t,r,e),s=yield xs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function mf(t,e,n,r){return xe(t).onIdTokenChanged(e,n,r)}function yf(t,e,n){return xe(t).beforeAuthStateChanged(e,n)}var Nc="__sak";var Rc=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nc,"1"),this.storage.removeItem(Nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var gM=1e3,mM=10,yM=(()=>{class t extends Rc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JE(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);rM()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,mM):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},gM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return E(this,null,function*(){yield un(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return E(this,null,function*(){let r=yield un(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return E(this,null,function*(){yield un(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),nw=yM;var vM=(()=>{class t extends Rc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),vf=vM;function _M(t){return Promise.all(t.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var IM=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return E(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(f=>E(this,null,function*(){return f(r.origin,o)})),d=yield _M(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function rw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Jh=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let d=rw("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let v=g;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(v.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function xt(){return window}function EM(t){xt().location.href=t}function iw(){return typeof xt().WorkerGlobalScope<"u"&&typeof xt().importScripts=="function"}function wM(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function DM(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TM(){return iw()?self:null}var sw="firebaseLocalStorageDb",bM=1,xc="firebaseLocalStorage",ow="fbase_key",fr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Pc(t,e){return t.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function CM(){let t=indexedDB.deleteDatabase(sw);return new fr(t).toPromise()}function Zh(){let t=indexedDB.open(sw,bM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(xc,{keyPath:ow})}catch(i){n(i)}}),t.addEventListener("success",()=>E(this,null,function*(){let r=t.result;r.objectStoreNames.contains(xc)?e(r):(r.close(),yield CM(),e(yield Zh()))}))})}function SE(t,e,n){return E(this,null,function*(){let r=Pc(t,!0).put({[ow]:e,value:n});return new fr(r).toPromise()})}function AM(t,e){return E(this,null,function*(){let n=Pc(t,!1).get(e),r=yield new fr(n).toPromise();return r===void 0?null:r.value})}function NE(t,e){let n=Pc(t,!0).delete(e);return new fr(n).toPromise()}var SM=800,NM=3,RM=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield Zh(),this.db)})}_withRetries(n){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>NM)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return iw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=IM._getInstance(TM()),this.receiver._subscribe("keyChanged",(n,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var n,r;if(this.activeServiceWorker=yield wM(),!this.activeServiceWorker)return;this.sender=new Jh(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||DM()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Zh();return yield SE(n,Nc,"1"),yield NE(n,Nc),!0}catch{}return!1})}_withPendingWrite(n){return E(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>SE(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return E(this,null,function*(){let r=yield this._withRetries(i=>AM(i,n));return this.localCache[n]=r,r})}_remove(n){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>NE(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return E(this,null,function*(){let n=yield this._withRetries(s=>{let o=Pc(s,!1).getAll();return new fr(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),SM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),aw=RM;var nH=XE("rcb"),rH=new hr(3e4,6e4);function xM(t,e){return e?Zt(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ms=class extends Ac{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Uh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Uh(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function MM(t){return pM(t.auth,new Ms(t),t.bypassAuthState)}function PM(t){let{auth:e,user:n}=t;return B(n,e,"internal-error"),fM(n,new Ms(t),t.bypassAuthState)}function kM(t){return E(this,null,function*(){let{auth:e,user:n}=t;return B(n,e,"internal-error"),hM(n,new Ms(t),t.bypassAuthState)})}var Xh=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MM;case"linkViaPopup":case"linkViaRedirect":return kM;case"reauthViaPopup":case"reauthViaRedirect":return PM;default:Rn(this.auth,"internal-error")}}resolve(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var iH=new hr(2e3,1e4);var OM="pendingRedirect",Ic=new Map,ef=class t extends Xh{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Ic.get(this.auth._key());if(!e){try{let r=(yield FM(this.resolver,this.auth))?yield un(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return un(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,un(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function FM(t,e){return E(this,null,function*(){let n=jM(e),r=VM(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function LM(t,e){Ic.set(t._key(),e)}function VM(t){return Zt(t._redirectPersistence)}function jM(t){return _c(OM,t.config.apiKey,t.name)}function UM(t,e,n=!1){return E(this,null,function*(){if(Qt(t.app))return Promise.reject(lr(t));let r=hf(t),i=xM(r,e),o=yield new ef(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var BM=10*60*1e3,tf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$M(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cw(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BM&&this.cachedEventUids.clear(),this.cachedEventUids.has(RE(e))}saveEventToCache(e){this.cachedEventUids.add(RE(e)),this.lastProcessedEventTime=Date.now()}};function RE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cw({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function $M(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cw(t);default:return!1}}function HM(n){return E(this,arguments,function*(t,e={}){return pi(t,"GET","/v1/projects",e)})}var qM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zM=/^https?/;function GM(t){return E(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield HM(t);for(let n of e)try{if(WM(n))return}catch{}Rn(t,"unauthorized-domain")})}function WM(t){let e=$h(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!zM.test(n))return!1;if(qM.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var KM=new hr(3e4,6e4);function xE(){let t=xt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QM(t){return new Promise((e,n)=>{var r,i,s;function o(){xE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xE(),n(dr(t,"network-request-failed"))},timeout:KM.get()})}if(!((i=(r=xt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xt().gapi)===null||s===void 0)&&s.load)o();else{let c=XE("iframefcb");return xt()[c]=()=>{gapi.load?o():n(dr(t,"network-request-failed"))},aM(`${cM()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ec=null,e})}var Ec=null;function YM(t){return Ec=Ec||QM(t),Ec}var JM=new hr(5e3,15e3),ZM="__/auth/iframe",XM="emulator/auth/iframe",eP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nP(t){let e=t.config;B(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?of(e,XM):`https://${t.config.authDomain}/${ZM}`,r={apiKey:e.apiKey,appName:t.name,v:Sn},i=tP.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ws(r).slice(1)}`}function rP(t){return E(this,null,function*(){let e=yield YM(t),n=xt().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:nP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eP,dontclear:!0},r=>new Promise((i,s)=>E(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=dr(t,"network-request-failed"),c=xt().setTimeout(()=>{s(o)},JM.get());function u(){xt().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var iP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sP=500,oP=600,aP="_blank",cP="http://localhost",Mc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function uP(t,e,n,r=sP,i=oP){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},iP),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Re().toLowerCase();n&&(c=GE(d)?aP:n),qE(d)&&(e=e||cP,u.scrollbars="yes");let f=Object.entries(u).reduce((v,[I,S])=>`${v}${I}=${S},`,"");if(nM(d)&&c!=="_self")return lP(e||"",c),new Mc(null);let g=window.open(e||"",c,f);B(g,t,"popup-blocked");try{g.focus()}catch{}return new Mc(g)}function lP(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var dP="__/auth/handler",hP="emulator/auth/handler",fP=encodeURIComponent("fac");function ME(t,e,n,r,i,s){return E(this,null,function*(){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sn,eventId:i};if(e instanceof Sc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,g]of Object.entries(s||{}))o[f]=g}if(e instanceof Qh){let f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield t._getAppCheckToken(),d=u?`#${fP}=${encodeURIComponent(u)}`:"";return`${pP(t)}?${ws(c).slice(1)}${d}`})}function pP({config:t}){return t.emulator?of(t,hP):`https://${t.authDomain}/${dP}`}var Bh="webStorageSupport",nf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vf,this._completeRedirectFn=UM,this._overrideRedirectResult=LM}_openPopup(e,n,r,i){return E(this,null,function*(){var s;xn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ME(e,n,r,$h(),i);return uP(e,o,rw())})}_openRedirect(e,n,r,i){return E(this,null,function*(){yield this._originValidation(e);let s=yield ME(e,n,r,$h(),i);return EM(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return E(this,null,function*(){let n=yield rP(e),r=new tf(e);return n.register("authEvent",i=>(B(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bh,{type:Bh},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Bh];o!==void 0&&n(!!o),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JE()||zE()||df()}},uw=nf;var PE="@firebase/auth",kE="1.7.9";var rf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function gP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mP(t){An(new dt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZE(t)},d=new Kh(r,i,s,u);return uM(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),An(new dt("auth-internal",e=>{let n=hf(e.getProvider("auth").getImmediate());return(r=>new rf(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(PE,kE,gP(t)),Se(PE,kE,"esm2017")}var yP=5*60,vP=Ih("authIdTokenMaxAge")||yP,OE=null,_P=t=>e=>E(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vP)return;let i=n?.token;OE!==i&&(OE=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function _f(t=ui()){let e=bs(t,"auth");if(e.isInitialized())return e.getImmediate();let n=pf(t,{popupRedirectResolver:uw,persistence:[aw,nw,vf]}),r=Ih("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=_P(s.toString());yf(n,o,()=>o(n.currentUser)),mf(n,c=>o(c))}}let i=vh("auth");return i&&gf(n,`http://${i}`),n}function IP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oM({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=dr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",IP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mP("Browser");var lw="auth",Ps=class{constructor(e){return e}},ks=class{constructor(){return Cs(lw)}};var If=new re("angularfire2.auth-instances");function pk(t,e){let n=gc(lw,t,e);return n&&new Ps(n)}function gk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ps(r)}}var mk={provide:ks,deps:[[new nt,If]]},yk={provide:Ps,useFactory:pk,deps:[[new nt,If],Yt]};function qH(t,...e){return Se("angularfire",cr.full,"auth"),ir([yk,mk,{provide:If,useFactory:gk(t),multi:!0,deps:[_e,tt,hi,ur,[new nt,di],...e]}])}var zH=Ke(_f,!0);var dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hw={};var Mn,Ef;(function(){var t;function e(D,m){function y(){}y.prototype=m.prototype,D.D=m.prototype,D.prototype=new y,D.prototype.constructor=D,D.C=function(w,T,C){for(var _=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)_[Vt-2]=arguments[Vt];return m.prototype[T].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,m,y){y||(y=0);var w=Array(16);if(typeof m=="string")for(var T=0;16>T;++T)w[T]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(T=0;16>T;++T)w[T]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=D.g[0],y=D.g[1],T=D.g[2];var C=D.g[3],_=m+(C^y&(T^C))+w[0]+3614090360&4294967295;m=y+(_<<7&4294967295|_>>>25),_=C+(T^m&(y^T))+w[1]+3905402710&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(y^C&(m^y))+w[2]+606105819&4294967295,T=C+(_<<17&4294967295|_>>>15),_=y+(m^T&(C^m))+w[3]+3250441966&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(C^y&(T^C))+w[4]+4118548399&4294967295,m=y+(_<<7&4294967295|_>>>25),_=C+(T^m&(y^T))+w[5]+1200080426&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(y^C&(m^y))+w[6]+2821735955&4294967295,T=C+(_<<17&4294967295|_>>>15),_=y+(m^T&(C^m))+w[7]+4249261313&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(C^y&(T^C))+w[8]+1770035416&4294967295,m=y+(_<<7&4294967295|_>>>25),_=C+(T^m&(y^T))+w[9]+2336552879&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(y^C&(m^y))+w[10]+4294925233&4294967295,T=C+(_<<17&4294967295|_>>>15),_=y+(m^T&(C^m))+w[11]+2304563134&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(C^y&(T^C))+w[12]+1804603682&4294967295,m=y+(_<<7&4294967295|_>>>25),_=C+(T^m&(y^T))+w[13]+4254626195&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(y^C&(m^y))+w[14]+2792965006&4294967295,T=C+(_<<17&4294967295|_>>>15),_=y+(m^T&(C^m))+w[15]+1236535329&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(T^C&(y^T))+w[1]+4129170786&4294967295,m=y+(_<<5&4294967295|_>>>27),_=C+(y^T&(m^y))+w[6]+3225465664&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(C^m))+w[11]+643717713&4294967295,T=C+(_<<14&4294967295|_>>>18),_=y+(C^m&(T^C))+w[0]+3921069994&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(T^C&(y^T))+w[5]+3593408605&4294967295,m=y+(_<<5&4294967295|_>>>27),_=C+(y^T&(m^y))+w[10]+38016083&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(C^m))+w[15]+3634488961&4294967295,T=C+(_<<14&4294967295|_>>>18),_=y+(C^m&(T^C))+w[4]+3889429448&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(T^C&(y^T))+w[9]+568446438&4294967295,m=y+(_<<5&4294967295|_>>>27),_=C+(y^T&(m^y))+w[14]+3275163606&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(C^m))+w[3]+4107603335&4294967295,T=C+(_<<14&4294967295|_>>>18),_=y+(C^m&(T^C))+w[8]+1163531501&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(T^C&(y^T))+w[13]+2850285829&4294967295,m=y+(_<<5&4294967295|_>>>27),_=C+(y^T&(m^y))+w[2]+4243563512&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(C^m))+w[7]+1735328473&4294967295,T=C+(_<<14&4294967295|_>>>18),_=y+(C^m&(T^C))+w[12]+2368359562&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(y^T^C)+w[5]+4294588738&4294967295,m=y+(_<<4&4294967295|_>>>28),_=C+(m^y^T)+w[8]+2272392833&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^y)+w[11]+1839030562&4294967295,T=C+(_<<16&4294967295|_>>>16),_=y+(T^C^m)+w[14]+4259657740&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(y^T^C)+w[1]+2763975236&4294967295,m=y+(_<<4&4294967295|_>>>28),_=C+(m^y^T)+w[4]+1272893353&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^y)+w[7]+4139469664&4294967295,T=C+(_<<16&4294967295|_>>>16),_=y+(T^C^m)+w[10]+3200236656&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(y^T^C)+w[13]+681279174&4294967295,m=y+(_<<4&4294967295|_>>>28),_=C+(m^y^T)+w[0]+3936430074&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^y)+w[3]+3572445317&4294967295,T=C+(_<<16&4294967295|_>>>16),_=y+(T^C^m)+w[6]+76029189&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(y^T^C)+w[9]+3654602809&4294967295,m=y+(_<<4&4294967295|_>>>28),_=C+(m^y^T)+w[12]+3873151461&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^y)+w[15]+530742520&4294967295,T=C+(_<<16&4294967295|_>>>16),_=y+(T^C^m)+w[2]+3299628645&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(T^(y|~C))+w[0]+4096336452&4294967295,m=y+(_<<6&4294967295|_>>>26),_=C+(y^(m|~T))+w[7]+1126891415&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~y))+w[14]+2878612391&4294967295,T=C+(_<<15&4294967295|_>>>17),_=y+(C^(T|~m))+w[5]+4237533241&4294967295,y=T+(_<<21&4294967295|_>>>11),_=m+(T^(y|~C))+w[12]+1700485571&4294967295,m=y+(_<<6&4294967295|_>>>26),_=C+(y^(m|~T))+w[3]+2399980690&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~y))+w[10]+4293915773&4294967295,T=C+(_<<15&4294967295|_>>>17),_=y+(C^(T|~m))+w[1]+2240044497&4294967295,y=T+(_<<21&4294967295|_>>>11),_=m+(T^(y|~C))+w[8]+1873313359&4294967295,m=y+(_<<6&4294967295|_>>>26),_=C+(y^(m|~T))+w[15]+4264355552&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~y))+w[6]+2734768916&4294967295,T=C+(_<<15&4294967295|_>>>17),_=y+(C^(T|~m))+w[13]+1309151649&4294967295,y=T+(_<<21&4294967295|_>>>11),_=m+(T^(y|~C))+w[4]+4149444226&4294967295,m=y+(_<<6&4294967295|_>>>26),_=C+(y^(m|~T))+w[11]+3174756917&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~y))+w[2]+718787259&4294967295,T=C+(_<<15&4294967295|_>>>17),_=y+(C^(T|~m))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+m&4294967295,D.g[1]=D.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+C&4294967295}r.prototype.u=function(D,m){m===void 0&&(m=D.length);for(var y=m-this.blockSize,w=this.B,T=this.h,C=0;C<m;){if(T==0)for(;C<=y;)i(this,D,C),C+=this.blockSize;if(typeof D=="string"){for(;C<m;)if(w[T++]=D.charCodeAt(C++),T==this.blockSize){i(this,w),T=0;break}}else for(;C<m;)if(w[T++]=D[C++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=m},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var m=1;m<D.length-8;++m)D[m]=0;var y=8*this.o;for(m=D.length-8;m<D.length;++m)D[m]=y&255,y/=256;for(this.u(D),D=Array(16),m=y=0;4>m;++m)for(var w=0;32>w;w+=8)D[y++]=this.g[m]>>>w&255;return D};function s(D,m){var y=c;return Object.prototype.hasOwnProperty.call(y,D)?y[D]:y[D]=m(D)}function o(D,m){this.h=m;for(var y=[],w=!0,T=D.length-1;0<=T;T--){var C=D[T]|0;w&&C==m||(y[T]=C,w=!1)}this.g=y}var c={};function u(D){return-128<=D&&128>D?s(D,function(m){return new o([m|0],0>m?-1:0)}):new o([D|0],0>D?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return R(d(-D));for(var m=[],y=1,w=0;D>=y;w++)m[w]=D/y|0,y*=4294967296;return new o(m,0)}function f(D,m){if(D.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(D.charAt(0)=="-")return R(f(D.substring(1),m));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),w=g,T=0;T<D.length;T+=8){var C=Math.min(8,D.length-T),_=parseInt(D.substring(T,T+C),m);8>C?(C=d(Math.pow(m,C)),w=w.j(C).add(d(_))):(w=w.j(y),w=w.add(d(_)))}return w}var g=u(0),v=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var D=0,m=1,y=0;y<this.g.length;y++){var w=this.i(y);D+=(0<=w?w:4294967296+w)*m,m*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(x(this))return"-"+R(this).toString(D);for(var m=d(Math.pow(D,6)),y=this,w="";;){var T=Q(y,m).g;y=O(y,T.j(m));var C=((0<y.g.length?y.g[0]:y.h)>>>0).toString(D);if(y=T,S(y))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var m=0;m<D.g.length;m++)if(D.g[m]!=0)return!1;return!0}function x(D){return D.h==-1}t.l=function(D){return D=O(this,D),x(D)?-1:S(D)?0:1};function R(D){for(var m=D.g.length,y=[],w=0;w<m;w++)y[w]=~D.g[w];return new o(y,~D.h).add(v)}t.abs=function(){return x(this)?R(this):this},t.add=function(D){for(var m=Math.max(this.g.length,D.g.length),y=[],w=0,T=0;T<=m;T++){var C=w+(this.i(T)&65535)+(D.i(T)&65535),_=(C>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);w=_>>>16,C&=65535,_&=65535,y[T]=_<<16|C}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(D,m){return D.add(R(m))}t.j=function(D){if(S(this)||S(D))return g;if(x(this))return x(D)?R(this).j(R(D)):R(R(this).j(D));if(x(D))return R(this.j(R(D)));if(0>this.l(I)&&0>D.l(I))return d(this.m()*D.m());for(var m=this.g.length+D.g.length,y=[],w=0;w<2*m;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<D.g.length;T++){var C=this.i(w)>>>16,_=this.i(w)&65535,Vt=D.i(T)>>>16,Fi=D.i(T)&65535;y[2*w+2*T]+=_*Fi,V(y,2*w+2*T),y[2*w+2*T+1]+=C*Fi,V(y,2*w+2*T+1),y[2*w+2*T+1]+=_*Vt,V(y,2*w+2*T+1),y[2*w+2*T+2]+=C*Vt,V(y,2*w+2*T+2)}for(w=0;w<m;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=m;w<2*m;w++)y[w]=0;return new o(y,0)};function V(D,m){for(;(D[m]&65535)!=D[m];)D[m+1]+=D[m]>>>16,D[m]&=65535,m++}function $(D,m){this.g=D,this.h=m}function Q(D,m){if(S(m))throw Error("division by zero");if(S(D))return new $(g,g);if(x(D))return m=Q(R(D),m),new $(R(m.g),R(m.h));if(x(m))return m=Q(D,R(m)),new $(R(m.g),m.h);if(30<D.g.length){if(x(D)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var y=v,w=m;0>=w.l(D);)y=ye(y),w=ye(w);var T=q(y,1),C=q(w,1);for(w=q(w,2),y=q(y,2);!S(w);){var _=C.add(w);0>=_.l(D)&&(T=T.add(y),C=_),w=q(w,1),y=q(y,1)}return m=O(D,T.j(m)),new $(T,m)}for(T=g;0<=D.l(m);){for(y=Math.max(1,Math.floor(D.m()/m.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=d(y),_=C.j(m);x(_)||0<_.l(D);)y-=w,C=d(y),_=C.j(m);S(C)&&(C=v),T=T.add(C),D=O(D,_)}return new $(T,D)}t.A=function(D){return Q(this,D).h},t.and=function(D){for(var m=Math.max(this.g.length,D.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)&D.i(w);return new o(y,this.h&D.h)},t.or=function(D){for(var m=Math.max(this.g.length,D.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)|D.i(w);return new o(y,this.h|D.h)},t.xor=function(D){for(var m=Math.max(this.g.length,D.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)^D.i(w);return new o(y,this.h^D.h)};function ye(D){for(var m=D.g.length+1,y=[],w=0;w<m;w++)y[w]=D.i(w)<<1|D.i(w-1)>>>31;return new o(y,D.h)}function q(D,m){var y=m>>5;m%=32;for(var w=D.g.length-y,T=[],C=0;C<w;C++)T[C]=0<m?D.i(C+y)>>>m|D.i(C+y+1)<<32-m:D.i(C+y);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ef=hw.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Mn=hw.Integer=o}).apply(typeof dw<"u"?dw:typeof self<"u"?self:typeof window<"u"?window:{});var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xt={};var wf,Df,gi,Tf,Os,Oc,bf,Cf,Af;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof kc=="object"&&kc];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var b=a[p];if(!(b in h))break e;h=h[b]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,b={next:function(){if(!p&&h<a.length){var A=h++;return{value:l(A,a[A]),done:!1}}return p=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,p),a.apply(l,b)}}return function(){return a.apply(l,arguments)}}function v(a,l,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function I(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function S(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,b,A){for(var P=Array(arguments.length-2),le=2;le<arguments.length;le++)P[le-2]=arguments[le];return l.prototype[b].apply(p,P)}}function x(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function R(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let b=a.length||0,A=p.length||0;a.length=b+A;for(let P=0;P<A;P++)a[b+P]=p[P]}else a.push(p)}}class O{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function V(a){return/^[\s\xa0]*$/.test(a)}function $(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Q(a){return Q[" "](a),a}Q[" "]=function(){};var ye=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function q(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function D(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,p;for(let b=1;b<arguments.length;b++){p=arguments[b];for(h in p)a[h]=p[h];for(let A=0;A<y.length;A++)h=y[A],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function T(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function _(){var a=Su;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Vt{constructor(){this.h=this.g=null}add(l,h){let p=Fi.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Fi=new O(()=>new lT,a=>a.reset());class lT{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Li,Vi=!1,Su=new Vt,Lg=()=>{let a=c.Promise.resolve(void 0);Li=()=>{a.then(dT)}};var dT=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){C(h)}var l=Fi;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}Vi=!1};function sn(){this.s=this.s,this.C=this.C}sn.prototype.s=!1,sn.prototype.ma=function(){this.s||(this.s=!0,this.N())},sn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var hT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function ji(a,l){if(Oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(ye){e:{try{Q(l.nodeName);var b=!0;break e}catch{}b=!1}b||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:fT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ji.aa.h.call(this)}}S(ji,Oe);var fT={2:"touch",3:"pen",4:"mouse"};ji.prototype.h=function(){ji.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ui="closure_listenable_"+(1e6*Math.random()|0),pT=0;function gT(a,l,h,p,b){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=b,this.key=++pT,this.da=this.fa=!1}function ao(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function co(a){this.src=a,this.g={},this.h=0}co.prototype.add=function(a,l,h,p,b){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var P=Ru(a,l,p,b);return-1<P?(l=a[P],h||(l.fa=!1)):(l=new gT(l,this.src,A,!!p,b),l.fa=h,a.push(l)),l};function Nu(a,l){var h=l.type;if(h in a.g){var p=a.g[h],b=Array.prototype.indexOf.call(p,l,void 0),A;(A=0<=b)&&Array.prototype.splice.call(p,b,1),A&&(ao(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Ru(a,l,h,p){for(var b=0;b<a.length;++b){var A=a[b];if(!A.da&&A.listener==l&&A.capture==!!h&&A.ha==p)return b}return-1}var xu="closure_lm_"+(1e6*Math.random()|0),Mu={};function Vg(a,l,h,p,b){if(p&&p.once)return Ug(a,l,h,p,b);if(Array.isArray(l)){for(var A=0;A<l.length;A++)Vg(a,l[A],h,p,b);return null}return h=Fu(h),a&&a[Ui]?a.K(l,h,d(p)?!!p.capture:!!p,b):jg(a,l,h,!1,p,b)}function jg(a,l,h,p,b,A){if(!l)throw Error("Invalid event type");var P=d(b)?!!b.capture:!!b,le=ku(a);if(le||(a[xu]=le=new co(a)),h=le.add(l,h,p,P,A),h.proxy)return h;if(p=mT(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)hT||(b=P),b===void 0&&(b=!1),a.addEventListener(l.toString(),p,b);else if(a.attachEvent)a.attachEvent($g(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function mT(){function a(h){return l.call(a.src,a.listener,h)}let l=yT;return a}function Ug(a,l,h,p,b){if(Array.isArray(l)){for(var A=0;A<l.length;A++)Ug(a,l[A],h,p,b);return null}return h=Fu(h),a&&a[Ui]?a.L(l,h,d(p)?!!p.capture:!!p,b):jg(a,l,h,!0,p,b)}function Bg(a,l,h,p,b){if(Array.isArray(l))for(var A=0;A<l.length;A++)Bg(a,l[A],h,p,b);else p=d(p)?!!p.capture:!!p,h=Fu(h),a&&a[Ui]?(a=a.i,l=String(l).toString(),l in a.g&&(A=a.g[l],h=Ru(A,h,p,b),-1<h&&(ao(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete a.g[l],a.h--)))):a&&(a=ku(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Ru(l,h,p,b)),(h=-1<a?l[a]:null)&&Pu(h))}function Pu(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[Ui])Nu(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent($g(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=ku(l))?(Nu(h,a),h.h==0&&(h.src=null,l[xu]=null)):ao(a)}}}function $g(a){return a in Mu?Mu[a]:Mu[a]="on"+a}function yT(a,l){if(a.da)a=!0;else{l=new ji(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&Pu(a),a=h.call(p,l)}return a}function ku(a){return a=a[xu],a instanceof co?a:null}var Ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fu(a){return typeof a=="function"?a:(a[Ou]||(a[Ou]=function(l){return a.handleEvent(l)}),a[Ou])}function Fe(){sn.call(this),this.i=new co(this),this.M=this,this.F=null}S(Fe,sn),Fe.prototype[Ui]=!0,Fe.prototype.removeEventListener=function(a,l,h,p){Bg(this,a,l,h,p)};function $e(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Oe(l,a);else if(l instanceof Oe)l.target=l.target||a;else{var b=l;l=new Oe(p,a),w(l,b)}if(b=!0,h)for(var A=h.length-1;0<=A;A--){var P=l.g=h[A];b=uo(P,p,!0,l)&&b}if(P=l.g=a,b=uo(P,p,!0,l)&&b,b=uo(P,p,!1,l)&&b,h)for(A=0;A<h.length;A++)P=l.g=h[A],b=uo(P,p,!1,l)&&b}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)ao(h[p]);delete a.g[l],a.h--}}this.F=null},Fe.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},Fe.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function uo(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var b=!0,A=0;A<l.length;++A){var P=l[A];if(P&&!P.da&&P.capture==h){var le=P.listener,Pe=P.ha||P.src;P.fa&&Nu(a.i,P),b=le.call(Pe,p)!==!1&&b}}return b&&!p.defaultPrevented}function Hg(a,l,h){if(typeof a=="function")h&&(a=v(a,h));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function qg(a){a.g=Hg(()=>{a.g=null,a.i&&(a.i=!1,qg(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class vT extends sn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:qg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(a){sn.call(this),this.h=a,this.g={}}S(Bi,sn);var zg=[];function Gg(a){q(a.g,function(l,h){this.g.hasOwnProperty(h)&&Pu(l)},a),a.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),Gg(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lu=c.JSON.stringify,_T=c.JSON.parse,IT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Vu(){}Vu.prototype.h=null;function Wg(a){return a.h||(a.h=a.i())}function Kg(){}var $i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ju(){Oe.call(this,"d")}S(ju,Oe);function Uu(){Oe.call(this,"c")}S(Uu,Oe);var Un={},Qg=null;function lo(){return Qg=Qg||new Fe}Un.La="serverreachability";function Yg(a){Oe.call(this,Un.La,a)}S(Yg,Oe);function Hi(a){let l=lo();$e(l,new Yg(l))}Un.STAT_EVENT="statevent";function Jg(a,l){Oe.call(this,Un.STAT_EVENT,a),this.stat=l}S(Jg,Oe);function He(a){let l=lo();$e(l,new Jg(l,a))}Un.Ma="timingevent";function Zg(a,l){Oe.call(this,Un.Ma,a),this.size=l}S(Zg,Oe);function qi(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function ET(a,l,h,p,b,A){a.info(function(){if(a.g)if(A)for(var P="",le=A.split("&"),Pe=0;Pe<le.length;Pe++){var ae=le[Pe].split("=");if(1<ae.length){var Le=ae[0];ae=ae[1];var Ve=Le.split("_");P=2<=Ve.length&&Ve[1]=="type"?P+(Le+"="+ae+"&"):P+(Le+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+p+") [attempt "+b+"]: "+l+`
`+h+`
`+P})}function wT(a,l,h,p,b,A,P){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+b+"]: "+l+`
`+h+`
`+A+" "+P})}function Sr(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+TT(a,h)+(p?" "+p:"")})}function DT(a,l){a.info(function(){return"TIMEOUT: "+l})}zi.prototype.info=function(){};function TT(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var b=p[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return Lu(h)}catch{return l}}var ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bu;function fo(){}S(fo,Vu),fo.prototype.g=function(){return new XMLHttpRequest},fo.prototype.i=function(){return{}},Bu=new fo;function on(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new em}function em(){this.i=null,this.g="",this.h=!1}var tm={},$u={};function Hu(a,l,h){a.L=1,a.v=yo(jt(l)),a.m=h,a.P=!0,nm(a,null)}function nm(a,l){a.F=Date.now(),po(a),a.A=jt(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),mm(h.i,"t",p),a.C=0,h=a.j.J,a.h=new em,a.g=km(a.j,h?l:null,!a.m),0<a.O&&(a.M=new vT(v(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(zg[0]=b.toString()),b=zg);for(var A=0;A<b.length;A++){var P=Vg(h,b[A],p||l.handleEvent,!1,l.h||l);if(!P)break;l.g[P.key]=P}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Hi(),ET(a.i,a.u,a.A,a.l,a.R,a.m)}on.prototype.ca=function(a){a=a.target;let l=this.M;l&&Ut(a)==3?l.j():this.Y(a)},on.prototype.Y=function(a){try{if(a==this.g)e:{let Ve=Ut(this.g);var l=this.g.Ba();let xr=this.g.Z();if(!(3>Ve)&&(Ve!=3||this.g&&(this.h.h||this.g.oa()||Dm(this.g)))){this.J||Ve!=4||l==7||(l==8||0>=xr?Hi(3):Hi(2)),qu(this);var h=this.g.Z();this.X=h;t:if(rm(this)){var p=Dm(this.g);a="";var b=p.length,A=Ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bn(this),Gi(this);var P="";break t}this.h.i=new c.TextDecoder}for(l=0;l<b;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(A&&l==b-1)});p.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,wT(this.i,this.u,this.A,this.l,this.R,Ve,h),this.o){if(this.T&&!this.K){t:{if(this.g){var le,Pe=this.g;if((le=Pe.g?Pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(le)){var ae=le;break t}}ae=null}if(h=ae)Sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zu(this,h);else{this.o=!1,this.s=3,He(12),Bn(this),Gi(this);break e}}if(this.P){h=!0;let ft;for(;!this.J&&this.C<P.length;)if(ft=bT(this,P),ft==$u){Ve==4&&(this.s=4,He(14),h=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==tm){this.s=4,He(15),Sr(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else Sr(this.i,this.l,ft,null),zu(this,ft);if(rm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||P.length!=0||this.h.h||(this.s=1,He(16),h=!1),this.o=this.o&&h,!h)Sr(this.i,this.l,P,"[Invalid Chunked Response]"),Bn(this),Gi(this);else if(0<P.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Ju(Le),Le.M=!0,He(11))}}else Sr(this.i,this.l,P,null),zu(this,P);Ve==4&&Bn(this),this.o&&!this.J&&(Ve==4?Rm(this.j,this):(this.o=!1,po(this)))}else $T(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Bn(this),Gi(this)}}}catch{}finally{}};function rm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function bT(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?$u:(h=Number(l.substring(h,p)),isNaN(h)?tm:(p+=1,p+h>l.length?$u:(l=l.slice(p,p+h),a.C=p+h,l)))}on.prototype.cancel=function(){this.J=!0,Bn(this)};function po(a){a.S=Date.now()+a.I,im(a,a.I)}function im(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=qi(v(a.ba,a),l)}function qu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}on.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(DT(this.i,this.A),this.L!=2&&(Hi(),He(17)),Bn(this),this.s=2,Gi(this)):im(this,this.S-a)};function Gi(a){a.j.G==0||a.J||Rm(a.j,a)}function Bn(a){qu(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,Gg(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function zu(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||Gu(h.h,a))){if(!a.K&&Gu(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var b=p;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)wo(h),Io(h);else break e;Yu(h),He(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=qi(v(h.Za,h),6e3));if(1>=am(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Hn(h,11)}else if((a.K||h.g==a)&&wo(h),!V(l))for(b=h.Da.g.parse(l),l=0;l<b.length;l++){let ae=b[l];if(h.T=ae[0],ae=ae[1],h.G==2)if(ae[0]=="c"){h.K=ae[1],h.ia=ae[2];let Le=ae[3];Le!=null&&(h.la=Le,h.j.info("VER="+h.la));let Ve=ae[4];Ve!=null&&(h.Aa=Ve,h.j.info("SVER="+h.Aa));let xr=ae[5];xr!=null&&typeof xr=="number"&&0<xr&&(p=1.5*xr,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let ft=a.g;if(ft){let To=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(To){var A=p.h;A.g||To.indexOf("spdy")==-1&&To.indexOf("quic")==-1&&To.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Wu(A,A.h),A.h=null))}if(p.D){let Zu=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Zu&&(p.ya=Zu,pe(p.I,p.D,Zu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var P=a;if(p.qa=Pm(p,p.J?p.ia:null,p.W),P.K){cm(p.h,P);var le=P,Pe=p.L;Pe&&(le.I=Pe),le.B&&(qu(le),po(le)),p.g=P}else Sm(p);0<h.i.length&&Eo(h)}else ae[0]!="stop"&&ae[0]!="close"||Hn(h,7);else h.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Hn(h,7):Qu(h):ae[0]!="noop"&&h.l&&h.l.ta(ae),h.v=0)}}Hi(4)}catch{}}var CT=class{constructor(a,l){this.g=a,this.map=l}};function sm(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function om(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function am(a){return a.h?1:a.g?a.g.size:0}function Gu(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Wu(a,l){a.g?a.g.add(l):a.h=l}function cm(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}sm.prototype.cancel=function(){if(this.i=um(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function um(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return x(a.i)}function AT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function ST(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function lm(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=ST(a),p=AT(a),b=p.length,A=0;A<b;A++)l.call(void 0,p[A],h&&h[A],a)}var dm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NT(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),b=null;if(0<=p){var A=a[h].substring(0,p);b=a[h].substring(p+1)}else A=a[h];l(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function $n(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof $n){this.h=a.h,go(this,a.j),this.o=a.o,this.g=a.g,mo(this,a.s),this.l=a.l;var l=a.i,h=new Qi;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),hm(this,h),this.m=a.m}else a&&(l=String(a).match(dm))?(this.h=!1,go(this,l[1]||"",!0),this.o=Wi(l[2]||""),this.g=Wi(l[3]||"",!0),mo(this,l[4]),this.l=Wi(l[5]||"",!0),hm(this,l[6]||"",!0),this.m=Wi(l[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}$n.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Ki(l,fm,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Ki(l,fm,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Ki(h,h.charAt(0)=="/"?MT:xT,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Ki(h,kT)),a.join("")};function jt(a){return new $n(a)}function go(a,l,h){a.j=h?Wi(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function mo(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function hm(a,l,h){l instanceof Qi?(a.i=l,OT(a.i,a.h)):(h||(l=Ki(l,PT)),a.i=new Qi(l,a.h))}function pe(a,l,h){a.i.set(l,h)}function yo(a){return pe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Wi(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ki(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,RT),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function RT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fm=/[#\/\?@]/g,xT=/[#\?:]/g,MT=/[#\?]/g,PT=/[#\?@]/g,kT=/#/g;function Qi(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function an(a){a.g||(a.g=new Map,a.h=0,a.i&&NT(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}t=Qi.prototype,t.add=function(a,l){an(this),this.i=null,a=Nr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function pm(a,l){an(a),l=Nr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function gm(a,l){return an(a),l=Nr(a,l),a.g.has(l)}t.forEach=function(a,l){an(this),this.g.forEach(function(h,p){h.forEach(function(b){a.call(l,b,p,this)},this)},this)},t.na=function(){an(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let b=a[p];for(let A=0;A<b.length;A++)h.push(l[p])}return h},t.V=function(a){an(this);let l=[];if(typeof a=="string")gm(this,a)&&(l=l.concat(this.g.get(Nr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},t.set=function(a,l){return an(this),this.i=null,a=Nr(this,a),gm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},t.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function mm(a,l,h){pm(a,l),0<h.length&&(a.i=null,a.g.set(Nr(a,l),x(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let A=encodeURIComponent(String(p)),P=this.V(p);for(p=0;p<P.length;p++){var b=A;P[p]!==""&&(b+="="+encodeURIComponent(String(P[p]))),a.push(b)}}return this.i=a.join("&")};function Nr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function OT(a,l){l&&!a.j&&(an(a),a.i=null,a.g.forEach(function(h,p){var b=p.toLowerCase();p!=b&&(pm(this,p),mm(this,b,h))},a)),a.j=l}function FT(a,l){let h=new zi;if(c.Image){let p=new Image;p.onload=I(cn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=I(cn,h,"TestLoadImage: error",!1,l,p),p.onabort=I(cn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=I(cn,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function LT(a,l){let h=new zi,p=new AbortController,b=setTimeout(()=>{p.abort(),cn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(A=>{clearTimeout(b),A.ok?cn(h,"TestPingServer: ok",!0,l):cn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(b),cn(h,"TestPingServer: error",!1,l)})}function cn(a,l,h,p,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),p(h)}catch{}}function VT(){this.g=new IT}function jT(a,l,h){let p=h||"";try{lm(a,function(b,A){let P=b;d(b)&&(P=Lu(b)),l.push(p+A+"="+encodeURIComponent(P))})}catch(b){throw l.push(p+"type="+encodeURIComponent("_badmap")),b}}function Yi(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Yi,Vu),Yi.prototype.g=function(){return new vo(this.l,this.j)},Yi.prototype.i=function(a){return function(){return a}}({});function vo(a,l){Fe.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(vo,Fe),t=vo.prototype,t.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,Zi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ym(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ym(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Ji(this):Zi(this),this.readyState==3&&ym(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ji(this))},t.Qa=function(a){this.g&&(this.response=a,Ji(this))},t.ga=function(){this.g&&Ji(this)};function Ji(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Zi(a)}t.setRequestHeader=function(a,l){this.u.append(a,l)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function Zi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vm(a){let l="";return q(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function Ku(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=vm(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):pe(a,l,h))}function ve(a){Fe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ve,Fe);var UT=/^https?$/i,BT=["POST","PUT"];t=ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bu.g(),this.v=this.o?Wg(this.o):Wg(Bu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(A){_m(this,A);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var b in p)h.set(b,p[b]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let A of p.keys())h.set(A,p.get(A));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(BT,l,void 0))||p||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of h)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wm(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){_m(this,A)}};function _m(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Im(a),_o(a)}function Im(a){a.A||(a.A=!0,$e(a,"complete"),$e(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,$e(this,"complete"),$e(this,"abort"),_o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Em(this):this.bb())},t.bb=function(){Em(this)};function Em(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ut(a)!=4||a.Z()!=2)){if(a.u&&Ut(a)==4)Hg(a.Ea,0,a);else if($e(a,"readystatechange"),Ut(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=P===0){var b=String(a.D).match(dm)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),p=!UT.test(b?b.toLowerCase():"")}h=p}if(h)$e(a,"complete"),$e(a,"success");else{a.m=6;try{var A=2<Ut(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",Im(a)}}finally{_o(a)}}}}function _o(a,l){if(a.g){wm(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||$e(a,"ready");try{h.onreadystatechange=p}catch{}}}function wm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Ut(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Ut(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),_T(l)}};function Dm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function $T(a){let l={};a=(a.g&&2<=Ut(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(V(a[p]))continue;var h=T(a[p]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=l[b]||[];l[b]=A,A.push(h)}D(l,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xi(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function Tm(a){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xi("baseRetryDelayMs",5e3,a),this.cb=Xi("retryDelaySeedMs",1e4,a),this.Wa=Xi("forwardChannelMaxRetries",2,a),this.wa=Xi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new sm(a&&a.concurrentRequestLimit),this.Da=new VT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tm.prototype,t.la=8,t.G=1,t.connect=function(a,l,h,p){He(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Pm(this,null,this.W),Eo(this)};function Qu(a){if(bm(a),a.G==3){var l=a.U++,h=jt(a.I);if(pe(h,"SID",a.K),pe(h,"RID",l),pe(h,"TYPE","terminate"),es(a,h),l=new on(a,a.j,l),l.L=2,l.v=yo(jt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=km(l.j,null),l.g.ea(l.v)),l.F=Date.now(),po(l)}Mm(a)}function Io(a){a.g&&(Ju(a),a.g.cancel(),a.g=null)}function bm(a){Io(a),a.u&&(c.clearTimeout(a.u),a.u=null),wo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Eo(a){if(!om(a.h)&&!a.s){a.s=!0;var l=a.Ga;Li||Lg(),Vi||(Li(),Vi=!0),Su.add(l,a),a.B=0}}function HT(a,l){return am(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=qi(v(a.Ga,a,l),xm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new on(this,this.j,a),A=this.o;if(this.S&&(A?(A=m(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Am(this,b,l),h=jt(this.I),pe(h,"RID",a),pe(h,"CVER",22),this.D&&pe(h,"X-HTTP-Session-Id",this.D),es(this,h),A&&(this.O?l="headers="+encodeURIComponent(String(vm(A)))+"&"+l:this.m&&Ku(h,this.m,A)),Wu(this.h,b),this.Ua&&pe(h,"TYPE","init"),this.P?(pe(h,"$req",l),pe(h,"SID","null"),b.T=!0,Hu(b,h,null)):Hu(b,h,l),this.G=2}}else this.G==3&&(a?Cm(this,a):this.i.length==0||om(this.h)||Cm(this))};function Cm(a,l){var h;l?h=l.l:h=a.U++;let p=jt(a.I);pe(p,"SID",a.K),pe(p,"RID",h),pe(p,"AID",a.T),es(a,p),a.m&&a.o&&Ku(p,a.m,a.o),h=new on(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Am(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Wu(a.h,h),Hu(h,p,l)}function es(a,l){a.H&&q(a.H,function(h,p){pe(l,p,h)}),a.l&&lm({},function(h,p){pe(l,p,h)})}function Am(a,l,h){h=Math.min(a.i.length,h);var p=a.l?v(a.l.Na,a.l,a):null;e:{var b=a.i;let A=-1;for(;;){let P=["count="+h];A==-1?0<h?(A=b[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let le=!0;for(let Pe=0;Pe<h;Pe++){let ae=b[Pe].g,Le=b[Pe].map;if(ae-=A,0>ae)A=Math.max(0,b[Pe].g-100),le=!1;else try{jT(Le,P,"req"+ae+"_")}catch{p&&p(Le)}}if(le){p=P.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function Sm(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;Li||Lg(),Vi||(Li(),Vi=!0),Su.add(l,a),a.v=0}}function Yu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=qi(v(a.Fa,a),xm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Nm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=qi(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),Io(this),Nm(this))};function Ju(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Nm(a){a.g=new on(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=jt(a.qa);pe(l,"RID","rpc"),pe(l,"SID",a.K),pe(l,"AID",a.T),pe(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&pe(l,"TO",a.ja),pe(l,"TYPE","xmlhttp"),es(a,l),a.m&&a.o&&Ku(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=yo(jt(l)),h.m=null,h.P=!0,nm(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Io(this),Yu(this),He(19))};function wo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Rm(a,l){var h=null;if(a.g==l){wo(a),Ju(a),a.g=null;var p=2}else if(Gu(a.h,l))h=l.D,cm(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var b=a.B;p=lo(),$e(p,new Zg(p,h)),Eo(a)}else Sm(a);else if(b=l.s,b==3||b==0&&0<l.X||!(p==1&&HT(a,l)||p==2&&Yu(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),b){case 1:Hn(a,5);break;case 4:Hn(a,10);break;case 3:Hn(a,6);break;default:Hn(a,2)}}}function xm(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function Hn(a,l){if(a.j.info("Error code "+l),l==2){var h=v(a.fb,a),p=a.Xa;let b=!p;p=new $n(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||go(p,"https"),yo(p),b?FT(p.toString(),h):LT(p.toString(),h)}else He(2);a.G=0,a.l&&a.l.sa(l),Mm(a),bm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Mm(a){if(a.G=0,a.ka=[],a.l){let l=um(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function Pm(a,l,h){var p=h instanceof $n?jt(h):new $n(h);if(p.g!="")l&&(p.g=l+"."+p.g),mo(p,p.s);else{var b=c.location;p=b.protocol,l=l?l+"."+b.hostname:b.hostname,b=+b.port;var A=new $n(null);p&&go(A,p),l&&(A.g=l),b&&mo(A,b),h&&(A.l=h),p=A}return h=a.D,l=a.ya,h&&l&&pe(p,h,l),pe(p,"VER",a.la),es(a,p),p}function km(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new ve(new Yi({eb:h})):new ve(a.pa),l.Ha(a.J),l}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Om(){}t=Om.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Do(){}Do.prototype.g=function(a,l){return new Ze(a,l)};function Ze(a,l){Fe.call(this),this.g=new Tm(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!V(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!V(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Rr(this)}S(Ze,Fe),Ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ze.prototype.close=function(){Qu(this.g)},Ze.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Lu(a),a=h);l.i.push(new CT(l.Ya++,a)),l.G==3&&Eo(l)},Ze.prototype.N=function(){this.g.l=null,delete this.j,Qu(this.g),delete this.g,Ze.aa.N.call(this)};function Fm(a){ju.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}S(Fm,ju);function Lm(){Uu.call(this),this.status=1}S(Lm,Uu);function Rr(a){this.g=a}S(Rr,Om),Rr.prototype.ua=function(){$e(this.g,"a")},Rr.prototype.ta=function(a){$e(this.g,new Fm(a))},Rr.prototype.sa=function(a){$e(this.g,new Lm)},Rr.prototype.ra=function(){$e(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,Ze.prototype.send=Ze.prototype.o,Ze.prototype.open=Ze.prototype.m,Ze.prototype.close=Ze.prototype.close,Af=Xt.createWebChannelTransport=function(){return new Do},Cf=Xt.getStatEventTarget=function(){return lo()},bf=Xt.Event=Un,Oc=Xt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,Os=Xt.ErrorCode=ho,Xg.COMPLETE="complete",Tf=Xt.EventType=Xg,Kg.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,gi=Xt.WebChannel=Kg,Df=Xt.FetchXmlHttpFactory=Yi,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,wf=Xt.XhrIo=ve}).apply(typeof kc<"u"?kc:typeof self<"u"?self:typeof window<"u"?window:{});var fw="@firebase/firestore";var Me=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Me.UNAUTHENTICATED=new Me(null),Me.GOOGLE_CREDENTIALS=new Me("google-credentials-uid"),Me.FIRST_PARTY=new Me("first-party-uid"),Me.MOCK_USER=new Me("mock-user");var ki="10.13.2";var vr=new bn("@firebase/firestore");function Fs(){return vr.logLevel}function F(t,...e){if(vr.logLevel<=te.DEBUG){let n=e.map(pg);vr.debug(`Firestore (${ki}): ${t}`,...n)}}function tn(t,...e){if(vr.logLevel<=te.ERROR){let n=e.map(pg);vr.error(`Firestore (${ki}): ${t}`,...n)}}function wi(t,...e){if(vr.logLevel<=te.WARN){let n=e.map(pg);vr.warn(`Firestore (${ki}): ${t}`,...n)}}function pg(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function j(t="Unexpected state"){let e=`FIRESTORE (${ki}) INTERNAL ASSERTION FAILED: `+t;throw tn(e),new Error(e)}function he(t,e){t||j()}function H(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends rt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var en=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Uc=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Mf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Me.UNAUTHENTICATED))}shutdown(){}},Pf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},kf=class{constructor(e){this.t=e,this.currentUser=Me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new en;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new en,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>E(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new en)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new Uc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new Me(e)}},Of=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Me.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ff=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Of(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Me.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Vf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new Lf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function vk(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=vk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function Di(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var ke=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var G=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ke(0,0))}static max(){return new t(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $c=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&j(),r===void 0?r=e.length-n:r>e.length-n&&j(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},me=class t extends $c{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},_k=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class t extends $c{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return _k.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new k(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new k(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var L=class t{constructor(e){this.path=e}static fromPath(e){return new t(me.fromString(e))}static fromName(e){return new t(me.fromString(e).popFirst(5))}static empty(){return new t(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new me(e.slice()))}};var jf=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};jf.UNKNOWN_ID=-1;function Ik(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new _r(i,L.empty(),e)}function Ek(t){return new _r(t.readTime,t.key,-1)}var _r=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(G.min(),L.empty(),-1)}static max(){return new t(G.max(),L.empty(),-1)}};function wk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=L.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var Dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function to(t){return E(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==Dk)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Tk(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(t){return t.name==="IndexedDbTransactionError"}var Kw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function _u(t){return t==null}function $s(t){return t===0&&1/t==-1/0}function bk(t){return typeof t=="number"&&Number.isInteger(t)&&!$s(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ck=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sq=[...Ck,"documentOverlays"],Ak=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sk=Ak,Nk=[...Sk,"indexConfiguration","indexState","indexEntries"];var oq=[...Nk,"globals"];function pw(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qw(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ie=class t{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _i(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _i(this.root,e,this.comparator,!1)}getReverseIterator(){return new _i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _i(this.root,e,this.comparator,!0)}},_i=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();let e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}};Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ue=class t{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hc(this.data.getIterator())}getIteratorFrom(e){return new Hc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Hc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ht=class t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ue(st.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Di(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var qc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Be=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qc("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Be.EMPTY_BYTE_STRING=new Be("");var Rk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nn(t){if(he(!!t),typeof t=="string"){let e=0,n=Rk.exec(t);if(he(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ge(t.seconds),nanos:ge(t.nanos)}}function ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function On(t){return typeof t=="string"?Be.fromBase64String(t):Be.fromUint8Array(t)}function gg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mg(t){let e=t.mapValue.fields.__previous_value__;return gg(e)?mg(e):e}function Hs(t){let e=nn(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}var Bf=class{constructor(e,n,r,i,s,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},zc=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Fc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ir(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gg(t)?4:Jw(t)?9007199254740991:Yw(t)?10:11:j()}function Ft(t,e){if(t===e)return!0;let n=Ir(t);if(n!==Ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hs(t).isEqual(Hs(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=nn(i.timestampValue),c=nn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return On(i.bytesValue).isEqual(On(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ge(i.geoPointValue.latitude)===ge(s.geoPointValue.latitude)&&ge(i.geoPointValue.longitude)===ge(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ge(i.integerValue)===ge(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ge(i.doubleValue),c=ge(s.doubleValue);return o===c?$s(o)===$s(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Di(t.arrayValue.values||[],e.arrayValue.values||[],Ft);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(pw(o)!==pw(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ft(o[u],c[u])))return!1;return!0}(t,e);default:return j()}}function qs(t,e){return(t.values||[]).find(n=>Ft(n,e))!==void 0}function Ti(t,e){if(t===e)return 0;let n=Ir(t),r=Ir(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=ge(s.integerValue||s.doubleValue),u=ge(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return gw(t.timestampValue,e.timestampValue);case 4:return gw(Hs(t),Hs(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){let c=On(s),u=On(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=ce(c[d],u[d]);if(f!==0)return f}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ce(ge(s.latitude),ge(o.latitude));return c!==0?c:ce(ge(s.longitude),ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;let g=s.fields||{},v=o.fields||{},I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,S=(u=v.value)===null||u===void 0?void 0:u.arrayValue,x=ce(((d=I?.values)===null||d===void 0?void 0:d.length)||0,((f=S?.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:mw(I,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Fc.mapValue&&o===Fc.mapValue)return 0;if(s===Fc.mapValue)return 1;if(o===Fc.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let v=ce(u[g],f[g]);if(v!==0)return v;let I=Ti(c[u[g]],d[f[g]]);if(I!==0)return I}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw j()}}function gw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=nn(t),r=nn(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function mw(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Ti(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function bi(t){return $f(t)}function $f(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=nn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return On(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return L.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=$f(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${$f(n.fields[o])}`;return i+"}"}(t.mapValue):j()}function yw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hf(t){return!!t&&"integerValue"in t}function yg(t){return!!t&&"arrayValue"in t}function vw(t){return!!t&&"nullValue"in t}function _w(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vc(t){return!!t&&"mapValue"in t}function Yw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Cr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vs(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Jw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var it=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vs(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Vs(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ft(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Cr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Vs(this.value))}};function Zw(t){let e=[];return Cr(t.fields,(n,r)=>{let i=new st([n]);if(Vc(r)){let s=Zw(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ht(e)}var wt=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,G.min(),G.min(),G.min(),it.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,G.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,G.min(),G.min(),it.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,G.min(),G.min(),it.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ci=class{constructor(e,n){this.position=e,this.inclusive=n}};function Iw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=L.comparator(L.fromName(o.referenceValue),n.key):r=Ti(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ew(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ft(t.position[n],e.position[n]))return!1;return!0}var Er=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function xk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Gc=class{},Ce=class t extends Gc{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zf(e,n,r):n==="array-contains"?new Kf(e,r):n==="in"?new Qf(e,r):n==="not-in"?new Yf(e,r):n==="array-contains-any"?new Jf(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Gf(e,r):new Wf(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ti(n,this.value)):n!==null&&Ir(this.value)===Ir(n)&&this.matchesComparison(Ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dt=class t extends Gc{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Xw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Xw(t){return t.op==="and"}function eD(t){return Mk(t)&&Xw(t)}function Mk(t){for(let e of t.filters)if(e instanceof Dt)return!1;return!0}function qf(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+bi(t.value);if(eD(t))return t.filters.map(e=>qf(e)).join(",");{let e=t.filters.map(n=>qf(n)).join(",");return`${t.op}(${e})`}}function tD(t,e){return t instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.field.isEqual(i.field)&&Ft(r.value,i.value)}(t,e):t instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&tD(o,i.filters[c]),!0):!1}(t,e):void j()}function nD(t){return t instanceof Ce?function(n){return`${n.field.canonicalString()} ${n.op} ${bi(n.value)}`}(t):t instanceof Dt?function(n){return n.op.toString()+" {"+n.getFilters().map(nD).join(" ,")+"}"}(t):"Filter"}var zf=class extends Ce{constructor(e,n,r){super(e,n,r),this.key=L.fromName(r.referenceValue)}matches(e){let n=L.comparator(e.key,this.key);return this.matchesComparison(n)}},Gf=class extends Ce{constructor(e,n){super(e,"in",n),this.keys=rD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Wf=class extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=rD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function rD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>L.fromName(r.referenceValue))}var Kf=class extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return yg(n)&&qs(n.arrayValue,this.value)}},Qf=class extends Ce{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&qs(this.value.arrayValue,n)}},Yf=class extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!qs(this.value.arrayValue,n)}},Jf=class extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qs(this.value.arrayValue,r))}};var Zf=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function ww(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Zf(t,e,n,r,i,s,o)}function vg(t){let e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bi(r)).join(",")),e.ue=n}return e.ue}function _g(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ew(t.startAt,e.startAt)&&Ew(t.endAt,e.endAt)}function Xf(t){return L.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Fn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Pk(t,e,n,r,i,s,o,c){return new Fn(t,e,n,r,i,s,o,c)}function Ig(t){return new Fn(t)}function Dw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iD(t){return t.collectionGroup!==null}function js(t){let e=H(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ue(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Er(s,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new Er(st.keyField(),r))}return e.ce}function kt(t){let e=H(t);return e.le||(e.le=kk(e,js(t))),e.le}function kk(t,e){if(t.limitType==="F")return ww(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Er(i.field,s)});let n=t.endAt?new Ci(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ci(t.startAt.position,t.startAt.inclusive):null;return ww(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ep(t,e){let n=t.filters.concat([e]);return new Fn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wc(t,e,n){return new Fn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Iu(t,e){return _g(kt(t),kt(e))&&t.limitType===e.limitType}function sD(t){return`${vg(kt(t))}|lt:${t.limitType}`}function mi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nD(i)).join(", ")}]`),_u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bi(i)).join(",")),`Target(${r})`}(kt(t))}; limitType=${t.limitType})`}function Eu(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):L.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of js(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=Iw(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,js(r),i)||r.endAt&&!function(o,c,u){let d=Iw(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,js(r),i))}(t,e)}function Ok(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oD(t){return(e,n)=>{let r=!1;for(let i of js(t)){let s=Fk(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Fk(t,e,n){let r=t.field.isKeyField()?L.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Ti(u,d):j()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}var Ln=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Qw(this.inner)}size(){return this.innerSize}};var Lk=new Ie(L.comparator);function rn(){return Lk}var aD=new Ie(L.comparator);function Ls(...t){let e=aD;for(let n of t)e=e.insert(n.key,n);return e}function cD(t){let e=aD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function pr(){return Us()}function uD(){return Us()}function Us(){return new Ln(t=>t.toString(),(t,e)=>t.isEqual(e))}var Vk=new Ie(L.comparator),jk=new Ue(L.comparator);function ne(...t){let e=jk;for(let n of t)e=e.add(n);return e}var Uk=new Ue(ce);function Bk(){return Uk}function Eg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$s(e)?"-0":e}}function lD(t){return{integerValue:""+t}}function $k(t,e){return bk(e)?lD(e):Eg(t,e)}var Ai=class{constructor(){this._=void 0}};function Hk(t,e,n){return t instanceof Si?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gg(s)&&(s=mg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof wr?hD(t,e):t instanceof Dr?fD(t,e):function(i,s){let o=dD(i,s),c=Tw(o)+Tw(i.Pe);return Hf(o)&&Hf(i.Pe)?lD(c):Eg(i.serializer,c)}(t,e)}function qk(t,e,n){return t instanceof wr?hD(t,e):t instanceof Dr?fD(t,e):n}function dD(t,e){return t instanceof Ni?function(r){return Hf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Si=class extends Ai{},wr=class extends Ai{constructor(e){super(),this.elements=e}};function hD(t,e){let n=pD(e);for(let r of t.elements)n.some(i=>Ft(i,r))||n.push(r);return{arrayValue:{values:n}}}var Dr=class extends Ai{constructor(e){super(),this.elements=e}};function fD(t,e){let n=pD(e);for(let r of t.elements)n=n.filter(i=>!Ft(i,r));return{arrayValue:{values:n}}}var Ni=class extends Ai{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Tw(t){return ge(t.integerValue||t.doubleValue)}function pD(t){return yg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof wr&&i instanceof wr||r instanceof Dr&&i instanceof Dr?Di(r.elements,i.elements,Ft):r instanceof Ni&&i instanceof Ni?Ft(r.Pe,i.Pe):r instanceof Si&&i instanceof Si}(t.transform,e.transform)}var tp=class{constructor(e,n){this.version=e,this.transformResults=n}},Pn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ri=class{};function gD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kc(t.key,Pn.none()):new Tr(t.key,t.data,Pn.none());{let n=t.data,r=it.empty(),i=new Ue(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lt(t.key,r,new ht(i.toArray()),Pn.none())}}function Gk(t,e,n){t instanceof Tr?function(i,s,o){let c=i.value.clone(),u=Cw(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Lt?function(i,s,o){if(!jc(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Cw(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(mD(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bs(t,e,n,r){return t instanceof Tr?function(s,o,c,u){if(!jc(s.precondition,o))return c;let d=s.value.clone(),f=Aw(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lt?function(s,o,c,u){if(!jc(s.precondition,o))return c;let d=Aw(s.fieldTransforms,u,o),f=o.data;return f.setAll(mD(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,c){return jc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function Wk(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=dD(r.transform,i||null);s!=null&&(n===null&&(n=it.empty()),n.set(r.field,s))}return n||null}function bw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Di(r,i,(s,o)=>zk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Tr=class extends Ri{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lt=class extends Ri{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function mD(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Cw(t,e,n){let r=new Map;he(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,qk(o,c,n[i]))}return r}function Aw(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Hk(s,o,e))}return r}var Kc=class extends Ri{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},np=class extends Ri{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rp=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Gk(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Bs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=uD();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=gD(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Di(this.mutations,e.mutations,(n,r)=>bw(n,r))&&Di(this.baseMutations,e.baseMutations,(n,r)=>bw(n,r))}},ip=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){he(e.mutations.length===r.length);let i=function(){return Vk}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var sp=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var op=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Te,ie;function Kk(t){switch(t){default:return j();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function yD(t){if(t===void 0)return tn("GRPC error has no .code"),N.UNKNOWN;switch(t){case Te.OK:return N.OK;case Te.CANCELLED:return N.CANCELLED;case Te.UNKNOWN:return N.UNKNOWN;case Te.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Te.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Te.INTERNAL:return N.INTERNAL;case Te.UNAVAILABLE:return N.UNAVAILABLE;case Te.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Te.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Te.NOT_FOUND:return N.NOT_FOUND;case Te.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Te.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Te.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Te.ABORTED:return N.ABORTED;case Te.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Te.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Te.DATA_LOSS:return N.DATA_LOSS;default:return j()}}(ie=Te||(Te={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var Sw=null;function Qk(){return new TextEncoder}var Yk=new Mn([4294967295,4294967295],0);function Nw(t){let e=Qk().encode(t),n=new Ef;return n.update(e),new Uint8Array(n.digest())}function Rw(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mn([n,r],0),new Mn([i,s],0)]}var ap=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gr(`Invalid padding: ${n}`);if(r<0)throw new gr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Mn.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Mn.fromNumber(r)));return i.compare(Yk)===1&&(i=new Mn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Nw(e),[r,i]=Rw(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=Nw(e),[r,i]=Rw(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},gr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qc=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,zs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(G.min(),i,new Ie(ce),rn(),ne())}},zs=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ne(),ne(),ne())}};var Ii=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Yc=class{constructor(e,n){this.targetId=e,this.me=n}},Jc=class{constructor(e,n,r=Be.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Zc=class{constructor(){this.fe=0,this.ge=Mw(),this.pe=Be.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:j()}}),new zs(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Mw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},cp=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=rn(),this.qe=xw(),this.Qe=new Ie(ce)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:j()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Xf(s))if(r===0){let o=new L(s.path);this.Ue(n,o,wt.newNoDocument(o,G.min()))}else he(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}Sw?.et(function(f,g,v,I,S){var x,R,O,V,$,Q;let ye={localCacheCount:f,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},q=g.unchangedNames;return q&&(ye.bloomFilter={applied:S===0,hashCount:(x=q?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(V=(O=(R=q?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&V!==void 0?V:0,padding:(Q=($=q?.bits)===null||$===void 0?void 0:$.padding)!==null&&Q!==void 0?Q:0,mightContain:D=>{var m;return(m=I?.mightContain(D))!==null&&m!==void 0&&m}}),ye}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=On(r).toUint8Array()}catch(u){if(u instanceof qc)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ap(o,i,s)}catch(u){return wi(u instanceof gr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Xf(c.target)){let u=new L(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,wt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ne();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Qc(e,n,this.Qe,this.ke,r);return this.ke=rn(),this.qe=xw(),this.Qe=new Ie(ce),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Zc,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ue(ce),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zc),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function xw(){return new Ie(L.comparator)}function Mw(){return new Ie(L.comparator)}var Jk={asc:"ASCENDING",desc:"DESCENDING"},Zk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xk={and:"AND",or:"OR"},up=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function lp(t,e){return t.useProto3Json||_u(e)?e:{value:e}}function Xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eO(t,e){return Xc(t,e.toTimestamp())}function Ot(t){return he(!!t),G.fromTimestamp(function(n){let r=nn(n);return new ke(r.seconds,r.nanos)}(t))}function wg(t,e){return dp(t,e).canonicalString()}function dp(t,e){let n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _D(t){let e=me.fromString(t);return he(TD(e)),e}function hp(t,e){return wg(t.databaseId,e.path)}function Sf(t,e){let n=_D(e);if(n.get(1)!==t.databaseId.projectId)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new L(ED(n))}function ID(t,e){return wg(t.databaseId,e)}function tO(t){let e=_D(t);return e.length===4?me.emptyPath():ED(e)}function fp(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ED(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Pw(t,e,n){return{name:hp(t,e),fields:n.value.mapValue.fields}}function nO(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:j()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(he(f===void 0||typeof f=="string"),Be.fromBase64String(f||"")):(he(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Be.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?N.UNKNOWN:yD(d.code);return new k(f,d.message||"")}(o);n=new Jc(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Sf(t,r.document.name),s=Ot(r.document.updateTime),o=r.document.createTime?Ot(r.document.createTime):G.min(),c=new it({mapValue:{fields:r.document.fields}}),u=wt.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Ii(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Sf(t,r.document),s=r.readTime?Ot(r.readTime):G.min(),o=wt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Ii([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Sf(t,r.document),s=r.removedTargetIds||[];n=new Ii([],s,i,null)}else{if(!("filter"in e))return j();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new op(i,s),c=r.targetId;n=new Yc(c,o)}}return n}function rO(t,e){let n;if(e instanceof Tr)n={update:Pw(t,e.key,e.value)};else if(e instanceof Kc)n={delete:hp(t,e.key)};else if(e instanceof Lt)n={update:Pw(t,e.key,e.data),updateMask:hO(e.fieldMask)};else{if(!(e instanceof np))return j();n={verify:hp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Si)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof wr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ni)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw j()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:j()}(t,e.precondition)),n}function iO(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ot(i.updateTime):Ot(s);return o.isEqual(G.min())&&(o=Ot(s)),new tp(o,i.transformResults||[])}(n,e))):[]}function sO(t,e){return{documents:[ID(t,e.path)]}}function oO(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ID(t,i);let s=function(d){if(d.length!==0)return DD(Dt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:yi(v.field),direction:uO(v.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=lp(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function aO(t){let e=tO(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){he(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){let v=wD(g);return v instanceof Dt&&eD(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(v=>function(S){return new Er(vi(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(g){let v;return v=typeof g=="object"?g.value:g,_u(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){let v=!!g.before,I=g.values||[];return new Ci(I,v)}(n.startAt));let d=null;return n.endAt&&(d=function(g){let v=!g.before,I=g.values||[];return new Ci(I,v)}(n.endAt)),Pk(e,i,o,s,c,"F",u,d)}function cO(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=vi(n.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vi(n.unaryFilter.field);return Ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=vi(n.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=vi(n.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(t):t.fieldFilter!==void 0?function(n){return Ce.create(vi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dt.create(n.compositeFilter.filters.map(r=>wD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j()}}(n.compositeFilter.op))}(t):j()}function uO(t){return Jk[t]}function lO(t){return Zk[t]}function dO(t){return Xk[t]}function yi(t){return{fieldPath:t.canonicalString()}}function vi(t){return st.fromServerFormat(t.fieldPath)}function DD(t){return t instanceof Ce?function(n){if(n.op==="=="){if(_w(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NAN"}};if(vw(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_w(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NAN"}};if(vw(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yi(n.field),op:lO(n.op),value:n.value}}}(t):t instanceof Dt?function(n){let r=n.getFilters().map(i=>DD(i));return r.length===1?r[0]:{compositeFilter:{op:dO(n.op),filters:r}}}(t):j()}function hO(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Gs=class t{constructor(e,n,r,i,s=G.min(),o=G.min(),c=Be.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var pp=class{constructor(e){this.ct=e}};function fO(t){let e=aO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wc(e,e.limit,"L"):e}var eu=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(ge(e.integerValue));else if("doubleValue"in e){let r=ge(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),$s(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=nn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(On(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Jw(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Yw(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):j()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(ge(c)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),L.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};eu.vt=new eu;var gp=class{constructor(){this.un=new mp}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(_r.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},mp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ue(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ue(me.comparator)).toArray()}};var cq=new Uint8Array(0);var Mt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(41943040,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);var Ws=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var yp=class{constructor(){this.changes=new Ln(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vp=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var _p=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bs(r.mutation,i,ht.empty(),ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){let i=pr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ls();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=pr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=rn(),o=Us(),c=function(){return Us()}();return n.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Lt)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Bs(f.mutation,d,f.mutation.getFieldMask(),ke.now())):o.set(d.key,ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return c.set(d,new vp(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Us(),i=new Ie((o,c)=>o-c),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=n.get(u);if(d===null)return;let f=r.get(u)||ht.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||ne()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=uD();f.forEach(v=>{if(!s.has(v)){let I=gD(n.get(v),r.get(v));I!==null&&g.set(v,I),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return L.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(pr()),c=-1,u=s;return o.next(d=>M.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ne())).next(f=>({batchId:c,changes:cD(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new L(n)).next(r=>{let i=Ls();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Ls();return this.indexManager.getCollectionParents(e,s).next(c=>M.forEach(c,u=>{let d=function(g,v){return new Fn(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,wt.newInvalidDocument(f)))});let c=Ls();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&Bs(f.mutation,d,ht.empty(),ke.now()),Eu(n,d)&&(c=c.insert(u,d))}),c})}};var Ip=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ot(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:fO(i.bundledQuery),readTime:Ot(i.readTime)}}(n)),M.resolve()}};var Ep=class{constructor(){this.overlays=new Ie(L.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=pr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=pr(),s=n.length+1,o=new L(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=pr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=pr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return M.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sp(n,r));let s=this.Ir.get(n);s===void 0&&(s=ne(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var wp=class{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var Ks=class{constructor(){this.Tr=new Ue(be.Er),this.dr=new Ue(be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new L(new me([])),r=new be(n,e),i=new be(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new L(new me([])),r=new be(n,e),i=new be(n,e+1),s=ne();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},be=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return L.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||L.comparator(e.key,n.key)}};var Dp=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ue(be.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new rp(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new be(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(ce);return n.forEach(i=>{let s=new be(i,0),o=new be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;L.isDocumentKey(s)||(s=s.child(""));let o=new be(new L(s),0),c=new Ue(ce);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),M.resolve(this.Cr(c))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){he(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{let s=new be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new be(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Tp=class{constructor(e){this.Mr=e,this.docs=function(){return new Ie(L.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=rn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rn(),o=n.path,c=new L(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||wk(Ek(f),r)<=0||(i.has(f.key)||Eu(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){j()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bp(this)}getSize(e){return M.resolve(this.size)}},bp=class extends yp{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Cp=class{constructor(e){this.persistence=e,this.Nr=new Ln(n=>vg(n),_g),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ks,this.targetCount=0,this.kr=Ws.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}};var Ap=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Kw(0),this.Kr=!1,this.Kr=!0,this.$r=new wp,this.referenceDelegate=e(this),this.Ur=new Cp(this),this.indexManager=new gp,this.remoteDocumentCache=function(i){return new Tp(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new pp(n),this.Gr=new Ip(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ep,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Dp(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Sp(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Sp=class extends Uf{constructor(e){super(),this.currentSequenceNumber=e}},Np=class t{constructor(e){this.persistence=e,this.Jr=new Ks,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw j()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=L.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,G.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Rp=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var xp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Mp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iE()?8:Tk(Re())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new xp;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Fs()<=te.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",mi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Fs()<=te.DEBUG&&F("QueryEngine","Query:",mi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Fs()<=te.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",mi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(n))):M.resolve())}Yi(e,n){if(Dw(n))return M.resolve(null);let r=kt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Wc(n,null,"F"),r=kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ne(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Wc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return Dw(n)||i.isEqual(G.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?M.resolve(null):(Fs()<=te.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mi(n)),this.rs(e,o,n,Ik(i,-1)).next(c=>c))})}ts(e,n){let r=new Ue(oD(e));return n.forEach((i,s)=>{Eu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Fs()<=te.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",mi(n)),this.Ji.getDocumentsMatchingQuery(e,n,_r.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Pp=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ie(ce),this._s=new Ln(s=>vg(s),_g),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _p(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function pO(t,e,n,r){return new Pp(t,e,n,r)}function bD(t,e){return E(this,null,function*(){let n=H(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=ne();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function gO(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){let g=d.batch,v=g.keys(),I=M.resolve();return v.forEach(S=>{I=I.next(()=>f.getEntry(u,S)).next(x=>{let R=d.docVersions.get(S);he(R!==null),x.version.compareTo(R)<0&&(g.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),f.addEntry(x)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ne();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CD(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function mO(t,e){let n=H(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let c=[];e.targetChanges.forEach((f,g)=>{let v=i.get(g);if(!v)return;c.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,g)));let I=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(Be.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(g,I),function(x,R,O){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(v,I,f)&&c.push(n.Ur.updateTargetData(s,I))});let u=rn(),d=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(yO(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(G.min())){let f=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}function yO(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=rn();return n.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(G.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function vO(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _O(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Gs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function kp(t,e,n){return E(this,null,function*(){let r=H(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!no(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function kw(t,e,n){let r=H(t),i=G.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let g=H(u),v=g._s.get(f);return v!==void 0?M.resolve(g.os.get(v)):g.Ur.getTargetData(d,f)}(r,o,kt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:G.min(),n?s:ne())).next(c=>(IO(r,Ok(e),c),{documents:c,Ts:s})))}function IO(t,e,n){let r=t.us.get(e)||G.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var tu=class{constructor(){this.activeTargetIds=Bk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Op=class{constructor(){this.so=new tu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new tu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Fp=class{_o(e){}shutdown(){}};var nu=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Lc=null;function Nf(){return Lc===null?Lc=function(){return 268435456+Math.round(2147483648*Math.random())}():Lc++,"0x"+Lc.toString(16)}var EO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Lp=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var je="WebChannelConnection",Vp=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let c=Nf(),u=this.xo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(f=>(F("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw wi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ki}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=EO[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Nf();return new Promise((o,c)=>{let u=new wf;u.setWithCredentials(!0),u.listenOnce(Tf.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Os.NO_ERROR:let f=u.getResponseJson();F(je,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Os.TIMEOUT:F(je,`RPC '${e}' ${s} timed out`),c(new k(N.DEADLINE_EXCEEDED,"Request time out"));break;case Os.HTTP_ERROR:let g=u.getStatus();if(F(je,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);let I=v?.error;if(I&&I.status&&I.message){let S=function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(O)>=0?O:N.UNKNOWN}(I.status);c(new k(S,I.message))}else c(new k(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new k(N.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{F(je,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);F(je,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){let i=Nf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Af(),c=Cf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new Df({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=s.join("");F(je,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=o.createWebChannel(f,u),v=!1,I=!1,S=new Lp({Io:R=>{I?F(je,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(v||(F(je,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),F(je,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),x=(R,O,V)=>{R.listen(O,$=>{try{V($)}catch(Q){setTimeout(()=>{throw Q},0)}})};return x(g,gi.EventType.OPEN,()=>{I||(F(je,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),x(g,gi.EventType.CLOSE,()=>{I||(I=!0,F(je,`RPC '${e}' stream ${i} transport closed`),S.So())}),x(g,gi.EventType.ERROR,R=>{I||(I=!0,wi(je,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new k(N.UNAVAILABLE,"The operation could not be completed")))}),x(g,gi.EventType.MESSAGE,R=>{var O;if(!I){let V=R.data[0];he(!!V);let $=V,Q=$.error||((O=$[0])===null||O===void 0?void 0:O.error);if(Q){F(je,`RPC '${e}' stream ${i} received error:`,Q);let ye=Q.status,q=function(y){let w=Te[y];if(w!==void 0)return yD(w)}(ye),D=Q.message;q===void 0&&(q=N.INTERNAL,D="Unknown error status: "+ye+" with message "+Q.message),I=!0,S.So(new k(q,D)),g.close()}else F(je,`RPC '${e}' stream ${i} received:`,V),S.bo(V)}}),x(c,bf.STAT_EVENT,R=>{R.stat===Oc.PROXY?F(je,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Oc.NOPROXY&&F(je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function Rf(){return typeof document<"u"?document:null}function wu(t){return new up(t,!0)}var ru=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var iu=class{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ru(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(tn(n.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new k(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jp=class extends iu{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=nO(this.serializer,e),r=function(s){if(!("targetChange"in s))return G.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?Ot(o.readTime):G.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=fp(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=Xf(u)?{documents:sO(s,u)}:{query:oO(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=vD(s,o.resumeToken);let d=lp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(G.min())>0){c.readTime=Xc(s,o.snapshotVersion.toTimestamp());let d=lp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=cO(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=fp(this.serializer),n.removeTarget=e,this.a_(n)}},Up=class extends iu{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=iO(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=fp(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>rO(this.serializer,r))};this.a_(n)}};var Bp=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,dp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(N.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,dp(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},$p=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tn(n),this.D_=!1):F("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Hp=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>E(this,null,function*(){Ar(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return E(this,null,function*(){let d=H(u);d.L_.add(4),yield ro(d),d.q_.set("Unknown"),d.L_.delete(4),yield Du(d)})}(this))}))}),this.q_=new $p(r,i)}};function Du(t){return E(this,null,function*(){if(Ar(t))for(let e of t.B_)yield e(!0)})}function ro(t){return E(this,null,function*(){for(let e of t.B_)yield e(!1)})}function AD(t,e){let n=H(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Cg(n)?bg(n):Oi(n).r_()&&Tg(n,e))}function Dg(t,e){let n=H(t),r=Oi(n);n.N_.delete(e),r.r_()&&SD(n,e),n.N_.size===0&&(r.r_()?r.o_():Ar(n)&&n.q_.set("Unknown"))}function Tg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oi(t).A_(e)}function SD(t,e){t.Q_.xe(e),Oi(t).R_(e)}function bg(t){t.Q_=new cp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oi(t).start(),t.q_.v_()}function Cg(t){return Ar(t)&&!Oi(t).n_()&&t.N_.size>0}function Ar(t){return H(t).L_.size===0}function ND(t){t.Q_=void 0}function wO(t){return E(this,null,function*(){t.q_.set("Online")})}function DO(t){return E(this,null,function*(){t.N_.forEach((e,n)=>{Tg(t,e)})})}function TO(t,e){return E(this,null,function*(){ND(t),Cg(t)?(t.q_.M_(e),bg(t)):t.q_.set("Unknown")})}function bO(t,e,n){return E(this,null,function*(){if(t.q_.set("Online"),e instanceof Jc&&e.state===2&&e.cause)try{yield function(i,s){return E(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield su(t,r)}else if(e instanceof Ii?t.Q_.Ke(e):e instanceof Yc?t.Q_.He(e):t.Q_.We(e),!n.isEqual(G.min()))try{let r=yield CD(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Be.EMPTY_BYTE_STRING,f.snapshotVersion)),SD(s,u);let g=new Gs(f.target,u,d,f.sequenceNumber);Tg(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield su(t,r)}})}function su(t,e,n){return E(this,null,function*(){if(!no(e))throw e;t.L_.add(1),yield ro(t),t.q_.set("Offline"),n||(n=()=>CD(t.localStore)),t.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Du(t)}))})}function RD(t,e){return e().catch(n=>su(t,n,e))}function Tu(t){return E(this,null,function*(){let e=H(t),n=Vn(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CO(e);)try{let i=yield vO(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,AO(e,i)}catch(i){yield su(e,i)}xD(e)&&MD(e)})}function CO(t){return Ar(t)&&t.O_.length<10}function AO(t,e){t.O_.push(e);let n=Vn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xD(t){return Ar(t)&&!Vn(t).n_()&&t.O_.length>0}function MD(t){Vn(t).start()}function SO(t){return E(this,null,function*(){Vn(t).p_()})}function NO(t){return E(this,null,function*(){let e=Vn(t);for(let n of t.O_)e.m_(n.mutations)})}function RO(t,e,n){return E(this,null,function*(){let r=t.O_.shift(),i=ip.from(r,e,n);yield RD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Tu(t)})}function xO(t,e){return E(this,null,function*(){e&&Vn(t).V_&&(yield function(r,i){return E(this,null,function*(){if(function(o){return Kk(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();Vn(r).s_(),yield RD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Tu(r)}})}(t,e)),xD(t)&&MD(t)})}function Ow(t,e){return E(this,null,function*(){let n=H(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Ar(n);n.L_.add(3),yield ro(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Du(n)})}function MO(t,e){return E(this,null,function*(){let n=H(t);e?(n.L_.delete(2),yield Du(n)):e||(n.L_.add(2),yield ro(n),n.q_.set("Unknown"))})}function Oi(t){return t.K_||(t.K_=function(n,r,i){let s=H(n);return s.w_(),new jp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:wO.bind(null,t),Ro:DO.bind(null,t),mo:TO.bind(null,t),d_:bO.bind(null,t)}),t.B_.push(e=>E(this,null,function*(){e?(t.K_.s_(),Cg(t)?bg(t):t.q_.set("Unknown")):(yield t.K_.stop(),ND(t))}))),t.K_}function Vn(t){return t.U_||(t.U_=function(n,r,i){let s=H(n);return s.w_(),new Up(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SO.bind(null,t),mo:xO.bind(null,t),f_:NO.bind(null,t),g_:RO.bind(null,t)}),t.B_.push(e=>E(this,null,function*(){e?(t.U_.s_(),yield Tu(t)):(yield t.U_.stop(),t.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var qp=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ag(t,e){if(tn("AsyncQueue",`${e}: ${t}`),no(t))return new k(N.UNAVAILABLE,`${e}: ${t}`);throw t}var ou=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||L.comparator(n.key,r.key):(n,r)=>L.comparator(n.key,r.key),this.keyedMap=Ls(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var au=class{constructor(){this.W_=new Ie(L.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):j():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},xi=class t{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,ou.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var zp=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Gp=class{constructor(){this.queries=Fw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=H(n),s=i.queries;i.queries=Fw(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new k(N.ABORTED,"Firestore shutting down"))}};function Fw(){return new Ln(t=>sD(t),Iu)}function PO(t,e){return E(this,null,function*(){let n=H(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new zp,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=Ag(o,`Initialization of query '${mi(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Sg(n)})}function kO(t,e){return E(this,null,function*(){let n=H(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function OO(t,e){let n=H(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Sg(n)}function FO(t,e,n){let r=H(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function Sg(t){t.Y_.forEach(e=>{e.next()})}var Wp,Lw;(Lw=Wp||(Wp={})).ea="default",Lw.Cache="cache";var Kp=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wp.Cache}};var cu=class{constructor(e){this.key=e}},uu=class{constructor(e){this.key=e}},Qp=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=oD(e),this.Ra=new ou(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new au,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let v=i.get(f),I=Eu(this.query,g)?g:null,S=!!v&&this.mutatedKeys.has(v.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),R=!1;v&&I?v.data.isEqual(I.data)?S!==x&&(r.track({type:3,doc:I}),R=!0):this.ga(v,I)||(r.track({type:2,doc:I}),R=!0,(u&&this.Aa(I,u)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!v&&I?(r.track({type:0,doc:I}),R=!0):v&&!I&&(r.track({type:1,doc:v}),R=!0,(u||d)&&(c=!0)),R&&(I?(o=o.add(I),s=x?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(I,S){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return x(I)-x(S)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new xi(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new au,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uu(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cu(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Yp=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Jp=class{constructor(e){this.key=e,this.va=!1}},Zp=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ln(c=>sD(c),Iu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(L.comparator),this.Na=new Map,this.La=new Ks,this.Ba={},this.ka=new Map,this.qa=Ws.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function LO(t,e,n=!0){return E(this,null,function*(){let r=VD(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield PD(r,e,n,!0),i})}function VO(t,e){return E(this,null,function*(){let n=VD(t);yield PD(n,e,!0,!1)})}function PD(t,e,n,r){return E(this,null,function*(){let i=yield _O(t.localStore,kt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),c;return r&&(c=yield jO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&AD(t.remoteStore,i),c})}function jO(t,e,n,r,i){return E(this,null,function*(){t.Ka=(g,v,I)=>function(x,R,O,V){return E(this,null,function*(){let $=R.view.ma(O);$.ns&&($=yield kw(x.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,$)));let Q=V&&V.targetChanges.get(R.targetId),ye=V&&V.targetMismatches.get(R.targetId)!=null,q=R.view.applyChanges($,x.isPrimaryClient,Q,ye);return jw(x,R.targetId,q.wa),q.snapshot})}(t,g,v,I);let s=yield kw(t.localStore,e,!0),o=new Qp(e,s.Ts),c=o.ma(s.documents),u=zs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);jw(t,n,d.wa);let f=new Yp(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot})}function UO(t,e,n){return E(this,null,function*(){let r=H(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Iu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield kp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Dg(r.remoteStore,i.targetId),Xp(r,i.targetId)}).catch(to))):(Xp(r,i.targetId),yield kp(r.localStore,i.targetId,!0))})}function BO(t,e){return E(this,null,function*(){let n=H(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dg(n.remoteStore,r.targetId))})}function $O(t,e,n){return E(this,null,function*(){let r=QO(t);try{let i=yield function(o,c){let u=H(o),d=ke.now(),f=c.reduce((I,S)=>I.add(S.key),ne()),g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let S=rn(),x=ne();return u.cs.getEntries(I,f).next(R=>{S=R,S.forEach((O,V)=>{V.isValidDocument()||(x=x.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,S)).next(R=>{g=R;let O=[];for(let V of c){let $=Wk(V,g.get(V.key).overlayedDocument);$!=null&&O.push(new Lt(V.key,$,Zw($.value.mapValue),Pn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,O,c)}).next(R=>{v=R;let O=R.applyToLocalDocumentSet(g,x);return u.documentOverlayCache.saveOverlays(I,R.batchId,O)})}).then(()=>({batchId:v.batchId,changes:cD(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ie(ce)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),yield io(r,i.changes),yield Tu(r.remoteStore)}catch(i){let s=Ag(i,"Failed to persist write");n.reject(s)}})}function kD(t,e){return E(this,null,function*(){let n=H(t);try{let r=yield mO(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?he(o.va):i.removedDocuments.size>0&&(he(o.va),o.va=!1))}),yield io(n,r,e)}catch(r){yield to(r)}})}function Vw(t,e,n){let r=H(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=H(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let v of g.j_)v.Z_(c)&&(d=!0)}),d&&Sg(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function HO(t,e,n){return E(this,null,function*(){let r=H(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ie(L.comparator);o=o.insert(s,wt.newNoDocument(s,G.min()));let c=ne().add(s),u=new Qc(G.min(),new Map,new Ie(ce),o,c);yield kD(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ng(r)}else yield kp(r.localStore,e,!1).then(()=>Xp(r,e,n)).catch(to)})}function qO(t,e){return E(this,null,function*(){let n=H(t),r=e.batch.batchId;try{let i=yield gO(n.localStore,e);FD(n,r,null),OD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield io(n,i)}catch(i){yield to(i)}})}function zO(t,e,n){return E(this,null,function*(){let r=H(t);try{let i=yield function(o,c){let u=H(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(he(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);FD(r,e,n),OD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield io(r,i)}catch(i){yield to(i)}})}function OD(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function FD(t,e,n){let r=H(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||LD(t,r)})}function LD(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Dg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ng(t))}function jw(t,e,n){for(let r of n)r instanceof cu?(t.La.addReference(r.key,e),GO(t,r)):r instanceof uu?(F("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||LD(t,r.key)):j()}function GO(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(F("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ng(t))}function Ng(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new L(me.fromString(e)),r=t.qa.next();t.Na.set(r,new Jp(n)),t.Oa=t.Oa.insert(n,r),AD(t.remoteStore,new Gs(kt(Ig(n.path)),r,"TargetPurposeLimboResolution",Kw.oe))}}function io(t,e,n){return E(this,null,function*(){let r=H(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=n?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=Rp.Wi(u.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,d){return E(this,null,function*(){let f=H(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(d,v=>M.forEach(v.$i,I=>f.persistence.referenceDelegate.addReference(g,v.targetId,I)).next(()=>M.forEach(v.Ui,I=>f.persistence.referenceDelegate.removeReference(g,v.targetId,I)))))}catch(g){if(!no(g))throw g;F("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let v=g.targetId;if(!g.fromCache){let I=f.os.get(v),S=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(v,x)}}})}(r.localStore,s))})}function WO(t,e){return E(this,null,function*(){let n=H(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield bD(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new k(N.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield io(n,r.hs)}})}function KO(t,e){let n=H(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function VD(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HO.bind(null,e),e.Ca.d_=OO.bind(null,e.eventManager),e.Ca.$a=FO.bind(null,e.eventManager),e}function QO(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zO.bind(null,e),e}var lu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return E(this,null,function*(){this.serializer=wu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return pO(this.persistence,new Mp,e.initialUser,this.serializer)}createPersistence(e){return new Ap(Np.Zr,this.serializer)}createSharedClientState(e){return new Op}terminate(){return E(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var eg=class{initialize(e,n){return E(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WO.bind(null,this.syncEngine),yield MO(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Gp}()}createDatastore(e){let n=wu(e.databaseInfo.databaseId),r=function(s){return new Vp(s)}(e.databaseInfo);return function(s,o,c,u){return new Bp(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new Hp(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Vw(this.syncEngine,n,0),function(){return nu.D()?new nu:new Fp}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){let g=new Zp(i,s,o,c,u,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return E(this,null,function*(){var e,n;yield function(i){return E(this,null,function*(){let s=H(i);F("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ro(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var tg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var ng=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Me.UNAUTHENTICATED,this.clientId=Bc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>E(this,null,function*(){F("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ag(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function xf(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>E(this,null,function*(){r.isEqual(i)||(yield bD(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Uw(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield JO(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ow(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ow(e.remoteStore,i)),t._onlineComponents=e})}function YO(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function JO(t){return E(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!YO(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),yield xf(t,new lu)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield xf(t,new lu);return t._offlineComponents})}function jD(t){return E(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield Uw(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield Uw(t,new eg))),t._onlineComponents})}function ZO(t){return jD(t).then(e=>e.syncEngine)}function Bw(t){return E(this,null,function*(){let e=yield jD(t),n=e.eventManager;return n.onListen=LO.bind(null,e.syncEngine),n.onUnlisten=UO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BO.bind(null,e.syncEngine),n})}function UD(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var $w=new Map;function BD(t,e,n){if(!n)throw new k(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XO(t,e,n,r){if(e===!0&&r===!0)throw new k(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hw(t){if(!L.isDocumentKey(t))throw new k(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qw(t){if(L.isDocumentKey(t))throw new k(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j()}function yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=bu(t);throw new k(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function e1(t,e){if(e<=0)throw new k(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var du=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Mi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new du({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new du(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Mf;switch(r.type){case"firstParty":return new Ff(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=$w.get(n);r&&(F("ComponentProvider","Removing Datastore"),$w.delete(n),r.terminate())}(this),Promise.resolve()}};function $D(t,e,n,r={}){var i;let s=(t=yr(t,Mi))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Me.MOCK_USER;else{c=ZI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new k(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Me(d)}t._authCredentials=new Pf(new Uc(c,u))}}var jn=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Je=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},kn=class t extends jn{constructor(e,n,r){super(e,n,Ig(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new L(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function HD(t,e,...n){if(t=xe(t),BD("collection","path",e),t instanceof Mi){let r=me.fromString(e,...n);return qw(r),new kn(t,null,r)}{if(!(t instanceof Je||t instanceof kn))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return qw(r),new kn(t.firestore,null,r)}}function Rg(t,e,...n){if(t=xe(t),arguments.length===1&&(e=Bc.newId()),BD("doc","path",e),t instanceof Mi){let r=me.fromString(e,...n);return Hw(r),new Je(t,null,new L(r))}{if(!(t instanceof Je||t instanceof kn))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return Hw(r),new Je(t.firestore,t instanceof kn?t.converter:null,new L(r))}}var rg=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ru(this,"async_queue_retry"),this.Eu=()=>{let n=Rf();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Rf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new en;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return E(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!no(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw tn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=qp.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&j()}verifyOperationInProgress(){}mu(){return E(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function zw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var br=class extends Mi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new rg}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||GD(this),this._firestoreClient.terminate()}};function qD(t,e){let n=typeof t=="object"?t:ui(),r=typeof t=="string"?t:e||"(default)",i=bs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=JI("firestore");s&&$D(i,...s)}return i}function zD(t){return t._firestoreClient||GD(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function GD(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,d,f){return new Bf(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,UD(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new ng(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Qs=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Be.fromBase64String(e))}catch(n){throw new k(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Pi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ys=class{constructor(e){this._methodName=e}};var Js=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var Zs=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var t1=/^__.*__$/,ig=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tr(e,this.data,n,this.fieldTransforms)}},hu=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function WD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var sg=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return pu(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(WD(this.wu)&&t1.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},og=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wu(e)}Nu(e,n,r,i=!1){return new sg({wu:e,methodName:n,Ou:r,path:st.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xg(t){let e=t._freezeSettings(),n=wu(t._databaseId);return new og(t._databaseId,!!e.ignoreUndefinedProperties,n)}function n1(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);Mg("Data must be an object, but it was:",o,r);let c=KD(r,o),u,d;if(s.merge)u=new ht(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let g of s.mergeFields){let v=ag(e,g,n);if(!o.contains(v))throw new k(N.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);YD(f,v)||f.push(v)}u=new ht(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new ig(new it(c),u,d)}var fu=class t extends Ys{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function r1(t,e,n,r){let i=t.Nu(1,e,n);Mg("Data must be an object, but it was:",i,r);let s=[],o=it.empty();Cr(r,(u,d)=>{let f=Pg(e,u,n);d=xe(d);let g=i.Cu(f);if(d instanceof fu)s.push(f);else{let v=so(d,g);v!=null&&(s.push(f),o.set(f,v))}});let c=new ht(s);return new hu(o,c,i.fieldTransforms)}function i1(t,e,n,r,i,s){let o=t.Nu(1,e,n),c=[ag(e,r,n)],u=[i];if(s.length%2!=0)throw new k(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)c.push(ag(e,s[v])),u.push(s[v+1]);let d=[],f=it.empty();for(let v=c.length-1;v>=0;--v)if(!YD(d,c[v])){let I=c[v],S=u[v];S=xe(S);let x=o.Cu(I);if(S instanceof fu)d.push(I);else{let R=so(S,x);R!=null&&(d.push(I),f.set(I,R))}}let g=new ht(d);return new hu(f,g,o.fieldTransforms)}function s1(t,e,n,r=!1){return so(n,t.Nu(r?4:3,e))}function so(t,e){if(QD(t=xe(t)))return Mg("Unsupported field value:",e,t),KD(t,e);if(t instanceof Ys)return function(r,i){if(!WD(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=so(c,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $k(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ke.fromDate(r);return{timestampValue:Xc(i.serializer,s)}}if(r instanceof ke){let s=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xc(i.serializer,s)}}if(r instanceof Js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qs)return{bytesValue:vD(i.serializer,r._byteString)};if(r instanceof Je){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zs)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return Eg(c.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${bu(r)}`)}(t,e)}function KD(t,e){let n={};return Qw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cr(t,(r,i)=>{let s=so(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Js||t instanceof Qs||t instanceof Je||t instanceof Ys||t instanceof Zs)}function Mg(t,e,n){if(!QD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=bu(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function ag(t,e,n){if((e=xe(e))instanceof Pi)return e._internalPath;if(typeof e=="string")return Pg(t,e);throw pu("Field path arguments must be of type string or ",t,!1,void 0,n)}var o1=new RegExp("[~\\*/\\[\\]]");function Pg(t,e,n){if(e.search(o1)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pi(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pu(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new k(N.INVALID_ARGUMENT,c+t+u)}function YD(t,e){return t.some(n=>n.isEqual(e))}var gu=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Cu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},cg=class extends gu{data(){return super.data()}};function Cu(t,e){return typeof e=="string"?Pg(t,e):e instanceof Pi?e._internalPath:e._delegate._internalPath}function a1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xs=class{},eo=class extends Xs{};function JD(t,e,...n){let r=[];e instanceof Xs&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof ug).length,c=s.filter(u=>u instanceof mu).length;if(o>1||o>0&&c>0)throw new k(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var mu=class t extends eo{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return tT(e._query,n),new jn(e.firestore,e.converter,ep(e._query,n))}_parse(e){let n=xg(e.firestore);return function(s,o,c,u,d,f,g){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new k(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ww(g,f);let I=[];for(let S of g)I.push(Gw(u,s,S));v={arrayValue:{values:I}}}else v=Gw(u,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ww(g,f),v=s1(c,o,g,f==="in"||f==="not-in");return Ce.create(d,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function ZD(t,e,n){let r=e,i=Cu("where",t);return mu._create(i,r,n)}var ug=class t extends Xs{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)tT(o,u),o=ep(o,u)}(e._query,n),new jn(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var lg=class t extends eo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new k(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Er(s,o)}(e._query,this._field,this._direction);return new jn(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Fn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function XD(t,e="asc"){let n=e,r=Cu("orderBy",t);return lg._create(r,n)}var dg=class t extends eo{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new jn(e.firestore,e.converter,Wc(e._query,this._limit,this._limitType))}};function eT(t){return e1("limit",t),dg._create("limit",t,"F")}function Gw(t,e,n){if(typeof(n=xe(n))=="string"){if(n==="")throw new k(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iD(e)&&n.indexOf("/")!==-1)throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(me.fromString(n));if(!L.isDocumentKey(r))throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yw(t,new L(r))}if(n instanceof Je)return yw(t,n._key);throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bu(n)}.`)}function Ww(t,e){if(!Array.isArray(t)||t.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tT(t,e){let n=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var hg=class{convertValue(e,n="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(On(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw j()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Cr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ge(o.doubleValue));return new Zs(s)}convertGeoPoint(e){return new Js(ge(e.latitude),ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=mg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hs(e));default:return null}}convertTimestamp(e){let n=nn(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=me.fromString(e);he(TD(r));let i=new zc(r.get(1),r.get(3)),s=new L(r.popFirst(5));return i.isEqual(n)||tn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function c1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var mr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},yu=class extends gu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Cu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ei=class extends yu{data(e={}){return super.data(e)}},fg=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new mr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ei(this._firestore,this._userDataWriter,r.key,r,new mr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Ei(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Ei(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:u1(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function u1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}var vu=class extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qs(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}};function nT(t,e,n,...r){t=yr(t,Je);let i=yr(t.firestore,br),s=xg(i),o;return o=typeof(e=xe(e))=="string"||e instanceof Pi?i1(s,"updateDoc",t._key,e,n,r):r1(s,"updateDoc",t._key,e),iT(i,[o.toMutation(t._key,Pn.exists(!0))])}function rT(t,e){let n=yr(t.firestore,br),r=Rg(t),i=c1(t.converter,e);return iT(n,[n1(xg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}function kg(t,...e){var n,r,i;t=xe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zw(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(zw(e[o])){let g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,f;if(t instanceof Je)d=yr(t.firestore,br),f=Ig(t._key.path),u={next:g=>{e[o]&&e[o](l1(d,t,g))},error:e[o+1],complete:e[o+2]};else{let g=yr(t,jn);d=yr(g.firestore,br),f=g._query;let v=new vu(d);u={next:I=>{e[o]&&e[o](new fg(d,v,g,I))},error:e[o+1],complete:e[o+2]},a1(t._query)}return function(v,I,S,x){let R=new tg(x),O=new Kp(I,R,S);return v.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return PO(yield Bw(v),O)})),()=>{R.za(),v.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return kO(yield Bw(v),O)}))}}(zD(d),f,c,u)}function iT(t,e){return function(r,i){let s=new en;return r.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return $O(yield ZO(r),i,s)})),s.promise}(zD(t),e)}function l1(t,e,n){let r=n.docs.get(e._key),i=new vu(t);return new yu(t,i,e._key,r,new mr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ki=i})(Sn),An(new dt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new br(new kf(r.getProvider("auth-internal")),new Vf(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new k(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Se(fw,"4.7.2",e),Se(fw,"4.7.2","esm2017")})();var Au=function(){return Au=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Au.apply(this,arguments)};var f1={includeMetadataChanges:!1};function sT(t,e){return e===void 0&&(e=f1),new Y(function(n){var r=kg(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function oT(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Au(Au({},r),(n={},n[e.idField]=t.id,n))}function aT(t){return sT(t,{includeMetadataChanges:!0}).pipe(et(function(e){return e.docs}))}function cT(t,e){return e===void 0&&(e={}),aT(t).pipe(et(function(n){return n.map(function(r){return oT(r,e)})}))}var oo=class{constructor(e){return e}},uT="firestore",Og=class{constructor(){return Cs(uT)}};var Fg=new re("angularfire2.firestore-instances");function p1(t,e){let n=gc(uT,t,e);return n&&new oo(n)}function g1(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new oo(r)}}var m1={provide:Og,deps:[[new nt,Fg]]},y1={provide:oo,useFactory:p1,deps:[[new nt,Fg],Yt]};function Lz(t,...e){return Se("angularfire",cr.full,"fst"),ir([y1,m1,{provide:Fg,useFactory:g1(t),multi:!0,deps:[_e,tt,hi,ur,[new nt,ks],[new nt,di],...e]}])}var Vz=Ke(cT,!0);var jz=Ke(rT,!0);var Uz=Ke(HD,!0);var Bz=Ke(Rg,!0);var $z=Ke(qD,!0);var Hz=Ke(eT,!0);var qz=Ke(XD,!0);var zz=Ke(JD,!0);var Gz=Ke(nT,!0);var Wz=Ke(ZD,!0);export{pt as a,gt as b,E as c,Ee as d,oy as e,Y as f,pl as g,gl as h,ln as i,is as j,as as k,$t as l,gb as m,mb as n,yb as o,Kn as p,et as q,bb as r,Qn as s,_l as t,Xo as u,Ab as v,Sb as w,Ur as x,by as y,Nb as z,Rb as A,cs as B,ea as C,xb as D,Pb as E,Ay as F,Il as G,kb as H,Sy as I,Ny as J,Ob as K,Fb as L,El as M,oe as N,vv as O,fe as P,Iv as Q,$U as R,re as S,Z as T,Ne as U,X as V,nt as W,rC as X,hs as Y,HU as Z,Pv as _,qa as $,ir as aa,$v as ba,_n as ca,qU as da,Qv as ea,zU as fa,GU as ga,WU as ha,KU as ia,E0 as ja,tt as ka,Ja as la,Ct as ma,_e as na,ei as oa,Xa as pa,QU as qa,YU as ra,V0 as sa,Is as ta,JU as ua,Q0 as va,ZU as wa,XU as xa,xa as ya,eB as za,Et as Aa,tB as Ba,Oa as Ca,eh as Da,oc as Ea,sB as Fa,LS as Ga,HS as Ha,dd as Ia,qS as Ja,ZS as Ka,tN as La,sN as Ma,hN as Na,wI as Oa,fN as Pa,TI as Qa,bI as Ra,TN as Sa,oB as Ta,NN as Ua,aB as Va,xN as Wa,cB as Xa,PN as Ya,SI as Za,kN as _a,uB as $a,ON as ab,lB as bb,dB as cb,hB as db,fB as eb,pB as fb,gB as gb,nh as hb,qN as ib,zN as jb,ac as kb,mB as lb,yB as mb,LI as nb,vB as ob,_B as pb,lR as qb,IB as rb,dR as sb,EB as tb,sh as ub,WB as vb,jI as wb,dh as xb,KB as yb,cc as zb,fR as Ab,QB as Bb,pR as Cb,YB as Db,JB as Eb,ZB as Fb,XB as Gb,e$ as Hb,vR as Ib,t$ as Jb,n$ as Kb,zI as Lb,z$ as Mb,G$ as Nb,qH as Ob,zH as Pb,oo as Qb,Lz as Rb,Vz as Sb,jz as Tb,Uz as Ub,Bz as Vb,$z as Wb,Hz as Xb,qz as Yb,zz as Zb,Gz as _b,Wz as $b};
